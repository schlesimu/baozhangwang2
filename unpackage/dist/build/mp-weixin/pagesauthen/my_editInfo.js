(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesauthen/my_editInfo"],{"325a":function(e,t,n){},"3b1f":function(e,t,n){"use strict";var i=n("325a"),o=n.n(i);o.a},"3d48":function(e,t,n){"use strict";n.r(t);var i=n("b169"),o=n("e994");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("3b1f");var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=u.exports},b169:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={wPicker:function(){return n.e("components/w-picker/w-picker").then(n.bind(null,"55d6"))}},o=function(){var e=this,t=e.$createElement;e._self._c},a=[]},d8d6:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){n.e("components/w-picker/w-picker").then(function(){return resolve(n("55d6"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("components/ben-upload/ben-upload").then(function(){return resolve(n("df45"))}.bind(null,n)).catch(n.oe)},a=n("5745"),s={components:{wPicker:i,benUpload:o},data:function(){return{sexIndex:1,sex:[{value:1,label:"男"},{value:2,label:"女"}],IMG_URL:this.IMG_URL,dateValue:0,user:{},hometown:"",city1:null,user_type:1,nickname:"",edittype:1,degree:!1,degree_list:[],degree_act:"",uploadpic:!1,jobDate:"",phone:"",adress:"",range:!1,region:!1,birthday:!1,is_certified:"",is_certified_name:""}},onLoad:function(t){var n=this;this.edittype=t.edittype,this.getinfo();var i=t.avatar;i&&(this.user.head_img=i),this.user.address&&(this.name=this.user.address),this.phone=e.getStorageSync("USERINFO").mobile,e.$on("upHeadImg",(function(e){console.log(e,"监听图片修改参数"),n.user.head_img=e.avatar,n.$forceUpdate()})),e.$on("online_authen",(function(){n.is_certified_name="待审核",n.is_certified=1}))},onUnload:function(){e.$off("upHeadImg"),e.$off("online_authen")},methods:{toPath:function(t){e.navigateTo({url:t})},nicknameInput:function(e){e&&e.length>12&&this.$Common.toast("姓名不能超过12个字符")},goPage:function(){0!=this.is_certified&&3!=this.is_certified||e.navigateTo({url:"../pagescenter/userypz/online_authencation?is_reset="+this.is_certified})},nickblur:function(e){e&&e.length<2&&this.$Common.toast("姓名不能少于2个字符")},toggleTab:function(e){this.$data[e]=!0},upload:function(){e.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var n=t.tempFilePaths[0];e.navigateTo({url:"/pagescommon/upload?src="+n})}})},yulan:function(e){e?this.$Common.lookImg(e):this.upload()},addressConfirm:function(e){console.log("选择地址",e),this.hometown=e.obj.province.label+"-"+e.obj.city.label+"-"+e.obj.area.label},chooseSex:function(e,t){this.sexIndex=e.value},onConfirm:function(e){console.log(e),this.start_time=e.obj.fyear+"."+e.obj.fmonth,this.end_time=e.obj.tyear+"."+e.obj.tmonth,this.jobDate=e.result},birthdayConfirm:function(e){this.dateValue=e.result},getinfo:function(){var e=this;this.$Request.post(this.$api.user.get_user_info).then((function(t){console.log(t,"用户信息"),1==t.code?(e.user.head_img=t.data.head_img,e.nickname=t.data.user_name,console.log(e.nickname),e.sexIndex=t.data.sex,e.dateValue=t.data.birthday||"",e.hometown=t.data.hometown||"",e.adress=t.data.user_address,e.phone=t.data.mobile,e.is_certified_name=t.data.is_certified_name,e.is_certified=t.data.is_certified):e.$Common.toast(t.msg)}))},formSubmit:function(t){var n=this;console.log(t.detail.value);var i=[{name:"head_img",rule:["required"],msg:["请选择头像"]},{name:"user_nickname",rule:["required","minLength:2","maxLength:12"],msg:["请输入姓名","姓名必须2个或以上字符","姓名不能超过12个字符"]},{name:"birthday",rule:["required","isDate"],msg:["请选择生日","请选择生日"]},{name:"hometown",rule:["required"],msg:["请选择现居住地"]},{name:"phone",rule:["required"],msg:["请输入手机号"]},{name:"user_address",rule:["required"],msg:["请输入住址"]}],o=t.detail.value;o.head_img=this.user.head_img,o.hometown=this.hometown,o.sex=this.sexIndex;var s=a.validation(o,i);if(s)return this.$Common.toast(s),!1;this.$Request.post(this.$api.user.edit_user_info,o).then((function(t){if(n.$Common.toast(t.msg),1==t.code){e.$emit("change",{msg:1});var i=e.getStorageSync("USERINFO");console.log(i),i.head_img=t.data.userinfo.head_img,i.user_nickname=t.data.userinfo.user_nickname,e.setStorageSync("USERINFO",i),setTimeout((function(){e.navigateBack({})}),1e3)}}))}}};t.default=s}).call(this,n("543d")["default"])},e144:function(e,t,n){"use strict";(function(e){n("652a");i(n("66fd"));var t=i(n("3d48"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},e994:function(e,t,n){"use strict";n.r(t);var i=n("d8d6"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a}},[["e144","common/runtime","common/vendor"]]]);