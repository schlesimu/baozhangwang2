(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{1448:function(e,t,o){"use strict";o.r(t);var n=o("6764"),r=o.n(n);for(var c in n)"default"!==c&&function(e){o.d(t,e,(function(){return n[e]}))}(c);t["default"]=r.a},"1c1a":function(e,t,o){"use strict";(function(e,t){o("652a");var n=h(o("66fd")),r=h(o("9c64")),c=h(o("a19d")),a=h(o("4ba2")),u=h(o("fd35")),i=h(o("a925")),s=h(o("1485")),l=h(o("b3c8")),f=h(o("1f7e")),d=h(o("e078")),p=h(o("3da5")),g=o("b846");o("441e");var m=h(o("f78b"));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){S(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function S(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}wx.__webpack_require_UNI_MP_PLUGIN__=o,n.default.use(new g.JjimWidget),n.default.use(m.default),n.default.use(i.default);var y=function(){o.e("pages/tabbar/homepage").then(function(){return resolve(o("dc25"))}.bind(null,o)).catch(o.oe)};n.default.component("homepage",y);var k=function(){Promise.all([o.e("common/vendor"),o.e("pages/tabbar/message")]).then(function(){return resolve(o("a20e"))}.bind(null,o)).catch(o.oe)};n.default.component("message",k);var O=function(){o.e("pages/tabbar/worktimeindex").then(function(){return resolve(o("8fe7"))}.bind(null,o)).catch(o.oe)};n.default.component("worktime",O);var _=function(){o.e("pages/tabbar/user").then(function(){return resolve(o("7d67"))}.bind(null,o)).catch(o.oe)};n.default.component("user",_);var w=function(){Promise.all([o.e("common/vendor"),o.e("pages/tabbar/homepageTwo")]).then(function(){return resolve(o("a9f5"))}.bind(null,o)).catch(o.oe)};n.default.component("homepageTwo",w);var P=function(){o.e("pages/tabbar/zhaopinzhe").then(function(){return resolve(o("69f7"))}.bind(null,o)).catch(o.oe)};n.default.component("zhaopinzhe",P);var $=function(){o.e("components/plantList").then(function(){return resolve(o("3999"))}.bind(null,o)).catch(o.oe)};n.default.component("plantList",$);var j=function(){Promise.all([o.e("common/vendor"),o.e("components/serviceBroker")]).then(function(){return resolve(o("ff4b"))}.bind(null,o)).catch(o.oe)};n.default.component("serviceBroker",j);var M=function(){Promise.all([o.e("common/vendor"),o.e("components/mescroll-uni/mescroll-body")]).then(function(){return resolve(o("f077"))}.bind(null,o)).catch(o.oe)},C=function(){Promise.all([o.e("common/vendor"),o.e("components/mescroll-uni/mescroll-uni")]).then(function(){return resolve(o("d7d1"))}.bind(null,o)).catch(o.oe)};n.default.component("mescroll-body",M),n.default.component("mescroll-uni",C);var R=function(){o.e("colorui/components/cu-custom").then(function(){return resolve(o("b3ee"))}.bind(null,o)).catch(o.oe)};n.default.component("cu-custom",R),n.default.config.productionTip=!1;var U={id:100,version:"1.0.0"};new i.default({locale:"zh-Hans",messages:{ch:"",en:""}});n.default.prototype.$api=c.default,n.default.prototype.$Request=a.default,n.default.prototype.$Config=a.default.config,n.default.prototype.$Cache=u.default,n.default.prototype.$mRouter=s.default,n.default.prototype.$mRoutesConfig=l.default,n.default.prototype.$Lbframe=f.default,n.default.prototype.$Common=d.default,n.default.prototype.$current=U,n.default.prototype.$util=p.default,r.default.mpType="app",s.default.beforeEach((function(t,o){if(void 0===o.route)throw"路由钩子函数中没有找到to.route对象，路由信息:"+JSON.stringify(o);if(o.route.requiresAuth){var n=e.getStorageSync("USERINFO"),r=n.user_token;if(r)e[t]({url:f.default.objParseUrlAndParam(o.route.path,o.query)});else{var c=b({redirectUrl:o.route.path},o.query);e.navigateTo({url:f.default.objParseUrlAndParam(l.default.login.path,c)})}}else e[t]({url:f.default.objParseUrlAndParam(o.route.path,o.query)})})),e.onNetworkStatusChange((function(t){t.isConnected||e.showToast({title:"网络信号弱，请检查您的网络状态……",icon:"none"})}));var A=new n.default(b({},r.default));n.default.prototype.IMG_URL=a.default.config("DOMAIN"),n.default.prototype.BASEURL=a.default.config("BASEURL");var L=a.default.config("DOMAIN"),I=!1;n.default.mixin({data:function(){return{IMG_URL:L}},methods:{navTo:function(t){I||(I=!0,e.navigateTo({url:t}),setTimeout((function(){I=!1}),200))},head_img:function(e){return-1==e.indexOf("http")?L+e:e}},filters:{card_img:function(e){return"../../static/user/card2.png"==e||"../../static/user/card1.png"==e||"../../static/user/card3.png"==e||"../../static/user/up.png"==e?e:0==e.indexOf("/static")?L+e:e},head_img:function(e){return-1==e.indexOf("http")?L+e:e},sub_str:function(e){return e=e.toString(),e.length>12?e.substr(0,12)+"...":e}}}),t(A).$mount()}).call(this,o("543d")["default"],o("543d")["createApp"])},6764:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(o("66fd")),r=(o("88c8"),o("85e9"));function c(e){return e&&e.__esModule?e:{default:e}}var a={onLaunch:function(){var t=this;this,e.removeStorageSync("PageCur"),e.removeStorageSync("chooseCity"),e.removeStorageSync("position_const"),e.setStorageSync("istoken",!0),e.setStorageSync("openHomePop",1);e.getSystemInfo({success:function(e){n.default.prototype.StatusBar=e.statusBarHeight;var t=wx.getMenuButtonBoundingClientRect();n.default.prototype.Custom=t,n.default.prototype.CustomBar=t.bottom+t.top-e.statusBarHeight}}),this.initializeSocket(),e.$on("appLoginSuccess",(function(){console.log("微信登录，通知开启websocket"),e.closeSocket(),t.initializeSocket()})),e.$on("jump",(function(t){e.closeSocket(),console.log("关闭")})),e.$on("openAll",(function(){e.closeSocket(),t.initializeSocket()})),this.$Request.get(this.$api.common.fetchAppSetting).then((function(t){console.log(t),e.setStorageSync("is_contact",1*t.data.is_contact)}))},onShow:function(){console.log("App Show"),e.$emit("openPage",{}),this.initializeSocket(),setTimeout((function(){(0,r.permissions)()}),200),e.hideLoading()},onHide:function(){console.log("App Hide"),e.removeStorageSync("chooseCity"),e.closeSocket(),e.onSocketOpen((function(){e.closeSocket()})),e.getStorageSync("wechet")||e.removeStorageSync("launchFlag"),e.onSocketClose((function(e){console.log("WebSocket 已关闭全局！")}))},methods:{initializeSocket:function(){var t=e.getStorageSync("USERINFO");t.user_token&&(e.connectSocket({url:"wss://websocket.chongdarenli.com?from_id="+t.id+"&to_id=0"}),e.onSocketOpen((function(t){setInterval((function(){e.sendSocketMessage({data:"pong",success:function(e){}})}),1e4)})),e.onSocketError((function(e){console.log("WebSocket连接打开失败，请检查！")})),e.onSocketMessage((function(t){if(console.log(t,"========"),"success"!=t.data){var o=JSON.parse(t.data);if(!o)return;if("saveMessage"==o.event){console.log("在全局接收到信息"),setTimeout((function(){e.$emit("receiveMsg","接收消息")}),200),e.setStorageSync("sevice",!0);var n=getCurrentPages();if(""!=n){var r=n[n.length-1].route;"pagesmessage/userMsg"!=r&&(e.vibrateLong(),e.$emit("updata",{}))}}}})),e.onSocketError((function(t){e.closeSocket(),console.log("WebSocket 已关闭！")})))},sendSocketMessage:function(t){e.sendSocketMessage({data:t,success:function(e){}})},getGuide:function(){this.$Request.post(this.$api.operation.get_ads,{typeid:2}).then((function(t){1==t.code&&""==t.data.video&&(e.getStorageSync("USERINFO").user_token||e.setStorageSync("USERINFO",{user_type:1,id:""}),e.reLaunch({url:"/pages/guide/guide"}))}))}}};t.default=a}).call(this,o("543d")["default"])},"9c64":function(e,t,o){"use strict";o.r(t);var n=o("1448");for(var r in n)"default"!==r&&function(e){o.d(t,e,(function(){return n[e]}))}(r);o("c859");var c,a,u,i,s=o("f0c5"),l=Object(s["a"])(n["default"],c,a,!1,null,null,null,!1,u,i);t["default"]=l.exports},c46c:function(e,t,o){},c859:function(e,t,o){"use strict";var n=o("c46c"),r=o.n(n);r.a}},[["1c1a","common/runtime","common/vendor"]]]);