(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesHome/publishInfo"],{3412:function(t,i,e){"use strict";e.r(i);var o=e("ac06"),n=e("ecaa");for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);var s,d=e("f0c5"),u=Object(d["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);i["default"]=u.exports},"50da":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e("5745"),n={data:function(){return{infoId:null,title:"",description:"",address:"请选择您位置",phone:"",infoImgs:[],infoVideos:"",defaultpic:!1,defaultVideo:!1,uShow:!1,vShow:!1,type:1,isOpen:"OYEA",btnRefresh:"",btnSwitch:"",paddingBottom:"400upx",city_id:null,category_id:null,lon:null,lat:null,sexIndex:0,sex:["请选择性别","男","女"],age:null,min_age:null,max_age:null,jobList:[],jobIndex:0,currentIndex:0}},watch:{isOpen:function(t){1==this.type&&(this.btnSwitch=t?"关闭这条信息":"开启这条信息")}},onLoad:function(i){var e=this,o=this;if(this.type=i.type,this.infoId=i.id,this.category_id=i.category_id,console.error(i),this.getLocation(),this.sex=13==i.category_id?["请选择性别要求","男","女","男女不限"]:["请选择性别","男","女"],1==i.type){this.paddingBottom="200px";var n=13==this.category_id?"招聘信息":"求职信息";t.setNavigationBarTitle({title:"发布"+n}),this.btnRefresh="刷新"+n}else this.paddingBottom="100px",t.setNavigationBarTitle({title:"发布坑骗拖欠黑名单"});1==i.type&&this.$Request.post(this.$api.job.get_station_list,{type_pid:261}).then((function(t){if(console.log(t),1==t.code){e.jobList=t.data;e.category_id}}));var a=1==i.type?this.$api.user.user_info_get+"?category_id="+i.category_id:this.$api.user.user_inform_get+"?id="+i.id;1==i.type||i.id?this.$Request.get(a).then((function(t){console.log(t),o.defaultpic=!0,o.defaultVideo=!0,1==t.code&&(o.infoId=t.data.id,o.category_id=t.data.category_id,o.title=t.data.title,o.description=t.data.body,o.phone=t.data.driver_phone,o.city_id=t.data.city_id,o.address=t.data.address,o.lon=t.data.lon,o.lat=t.data.lat,1==o.type&&(o.sexIndex=t.data.sex,o.jobList.map((function(i,e){console.error(e),i.aid==t.data.station_id&&(o.currentIndex=e)})),o.age=t.data.age,o.min_age=t.data.min_age,o.max_age=t.data.max_age),o.infoImgs=t.data.info_imgs,o.infoVideos=t.data.info_videos,o.infoImgs&&o.infoImgs.length>0&&(o.uShow=!0),o.infoVideos&&o.infoVideos.length>0&&(o.vShow=!0),1==i.type&&(o.isOpen=!!t.data.status))})):(this.defaultpic=!0,this.defaultVideo=!0)},onShow:function(){this.defaultpic=!0,this.defaultVideo=!0},methods:{formSubmit:function(i){var e=this,n=[{name:"title",rule:["required","minLength:2","maxLength:30"],msg:["请输入标题","标题必须2个或以上字符","标题不能超过30个字符"]}];if(1==this.type&&13!=this.category_id||(n=n.concat([{name:"description",rule:["required"],msg:["请输入内容"]}])),1==this.type){if(n=n.concat([{name:"address",rule:["required"],msg:["请输入电话"]},{name:"phone",rule:["required","isMobile"],msg:["请输入电话","输入的电话不合法"]}]),13==this.category_id){if(0==this.sexIndex)return void this.$Common.toast("请选择性别要求");if(n=n.concat([{name:"min_age",rule:["required"],msg:["请输入最小年龄"]},{name:"max_age",rule:["required"],msg:["请输入最大年龄"]}]),this.min_age<16)return void this.$Common.toast("最小年龄不可小于16岁");if(console.error(this.max_age),this.max_age>65)return void this.$Common.toast("最大年龄不可大于65岁")}if(14==this.category_id){if(0==this.sexIndex)return void this.$Common.toast("请选择性别要求");n=n.concat([{name:"age",rule:["required"],msg:["请输入年龄"]}])}}var a=i.detail.value;1==this.type&&(a.station_id=this.jobList[this.currentIndex].aid),console.log(a);var s=o.validation(a,n);if(s)return this.$Common.toast(s),!1;var d=[],u=[];this.infoImgs&&this.infoImgs.map((function(t){d.push(t.aid)})),this.infoVideos&&this.infoVideos.map((function(t){u.push(t.aid)})),console.log(this.infoVideos),this.infoId&&(a.id=this.infoId),a.category_id=this.category_id,a.img_url=d.join(","),a.video_url=u.join(","),a.source=2,1==this.type?(a.lon=this.lon,a.lat=this.lat):3==this.type&&(a.city_id=""),console.log(a);var r=this.$api.user.user_info_submit;this.$Request.post(r,a).then((function(i){e.$Common.toast(i.msg),1==i.code&&setTimeout((function(){t.navigateBack(),t.setStorageSync("_REBACK",1)}),1e3)}))},checktitle:function(t){t.length>30&&this.$Common.toast("姓名不能超过30个字符")},titleblur:function(t){t.length<2&&this.$Common.toast("内容不能少于2个字符")},infoImgLive:function(t){this.defaultpic=!0,console.log(t),this.infoImgs=t,""!=t&&(this.uShow=!0)},infoVideoLive:function(t){this.defaultVideo=!0,console.log(t),this.infoVideos=t,""!=t&&(this.vShow=!0)},getCityId:function(t){var i=this,e=[t.longitude,t.latitude];this.$Request.post(this.$api.msg.cityPosition,{user_id:this.user_id||"",cid:"",lat:e}).then((function(t){1==t.code?i.city_id=t.data.id:i.$Common.toast("无法定位，请打开手机定位！！")})).catch((function(t){i.$Common.toast("无法定位，请打开手机定位！！")}))},wechatLocation:function(){var t=this;this.$util.chooseLocation(this,(function(i){t.lon=i.longitude,t.lat=i.latitude,t.address=i.address,t.getCityId({longitude:i.longitude,latitude:i.latitude})}))},updateList:function(){var i=this;this.$Request.post(this.$api.user.user_info_refresh,{id:this.infoId}).then((function(e){i.$Common.toast(e.msg),1==e.code&&(t.setStorageSync("_REBACK",1),setTimeout((function(){t.navigateBack({delta:1})}),1e3))}))},setInfoStatus:function(){var i=this;console.log(this.infoId),this.$Request.post(this.$api.user.user_info_switch,{id:this.infoId}).then((function(e){i.$Common.toast(e.msg),1==e.code&&(i.isOpen=!i.isOpen,t.setStorageSync("_REBACK",1),setTimeout((function(){t.navigateBack({delta:1})}),1e3))}))},bindPickerChange:function(t){this.sexIndex=t.detail.value},jobChange:function(t){console.error(t),this.jobIndex=t.detail.value},leaveCon1:function(){return this.min_age?/^[1-9]\d*$/.test(this.min_age)?this.min_age<16?(this.$Common.toast("请输入不小于16的起始年龄"),this.min_age="",!1):void 0:(this.$Common.toast("请输入不以0开头并且为整数的起始年龄"),this.min_age="",!1):(this.$Common.toast("请输入起始年龄"),!1)},leaveCon2:function(){return this.min_age?/^[1-9]\d*$/.test(this.max_age)?void(this.max_age>65&&(this.$Common.toast("年龄设置不可大于65岁"),this.max_age="")):(this.$Common.toast("请输入不以0开头并且为整数的最大年龄"),this.max_age="",!1):(this.$Common.toast("请输入起始年龄"),!1)},selectJob:function(t){this.currentIndex=t},getLocation:function(){var t=this;this.$Common.getLocation((function(i){var e=t,o=[i.longitude,i.latitude];t.$Request.post(e.$api.msg.cityPosition,{user_id:e.user_id||"",cid:"",lat:o}).then((function(t){1==t.code?(e.address=t.data.name,e.lon=i.longitude,e.lat=i.latitude,e.getCityId(i)):e.$Common.toast("无法定位，请打开手机定位！！")})).catch((function(t){e.$Common.toast("无法定位，请打开手机定位！！")}))}))}}};i.default=n}).call(this,e("543d")["default"])},ac06:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}));var o={benUpload:function(){return e.e("components/ben-upload/ben-upload").then(e.bind(null,"df45"))},benVideoUpload:function(){return e.e("components/ben-video-upload/ben-video-upload").then(e.bind(null,"a16f"))},uniPopup:function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"b7f7"))}},n=function(){var t=this,i=t.$createElement;t._self._c},a=[]},ecaa:function(t,i,e){"use strict";e.r(i);var o=e("50da"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},efee:function(t,i,e){"use strict";(function(t){e("652a");o(e("66fd"));var i=o(e("3412"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])}},[["efee","common/runtime","common/vendor"]]]);