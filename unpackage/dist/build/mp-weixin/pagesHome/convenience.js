(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesHome/convenience"],{"0b87":function(t,i,e){"use strict";e.r(i);var s=e("1493"),n=e.n(s);for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);i["default"]=n.a},1493:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=n(e("c5aa"));function n(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[s.default],data:function(){return{is_top:!1,lat:"",lon:"",iconType:"flower",page:1,showtop:!1,distance_y:"",newsList:[],loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"},IMG_URL:this.IMG_URL,proventList:[],cityList:"",areaList:"",provinceIndex:1,last_page:"",type:"",address:"全国",status:"loadmore",keyword:"",city_id:"",area_id:"",cityIndex:null,areaIndex:null,isSearch:!0,category_id:null,tabList:[{index:1,title:"招聘零工信息"},{index:2,title:"求职零工信息"}],currentTab:1,showLoading:!0,noticeList:[],t:null,left:0,choose:!1,getpart_type:"",Modalname:"",online_type:0,jobId:""}},watch:{currentTab:function(t){1==this.type&&(this.category_id=1==t?13:14,this.get_list())}},onPageScroll:function(t){this.distance_y=t.scrollTop,t.scrollTop>=250?this.showtop=!0:this.showtop=!1},onReachBottom:function(){var t=this;t.page>=t.last_page||(t.status="loading",t.page++,t.get_list())},onLoad:function(i){var e=this;this.type=i.type,this.category_id=i.id,console.log(i),this.currentTab=1,3==this.type&&(this.city_id="",this.area_id=""),0==i.type?t.setNavigationBarTitle({title:"打工头条"}):1==i.type?(this.get_part_type(),t.setNavigationBarTitle({title:"本地零工市场"})):t.setNavigationBarTitle({title:"黑名单资讯"}),this.getAddressList(),this.$Common.getLocation((function(t){var i=e;e.longitude_const=t.longitude,e.latitude_const=t.latitude;var s=[t.longitude,t.latitude];e.$Request.post(i.$api.msg.cityPosition,{user_id:i.user_id||"",cid:"",lat:s}).then((function(t){1==t.code?(1==e.type&&(i.address=t.data.name,i.area_id=t.data.id,e.getNoticeList(t.data.id)),3==e.type&&(i.city_id="",i.area_id=""),e.longitude=t.data.lng,e.latitude=t.data.lat,e.get_list(),e.page=1):i.$Common.toast("无法定位，请打开手机定位！！")})).catch((function(t){i.$Common.toast("无法定位，请打开手机定位！！")}))}))},onShow:function(){t.getStorageSync("_REBACK")&&(1==this.type&&(this.currentTab=13==this.category_id?1:2,t.removeStorageSync("_REBACK")),this.get_list())},methods:{back_top:function(){t.pageScrollTo({scrollTop:0,duration:300})},search_input:function(){if(!/^\s*(\S+)\s*$/.test(this.search_txt))return this.$Common.toast("请不要输入空格"),!1;this.search_txt=RegExp.$1,this.get_list()},chooseAddress:function(){0==this.provinceIndex&&(this.provinceIndex=1,this.cityList=this.proventList[1].child,this.areaIndex=null,this.cityIndex=null),this.isSearch=!1,this.$refs.shareType&&this.$refs.shareType.open()},getAddressList:function(){var t=this;this.$Request.post(this.$api.msg.getAddressList).then((function(i){"1"==i.code&&(t.proventList=i.data,t.proventList.unshift({shortname:"全国",id:""}),t.cityList=t.proventList[1].child)}))},chooseProvince:function(t,i){if(this.provinceIndex=i,0==i)return this.area_id="",this.city_id="",this.address=t.shortname,this.get_list(),this.getNoticeList(),void(this.$refs.shareType&&this.$refs.shareType.close());this.cityList=this.proventList[i].child,this.cityList[0].child&&this.cityList.unshift({shortname:"全"+this.proventList[i].shortname,id:this.proventList[i].id}),console.log(this.cityList,"======="),this.cityIndex=null,this.areaIndex=null},chooseCity:function(t,i){this.cityIndex=i,this.city_id=t.id,this.area_id="",this.areaIndex=null,this.address=t.shortname,this.get_list(),this.getNoticeList(this.city_id),this.$refs.shareType&&this.$refs.shareType.close()},chooseArea:function(t,i,e){this.area_id=t.id,this.city_id="",this.cityIndex=null,this.areaIndex=e+"-"+i,this.address=t.shortname,this.get_list(),this.getNoticeList(this.area_id),this.$refs.shareType&&this.$refs.shareType.close()},toPage:function(i){var e=this;t.getStorageSync("userToken")?0!=this.isopen&&(this.isopen=!1,setTimeout((function(){e.isopen=!0}),1500),t.navigateTo({url:i})):this.$Common.toast("登录后才能操作哦")},get_list:function(){var i=this,e=this,s=0==this.type?3:1==this.type?2:4;1==this.type&&(s=this.category_id?this.category_id:13),this.$Request.post(this.$api.operation.get_art_list,{category_id:s,page:this.page,city_id:0==this.type?"":this.area_id,pid:0==this.type?"":this.city_id,keword:this.keyword||"",jobId:this.jobId||""}).then((function(s){t.hideLoading(),i.showLoading=!1,1==s.code?(1==e.page&&(e.newsList=[]),e.newsList=e.newsList.concat(s.data.data),console.log(e.newsList),e.last_page=s.data.last_page,e.status=s.data.last_page<=e.page?"nomore":"loading",setTimeout((function(){e.$emit("getData",111)}),100)):t.showToast({title:s.msg,icon:"none"})}))},navTo:function(i){var e=this;0!=this.isopen&&(this.isopen=!1,setTimeout((function(){e.isopen=!0}),1500),t.navigateTo({url:i}))},toAdd:function(i){1==this.type&&(this.category_id=1==i?13:14);var e="/pagesHome/publishInfo?type="+this.type+"&category_id="+this.category_id;t.navigateTo({url:e})},getNoticeList:function(t){var i=this;t=t||this.city_id,this.$Request.get(this.$api.msg.getNoticeList,{city_id:t||0,position:1}).then((function(t){1==t.code&&(i.noticeList=t.data)}))},toNoticeDetails:function(i){console.error(i),t.navigateTo({url:"/pagesHome/index/notice_detail?id="+i+"&type=20221015"})},plant_filter:function(){this.choose=!0,this.Modalname="plant_filter"},hideModal:function(){this.Modalname=null},get_part_type:function(){var i=this;this.$Request.post(this.$api.job.get_station_list,{type_pid:261}).then((function(e){console.log(e),1==e.code?(i.getpart_type=e.data.map((function(t){return{id:t.aid,label:t.station_name}})),i.getpart_type.unshift({id:0,label:"全部"})):t.showToast({title:e.msg,icon:"none"})}))},select_online_type:function(t,i){var e=this;this.Modalname=null,this.online_type=t.id,this.jobId=t.id,setTimeout((function(){e.get_list()}),300)}}};i.default=o}).call(this,e("543d")["default"])},"1cac":function(t,i,e){"use strict";(function(t){e("652a");s(e("66fd"));var i=s(e("4449"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])},"260a":function(t,i,e){"use strict";var s=e("e716"),n=e.n(s);n.a},4449:function(t,i,e){"use strict";e.r(i);var s=e("7313"),n=e("0b87");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("260a");var a,r=e("f0c5"),c=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);i["default"]=c.exports},7313:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return s}));var s={uLoadmore:function(){return e.e("uview-ui/components/u-loadmore/u-loadmore").then(e.bind(null,"49b2"))},uEmpty:function(){return e.e("uview-ui/components/u-empty/u-empty").then(e.bind(null,"3480"))},uniPopup:function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"b7f7"))}},n=function(){var t=this,i=t.$createElement,e=(t._self._c,!t.showLoading&&t.noticeList.length?t.__map(t.noticeList,(function(i,e){var s=t.__get_orig(i),n=!i.path&&i.system_notice_title.length>35?i.system_notice_title.substr(0,35):null,o=i.path&&i.system_notice_title.length>35?i.system_notice_title.substr(0,35):null;return{$orig:s,g0:n,g1:o}})):null),s=t.showLoading?null:["1","3"].indexOf(t.type);t._isMounted||(t.e0=function(i,e){var s=arguments[arguments.length-1].currentTarget.dataset,n=s.eventParams||s["event-params"];e=n.item;t.currentTab=e.index}),t.$mp.data=Object.assign({},{$root:{l0:e,g2:s}})},o=[]},e716:function(t,i,e){}},[["1cac","common/runtime","common/vendor"]]]);