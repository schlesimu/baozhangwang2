(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesHome/plantList"],{72137:function(t,i,e){"use strict";e.r(i);var s=e("b1cc"),n=e("94ef");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("d1b1");var a,r=e("f0c5"),d=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"0c95270a",null,!1,s["a"],a);i["default"]=d.exports},7717:function(t,i,e){"use strict";(function(t){e("652a");s(e("66fd"));var i=s(e("72137"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])},"94ef":function(t,i,e){"use strict";e.r(i);var s=e("b4b7"),n=e.n(s);for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);i["default"]=n.a},"994f":function(t,i,e){},b1cc:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return s}));var s={uLoadmore:function(){return e.e("uview-ui/components/u-loadmore/u-loadmore").then(e.bind(null,"49b2"))},uEmpty:function(){return e.e("uview-ui/components/u-empty/u-empty").then(e.bind(null,"3480"))},uniPopup:function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"b7f7"))}},n=function(){var t=this,i=t.$createElement;t._self._c},o=[]},b4b7:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e("6c72");function n(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var o={data:function(){var t;return t={jobList:[],showtop:!1,experience:s.experience2,distance_y:"",page:1,IMG_URL:this.IMG_URL,total_page:"",server_price:"",iconType:"flower",sorttype:1,sort_type:1,fan_type:0,welfare:0,currentIndexExp:0,currentIndexEdu:0,plant_type:[],proventList:[],cityList:"",areaList:"",stationIndex:1,jobIndex:0,is_part_job_type:0,payrt_job_type:"",settlement_method:"",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"},last_page:"",voucher:"",status:"loadmore",keyword:"",markHeight:"0px",choose:!1,type:"4",activeTab:0,Modalname:null,address:"",city_name:"",city_id:"",positionList:[],slist:"",provinceList:[],provinceIndex:0,cityIndex:null,isShow:!1,popOpen:!1,tabList:[{name:"派遣企业",id:2},{name:"全国门店服务经纪人",id:1}],sort_list:[{id:1,name:" 最新"},{id:2,name:"距离"},{id:3,name:"工资"},{id:4,name:"行业职位"}],degree_list:"",longitude:"",latitude:"",stations:"",area_id:""},n(t,"cityIndex",null),n(t,"areaIndex",null),t},onLoad:function(i){var e=this;4==i.type?t.setNavigationBarTitle({title:"劳务派遣直聘"}):(t.setNavigationBarTitle({title:"本地企业直聘"}),this.activeTab=0),this.type=i.type,this.getAddressList(),this.$Common.getLocation((function(t){var i=e,s=[t.longitude,t.latitude];e.$Request.post(i.$api.msg.cityPosition,{user_id:i.user_id||"",cid:"",lat:s}).then((function(t){1==t.code?(4==e.type?(i.address="全国",i.area_id=""):(i.address=t.data.name||"全国",i.area_id=t.data.id),e.longitude=t.data.lng,e.latitude=t.data.lat,e.page=1,e.get_job_list()):i.$Common.toast("无法定位，请打开手机定位！！")})).catch((function(t){i.$Common.toast("无法定位，请打开手机定位！！")}))})),this.getPosition(),this.getDegree()},onShow:function(){this.get_plant_type(),this.get_is_pay()},onPageScroll:function(t){var i=this;this.distance_y=t.scrollTop,t.scrollTop>=250?i.showtop=!0:i.showtop=!1},onReachBottom:function(){var t=this;t.page>=t.last_page||(t.status="loading",t.page++,t.get_job_list())},methods:{back_top:function(){t.pageScrollTo({scrollTop:0,duration:300})},search_input:function(){var t=this;if(!/^\s*(\S+)\s*$/.test(this.search_txt))return this.$Common.toast("请不要输入空格"),!1;this.search_txt=RegExp.$1,this.fan_type=0,this.welfare="",setTimeout((function(){t.dataList()}),100)},lookService:function(t){1==t.is_servicebroker?(this.$refs.isShow&&this.$refs.isShow.open(),this.server_price=t.server_price):this.$Common.toast("门店服务经纪人才可查看"),this.$refs.shareType&&this.$refs.shareType.close()},dataList:function(){this.page=1,this.jobList=[],this.status="more",this.get_job_list()},chooseExperience:function(t,i){var e=this;this.currentIndexExp=i,0==i&&(t=""),this.Modalname=null,setTimeout((function(){e.dataList()}),300),console.log(t)},chooseEducation:function(t,i){var e=this;this.currentIndexEdu=t.id,this.Modalname=null,setTimeout((function(){e.dataList()}),300)},getPosition:function(t){var i=this;this.$Request.post(this.$api.job.get_station_list,{seach:"",type_pid:t||""}).then((function(e){"1"==e.code&&(t?(""!=e.data&&e.data.unshift({aid:0,station_name:"全部"}),i.slist=e.data):(e.data.unshift({aid:0,station_name:"全部"}),i.positionList=e.data))}))},chooseStation:function(t,i){this.stationIndex!==i&&(0==i&&(this.stations="",this.stations_pid="",this.dataList(),this.$refs.shareType&&this.$refs.shareType.close()),this.stationIndex=i,this.getPosition(t.aid))},choosePosition:function(t,i){console.log(i,this.jobIndex),this.jobIndex=i,0==i?(this.stations="",this.stations_pid=this.positionList[this.stationIndex].aid):(this.stations_pid="",this.stations=this.slist[i]),this.dataList(),this.$refs.shareType&&this.$refs.shareType.close()},close:function(){this.popOpen=!1},get_is_pay:function(){var t=this;this.$Request.get(this.$api.index.get_fuli_info,{}).then((function(i){1==i.code&&(t.voucher=i.data.voucher)}))},chooseAddress:function(){this.Modalname=null,0==this.provinceIndex&&(this.provinceIndex=1,this.cityList=this.proventList[1].child,this.areaIndex=null,this.cityIndex=null),this.$refs.addressPop&&this.$refs.addressPop.open(),this.$refs.shareType&&this.$refs.shareType.close()},getAddressList:function(){var t=this;this.$Request.post(this.$api.msg.getAddressList).then((function(i){"1"==i.code&&(t.proventList=i.data,t.proventList.unshift({shortname:"全国",id:""}),t.cityList=t.proventList[1].child)}))},chooseProvince:function(t,i){if(this.provinceIndex!=i){if(0==i)return this.area_id="",this.city_id="",this.address=t.shortname,this.dataList(),void(this.$refs.addressPop&&this.$refs.addressPop.close());this.provinceIndex=i,this.cityList=this.proventList[i].child,this.cityList[0].child&&this.cityList.unshift({shortname:"全"+this.proventList[i].shortname,id:this.proventList[i].id}),console.log(this.cityList,"======="),this.cityIndex=null,this.areaIndex=null}},chooseCity:function(t,i){this.cityIndex=i,this.city_id=t.id,this.area_id="",this.areaIndex=null,this.address=t.shortname,this.dataList(),this.$refs.addressPop&&this.$refs.addressPop.close()},chooseArea:function(t,i,e){this.area_id=t.id,this.city_id="",this.cityIndex=null,this.areaIndex=e+"-"+i,this.address=t.shortname,this.dataList(),this.$refs.addressPop&&this.$refs.addressPop.close()},toPage:function(i){var e=this;t.getStorageSync("userToken")?0!=this.isopen&&(this.isopen=!1,setTimeout((function(){e.isopen=!0}),1500),t.navigateTo({url:i})):this.$Common.toast("登录后才能操作哦")},check_sort:function(t,i){if(this.choose=!1,this.sort_type=t.id,this.sorttype=i+1,this.Modalname=null,3==i){if(0==this.stationIndex||1==this.stationIndex){this.stationIndex=1;var e=this.positionList[1].aid;this.getPosition(e)}this.$refs.shareType&&this.$refs.shareType.open()}else this.dataList()},get_plant_type:function(){var t=this;this.$Request.get(this.$api.index.get_fuli_info,{}).then((function(i){1==i.code&&(t.plant_type=i.data)}))},plant_filter:function(){var t=this;this.choose=!0,this.$refs.shareType.close(),setTimeout((function(){t.Modalname="plant_filter"}),300)},hideModal:function(){this.Modalname=null},select_fuli_type:function(t,i){var e=this;this.Modalname=null,this.welfare=t.aid,setTimeout((function(){e.dataList()}),300)},select_plant_type:function(t,i){var e=this;this.Modalname=null,this.fan_type=i,setTimeout((function(){e.dataList()}),300)},RadioChange:function(t){},tabSelect:function(i,e){var s=this;this.isloading||(t.showLoading({mask:!0}),this.isloading=!0,this.Modalname=null,setTimeout((function(){s.isloading=!1}),1e3),this.$refs.shareType&&this.$refs.shareType.close(),this.sort_type=1,this.activeTab=e,this.dataList())},navTo:function(i){var e=this;0!=this.isopen&&(this.isopen=!1,setTimeout((function(){e.isopen=!0}),1500),t.navigateTo({url:i}))},getDegree:function(){var t=this;this.$Request.post(this.$api.user.user_degree).then((function(i){"1"==i.code&&(i.data.unshift({id:0,label:"全部"}),t.degree_list=i.data)}))},get_job_list:function(){var i=this,e=this,s=t.getStorageSync("USERINFO").id||"",o="",a={};this.$Common.getLocation((function(r){if(i.longitude=r.longitude,i.latitude=r.latitude,0==i.activeTab){o=i.$api.index.get_job_list;var d="",c=i.experience[i.currentIndexExp].label;"全部"==i.experience[i.currentIndexExp].label&&(c=""),d=i.stations&&i.stations.aid?i.stations.aid:"",console.log(r.longitude,r.latitude),a={tab:e.sort_type,longitude:r.longitude||"",latitude:r.latitude||"",page:e.page,list_rows:50,station_type:4==e.type?1:3,fan_type:e.fan_type,welfare:e.welfare,name:i.keyword,is_recommend:0,city:"",city_id:i.area_id||"",pid:i.city_id||"",is_part_job_type:0,stations:d||"",stations_pid:i.stations_pid||"",education:i.currentIndexEdu,experience:c,user_id:s}}else if(1==i.activeTab){var h;o=i.$api.job.serviceBrokerList,h={tab:2,page:e.page,longitude:r.longitude,latitude:r.latitude},n(h,"page",e.page),n(h,"list_rows",50),n(h,"user_id",s),n(h,"name",i.keyword),n(h,"is_recommend",0),n(h,"city_id",i.area_id||""),n(h,"pid",i.city_id||""),a=h}i.$Request.post(o,a).then((function(s){t.hideLoading(),1==s.code?(1==e.page&&(e.jobList=[]),1==i.activeTab&&s.data.data.map((function(t){t.distance=parseFloat(t.distance).toFixed(2)})),s.data.data.map((function(t){t.isShow=!1})),e.jobList=e.jobList.concat(s.data.data),e.last_page=s.data.last_page,e.status=s.data.last_page<=e.page?"nomore":"loading",setTimeout((function(){e.$emit("getData")}),100),i.isloading=!1):(i.isloading=!1,t.showToast({title:s.msg,icon:"none"}))})).catch((function(t){console.log(t)}))}))}}};i.default=o}).call(this,e("543d")["default"])},d1b1:function(t,i,e){"use strict";var s=e("994f"),n=e.n(s);n.a}},[["7717","common/runtime","common/vendor"]]]);