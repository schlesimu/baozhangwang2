(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagescenter/index"],{1924:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("c0d5"));function a(t){return t&&t.__esModule?t:{default:t}}var i="0230358a3efdf708abe8387e25664353",d=16,s=null,r=null,c=null,u="/static/choose_address_marker_icon.png",l=null,g=null,p={data:function(){return{latitude:"",longitude:"",initLatitude:"",initLongitude:"",addressSearchResult:[],showCurrentAddress:!0,selectAddressIndex:0,returnName:"customChooseLocation",currentAddress:{name:"",longitude:"",latitude:"",p:"",c:"",a:""}}},onLoad:function(e){var n=this;e&&e.returnname&&(this.returnName=e.returnname),console.log(i);var a=this,g=getCurrentPages(),p=g[g.length-1],m=p.$getAppWebview();s=plus.maps,plus.geolocation,l=new o.default.AMapWX({key:i}),t.getLocation({type:"gcj02",success:function(t){e.latitude?(n.latitude=e.latitude,n.longitude=e.longitude):(n.latitude=t.latitude,n.longitude=t.longitude),n.initLatitude=t.latitude,n.initLongitude=t.longitude;var o=new s.Point(n.longitude,n.latitude);r=new s.Map("map",{center:o,zoom:d,top:0,left:0,width:"100%",height:"260px",position:"static"}),r.onclick=function(t){a.showCurrentAddress=!0,a.longitude=t.longitude,a.latitude=t.latitude,a.getCurrentAddress("".concat(t.longitude,",").concat(t.latitude)),r.removeOverlay(c),c=new plus.maps.Marker(new s.Point(a.longitude,a.latitude)),c.setIcon(u),r.addOverlay(c),r.centerAndZoom(new plus.maps.Point(a.longitude,a.latitude),d)},m.append(r),c=new plus.maps.Marker(o),c.setIcon(u),r.addOverlay(c),n.createCurrentPositionButton(),n.getCurrentAddress("".concat(n.longitude,",").concat(n.latitude))}})},onUnload:function(){this.destroyCurrentPositionButton()},onNavigationBarSearchInputConfirmed:function(t){},onNavigationBarSearchInputChanged:function(t){t.text&&""!=t.text.trim()&&(this.selectAddressIndex=-1,this.showCurrentAddress=!1,this.getInputTips(t.text.trim()))},onNavigationBarButtonTap:function(){},methods:{destroyCurrentPositionButton:function(){return null!==g&&(g.close(),g=null,!0)},createCurrentPositionButton:function(){var e=this,n=t.getSystemInfoSync();console.log(g),null===g?(g=new plus.nativeObj.View("currentPosition",{width:"40px",height:"40px",left:"20px",top:n.screenHeight-n.windowHeight+200+"px"},[{tag:"img",id:"img",src:"/static/choose_address_current_address.png",position:{top:0,left:0,width:"100%",height:"100%",right:0,bottom:0,margin:"auto"}}]),g.show(),g.addEventListener("click",(function(){e.showCurrentAddress=!0,e.longitude=e.initLongitude,e.latitude=e.initLatitude,e.getCurrentAddress("".concat(e.initLongitude,",").concat(e.initLatitude)),r.removeOverlay(c),c=new plus.maps.Marker(new s.Point(e.longitude,e.latitude)),c.setIcon(u),r.addOverlay(c),r.centerAndZoom(new plus.maps.Point(e.longitude,e.latitude),d)}))):g.show()},handleChooseAddressListItem:function(t){this.selectAddressIndex=t;var e="",n="";0==t?(e=this.currentAddress.longitude,n=this.currentAddress.latitude):(e=this.addressSearchResult[t-1].location.split(",")[0],n=this.addressSearchResult[t-1].location.split(",")[1]),r.removeOverlay(c),c=new plus.maps.Marker(new s.Point(e,n)),c.setIcon(u),r.addOverlay(c),r.centerAndZoom(new plus.maps.Point(e,n),d)},getCurrentAddress:function(t){var e=this;l.getRegeo({location:t,success:function(t){var n={};n.areap=t[0].regeocodeData.addressComponent.province,n.areac="string"==typeof t[0].regeocodeData.addressComponent.city?t[0].regeocodeData.addressComponent.city:n.areap,n.areax=t[0].regeocodeData.addressComponent.district,e.getInputTips(t[0].desc||t[0].name||"",t[0].latitude?"".concat(t[0].longitude,",").concat(t[0].latitude):""),console.log(t[0]),e.currentAddress.name=(t[0].name||"")+(t[0].desc||""),e.currentAddress.longitude=t[0].longitude,e.currentAddress.latitude=t[0].latitude,e.currentAddress.p=t[0].addressComponent?t[0].addressComponent.province:"",e.currentAddress.a=t[0].addressComponent?t[0].addressComponent.district:"",e.currentAddress.c=t[0].addressComponent?t[0].addressComponent.city:"",e.selectAddressIndex=0},fail:function(t){console.log(t)}})},getInputTips:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t),l.getInputtips({keywords:t,location:n,success:function(t){e.addressSearchResult=t&&t.tips?t.tips.filter((function(t){return"string"===typeof t.location})):[]}})},handleConfirmChooseAddress:function(){var e=this.currentAddress,n=this.addressSearchResult,o=this.selectAddressIndex;this.showCurrentAddress;console.log(e,n),0==o?(t.showLoading("选择中..."),l.getRegeo({location:"".concat(e.longitude,",").concat(e.latitude),success:function(n){t.hideLoading();var o={};o.areap=n[0].regeocodeData.addressComponent.province,o.areac="string"==typeof n[0].regeocodeData.addressComponent.city?n[0].regeocodeData.addressComponent.city:o.areap,o.areax=n[0].regeocodeData.addressComponent.district,t.$emit("chooseLocation",{name:e.name,address:e.name,latitude:e.latitude,longitude:e.longitude,citys:o,district:"".concat(e.p).concat(e.c).concat(e.a)}),t.navigateBack()},fail:function(n){t.hideLoading(),t.$emit("chooseLocation",{name:e.name,address:e.name,latitude:e.latitude,longitude:e.longitude,district:"".concat(e.p).concat(e.c).concat(e.a)}),t.navigateBack(),console.log(n)}})):o>0?(t.showLoading("选择中..."),l.getRegeo({location:"".concat(n[o-1].location),success:function(e){t.hideLoading();var a={};a.areap=e[0].regeocodeData.addressComponent.province,a.areac="string"==typeof e[0].regeocodeData.addressComponent.city?e[0].regeocodeData.addressComponent.city:a.areap,a.areax=e[0].regeocodeData.addressComponent.district,t.$emit("chooseLocation",{name:(n[o-1].district||"")+(n[o-1].address?n[o-1].address:n[o-1].name||""),address:n[o-1].name,latitude:n[o-1].location.split(",")[1],longitude:n[o-1].location.split(",")[0],citys:a,district:n[o-1].district}),t.navigateBack()},fail:function(e){t.hideLoading(),t.$emit("chooseLocation",{name:(n[o-1].district||"")+(n[o-1].address?n[o-1].address:n[o-1].name||""),address:n[o-1].name,latitude:n[o-1].location.split(",")[1],longitude:n[o-1].location.split(",")[0],district:n[o-1].district}),t.navigateBack()}})):plus.nativeUI.toast("请先选择地址")}}};e.default=p}).call(this,n("543d")["default"])},"240a":function(t,e,n){"use strict";n.r(e);var o=n("bc49"),a=n("3e69");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("d72a");var d,s=n("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],d);e["default"]=r.exports},"3e69":function(t,e,n){"use strict";n.r(e);var o=n("1924"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"4a48":function(t,e,n){},b2d3:function(t,e,n){"use strict";(function(t){n("652a");o(n("66fd"));var e=o(n("240a"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},bc49:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement;t._self._c},i=[]},d72a:function(t,e,n){"use strict";var o=n("4a48"),a=n.n(o);a.a}},[["b2d3","common/runtime","common/vendor"]]]);