(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagescenter/userypz/edit_part"],{"0628":function(t,i,e){"use strict";e.r(i);var o=e("67e5"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},"24ea":function(t,i,e){"use strict";e.r(i);var o=e("cb9c"),n=e("0628");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("8d3a");var a,r=e("f0c5"),d=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);i["default"]=d.exports},"67e5":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e("6c72"),n=e("6cf1"),s=function(){e.e("components/ben-upload/ben-upload").then(function(){return resolve(e("df45"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("components/w-picker/w-picker").then(function(){return resolve(e("55d6"))}.bind(null,e)).catch(e.oe)},r=(e("5745"),{components:{benUpload:s,wPicker:a},data:function(){return{experience:o.experience,act_experience:"",price:!1,experi:!1,salaryDescription:"",requirements:"",jobDescription:"",uShow:!1,enterpriseIntroduction:"",education:"",zhaopin_number:"",defaultpic:!1,agechoose:!1,age_list:o.age_list,age2_list:JSON.parse(JSON.stringify(n.age2_list)),age_inx:[0,0],age_act:"",zhiwei:"",degree_list:[],degree_act:"",price_list:["暂无相关数据"],busort:"",min_salary:"",max_salary:"",price_butie:"",service_time:"",content:"",fabu_money:"",company_address:"",sex:"",sex_id:"",videoImg:[],video:"",imgList:[],imgpath:[],max:5,check:"",phone:"",title:"",isopen:!0,sex_sort:[{id:0,label:"不限"},{id:1,label:"男"},{id:2,label:"女"}],zhiwei_list:[{id:2,label:"临时工"},{id:1,label:"网络兼职"}],price_sort:[],city:"",lon:"",lat:"",open:!1,part_job_info:"",aid:"",other_user_id:"",user_id:"",voucher:""}},onLoad:function(i){var e=this;this.getpart_type(),setTimeout((function(){e.defaultpic=!0}),300),this.aid=i.aid,this.other_user_id=i.other_user_id,this.user_id=t.getStorageSync("USERINFO").id,this.getPay_price(),t.$on("video",(function(t){e.video=t.msg,""!=t.msg&&(e.videoImg=t.msg+"?x-oss-process=video/snapshot,t_10000,f_jpg,w_800,h_600,m_fast",e.open=!0)})),this.get_plant_type()},computed:{totalMoney:function(){return(this.zhaopin_number*(100*this.price_butie)/100+this.zhaopin_number*(100*this.price_butie)*this.part_job_info.part_job_percentage/1e4).toFixed(2)}},onUnload:function(){t.$off("video"),t.$emit("updateOrderDetail",{})},methods:{bannerLive:function(t){this.imgList=t,""!=t&&(this.uShow=!0)},get_plant_type:function(){var t=this;this.$Request.get(this.$api.index.get_fuli_info).then((function(i){1==i.code&&(t.voucher=i.data.voucher)}))},get_detail:function(){var i=this;t.showLoading({}),this.$Request.post(this.$api.operation.part_job_detail,{aid:this.aid,user_id:this.user_id,type:4}).then((function(e){1==e.code?(t.hideLoading(),i.plant_detail=e.data,i.zhiwei_id=e.data.type,2==e.data.type?i.zhiwei="临时工":1==e.data.type&&(i.zhiwei="网络兼职"),i.busort_id=e.data.settlement_method,i.busort_id&&i.price_sort&&(i.busort=i.price_sort[i.busort_id-1].label),i.service_time=e.data.service_time,i.price_butie=e.data.commission,i.zhaopin_number=e.data.num,i.min_salary=e.data.age_arr[0],i.max_salary=e.data.age_arr[1],i.sex=i.sex_sort[e.data.sex].label,i.sex_id=e.data.sex,i.phone=e.data.phone,""!=e.data.video&&(i.video=e.data.video[0].video,i.videoImg=e.data.video[0].url),i.imgList=e.data.img_url,i.imgList.map((function(t){t.loading="100%"})),i.uShow=!0,i.title=e.data.title,i.lon=e.data.lon,i.lat=e.data.lat,i.company_address=e.data.address||"",0==e.data.address&&(i.company_address=""),i.enterpriseIntroduction=e.data.remarks||"",i.content=e.data.content||""):t.showToast({title:e.msg,icon:"none"})}))},getPay_price:function(){var i=this;this.$Request.post(this.$api.index.get_fuli_info).then((function(e){t.hideLoading(),"1"==e.code&&(i.part_job_info=e.data)})).catch((function(i){t.hideLoading()}))},ChooseImage:function(){var i=this;0!=this.isopen&&(this.isopen=!1,setTimeout((function(){i.isopen=!0}),1500),t.navigateTo({url:"../zhaopinzhe/upload_video"}))},DelImg:function(){var i=this;t.showModal({content:"确定要删除视频吗？",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&(i.videoImg="",i.open=!1)}})},getpart_type:function(){var t=this;this.$Request.post(this.$api.company.getpart_type).then((function(i){"1"==i.code&&(t.price_sort=i.data,t.get_detail())}))},playVideo:function(){t.navigateTo({url:"play_video?url="+this.video})},leaveCon1:function(){return this.min_salary?/^[1-9]\d*$/.test(this.min_salary)?void 0:(this.$Common.toast("请输入不以0开头并且为整数的起始年龄"),this.min_salary="",!1):(this.$Common.toast("请输入起始年龄"),!1)},leaveCon2:function(){return this.min_salary?/^[1-9]\d*$/.test(this.max_salary)?void((Number(this.max_salary)<Number(this.min_salary)||this.max_salary.length>=3)&&(this.$Common.toast("年龄设置不合理"),this.max_salary="")):(this.$Common.toast("请输入不以0开头并且为整数的最大年龄"),this.max_salary="",!1):(this.$Common.toast("请输入起始年龄"),!1)},leavePhone:function(){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phone))return this.$Common.toast("请输入正确的联系人电话"),!1},leavePerson:function(){if(!/^[1-9]\d*$/.test(this.zhaopin_number))return this.$Common.toast("请输入不以0开头并且为整数的招聘人数"),this.zhaopin_number="",!1},getLocation:function(){if("网络兼职"!=this.zhiwei){var i=this;t.chooseLocation({success:function(t){i.company_address=t.address,i.city=t.address,i.lon=t.longitude,i.lat=t.latitude}})}},gopay:function(){var i=this;if(!this.zhiwei)return this.$Common.toast("请选择职位类型"),!1;if(!this.busort)return this.$Common.toast("请选择结算方式"),!1;if(!this.service_time)return this.$Common.toast("请输入工作时长"),!1;if(!this.price_butie)return this.$Common.toast("请输入结算佣金"),!1;if(!this.zhaopin_number)return this.$Common.toast("请输入招聘人数"),!1;if(this.zhaopin_number%1!=0)return this.$Common.toast("招聘人数必须是整数"),!1;if(!this.min_salary&&!this.max_salary)return this.$Common.toast("请输入年龄要求"),!1;if(Number(this.max_salary)<Number(this.min_salary)||this.max_salary.length>=3||Number(this.max_salary)<16)return this.$Common.toast("年龄要求不合理"),!1;if(!this.phone)return this.$Common.toast("请输入联系方式"),!1;if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phone))return this.$Common.toast("请输入正确的联系人电话"),!1;if(2==this.zhiwei_id&&""==this.company_address)return this.$Common.toast("请选择工作地址"),!1;if(""==this.imgList)return this.$Common.toast("请选择图片"),!1;if(!this.title)return this.$Common.toast("请输入标题"),!1;if(!this.content)return this.$Common.toast("请选择工作内容"),!1;var e=this.min_salary+"-"+this.max_salary,o=[];this.imgList&&this.imgList.map((function(t){o.push(t.aid)}));var n={aid:this.aid,user_id:this.other_user_id,type:this.zhiwei_id,title:this.title,age:e,sex:this.sex_id,phone:this.phone,address:this.company_address,video:this.video,imgUrl:o.join(","),num:this.zhaopin_number,settlement_method:this.busort_id,content:this.content,service_time:this.service_time,commission:this.price_butie,commission_money:this.totalMoney,remarks:this.enterpriseIntroduction,lon:this.lon,lat:this.lat,is_pay:this.plant_detail.is_pay};0!=this.isopen&&(this.isopen=!1,setTimeout((function(){i.isopen=!0}),1500),this.$Request.post(this.$api.company.edit_part,n).then((function(e){if(1==e.code){if(1==i.voucher)return t.$emit("updateOrderDetail",{}),void t.navigateBack({});1==e.data.is_pay?(t.$emit("updateOrderDetail",{}),t.navigateBack({})):t.redirectTo({url:"../zhaopinzhe/fabu?title=fabu&order_sn="+e.data.order_sn+"&price="+e.data.payable_money+"&commission="+e.data.commisson})}else i.$Common.toast(e.msg)})))},gorule:function(){var i=this;0!=this.isopen&&(this.isopen=!1,setTimeout((function(){i.isopen=!0}),1500),t.navigateTo({url:"../../pagescommon/post_recruitment"}))},toggleTab:function(t){console.log(t),this.$data[t]=!0,this.hidden=!1},degreeConfirm:function(t){console.log("选择学历",t);var i=t.detail.value;this.degree_act=this.degree_list[i].label,console.log(this.degree_list[i])},zhiweiConfirm:function(t){console.log("选择职位",t);var i=t.detail.value;this.zhiwei=this.zhiwei_list[i].label,this.zhiwei_id=this.zhiwei_list[i].id,console.log(this.zhiwei_id,"0000000000000")},sortConfirm:function(t){console.log("选择结算方式",t);var i=t.detail.value;this.busort=this.price_sort[i].label,this.busort_id=this.price_sort[i].id},sexConfirm:function(t){console.log("选择性别",t);var i=t.detail.value;this.sex=this.sex_sort[i].label,this.sex_id=this.sex_sort[i].id}}});i.default=r}).call(this,e("543d")["default"])},"8d3a":function(t,i,e){"use strict";var o=e("d522"),n=e.n(o);n.a},b1c4:function(t,i,e){"use strict";(function(t){e("652a");o(e("66fd"));var i=o(e("24ea"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])},cb9c:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var o={benUpload:function(){return e.e("components/ben-upload/ben-upload").then(e.bind(null,"df45"))}},n=function(){var t=this,i=t.$createElement;t._self._c},s=[]},d522:function(t,i,e){}},[["b1c4","common/runtime","common/vendor"]]]);