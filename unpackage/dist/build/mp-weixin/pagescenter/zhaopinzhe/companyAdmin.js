(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagescenter/zhaopinzhe/companyAdmin"],{6422:function(n,t,o){"use strict";o.r(t);var e=o("d2b7"),i=o.n(e);for(var a in e)"default"!==a&&function(n){o.d(t,n,(function(){return e[n]}))}(a);t["default"]=i.a},"805d":function(n,t,o){"use strict";var e=o("fba1"),i=o.n(e);i.a},8429:function(n,t,o){"use strict";o.r(t);var e=o("e1ae"),i=o("6422");for(var a in i)"default"!==a&&function(n){o.d(t,n,(function(){return i[n]}))}(a);o("805d");var s,c=o("f0c5"),u=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],s);t["default"]=u.exports},d2a9:function(n,t,o){"use strict";(function(n){o("652a");e(o("66fd"));var t=e(o("8429"));function e(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=o,n(t.default)}).call(this,o("543d")["createPage"])},d2b7:function(n,t,o){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o("6c72");var e=function(){o.e("components/w-picker/w-picker").then(function(){return resolve(o("55d6"))}.bind(null,o)).catch(o.oe)},i=function(){o.e("components/ben-upload/ben-upload").then(function(){return resolve(o("df45"))}.bind(null,o)).catch(o.oe)},a=o("5745"),s={components:{wPicker:e,benUpload:i},data:function(){return{user_type:2,company_name:"",company_address:"",IMG_URL:this.IMG_URL,content:"",imgOne:{},videoImg:"",uShow:!1,video:"",defaultpic:!1,imgList:[],lon:"",lat:""}},onLoad:function(t){var o=this;n.showLoading({}),this.getinfo(),setTimeout((function(){o.defaultpic=!0}),500),n.$on("video",(function(n){o.video=n.msg,""!=n.msg&&(o.videoImg=n.msg+"?x-oss-process=video/snapshot,t_10000,f_jpg,w_800,h_600,m_fast")})),n.$on("upHeadImg",(function(n){o.imgOne={url:n.avatar,aid:n.path}}))},onUnload:function(){n.$off("changeFuli"),n.$off("video")},onShow:function(){},methods:{upload:function(){n.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var o=t.tempFilePaths[0];n.navigateTo({url:"/pagescommon/upload?src="+o})}})},bannerLive:function(t){this.imgList=t,""!=t&&(this.uShow=!0,n.hideLoading())},playVideo:function(){n.navigateTo({url:"play_video?url="+this.video})},DelImg:function(){var t=this;n.showModal({content:"确定要删除吗？",cancelText:"取消",confirmText:"确定",success:function(n){n.confirm&&(t.videoImg="",t.video="",t.open=!1)}})},ViewImage:function(t){n.previewImage({urls:t,current:t})},DelImgOne:function(){var t=this;n.showModal({content:"确定要删除吗？",cancelText:"取消",confirmText:"确定",success:function(n){n.confirm&&(t.imgOne="")}})},ChooseImage:function(){var t=this;0!=this.isopen&&(this.isopen=!1,setTimeout((function(){t.isopen=!0}),1500),n.navigateTo({url:"upload_video"}))},getinfo:function(){var t=this;n.getStorageSync("USERINFO").id;this.$Request.post(this.$api.company.companyInfo,{}).then((function(o){n.hideLoading(),1==o.code?(t.company_name=o.data.info.company_name,t.company_address=o.data.info.company_address,t.content=o.data.info.content,t.imgList=o.data.info.ad_images,t.imgList.map((function(n){n.loading="100%"})),t.imgOne=o.data.info.image,t.uShow=!0,t.defaultpic=!0,t.videoImg=o.data.info.video_url,t.video=o.data.info.video,t.lon=o.data.info.lon,t.lat=o.data.info.lat):t.$Common.toast(o.msg)}))},toggleTab:function(n){this.$data[n]=!0},getLocation:function(){var t=this;n.chooseLocation({success:function(n){t.company_address=n.address,t.lon=n.longitude,t.lat=n.latitude}})},formSubmit:function(t){var o=this,e=[{name:"company_name",rule:["required"],msg:["请输入公司名称"]}];if(this.company_address||this.$Common.toast("请选择公司地址"),this.content&&this.content.length>1500)return this.$Common.toast("公司简介限制1500字"),!1;if(!this.content)return this.$Common.toast("请填写公司简介"),!1;var i=[];this.imgList&&this.imgList.map((function(n){i.push(n.aid)}));var s=t.detail.value;s.company_address=this.company_address,s.image=this.imgOne&&this.imgOne.aid,s.ad_images=i.join(","),s.content=this.content,s.lon=this.lon,s.lat=this.lat,s.video=this.video||0;var c=a.validation(s,e);if(console.log(c),c)return this.$Common.toast(c),!1;this.$Request.post(this.$api.user.editcompanyinfo,s).then((function(t){o.$Common.toast(t.msg),1==t.code&&(n.$emit("companyInfo",{}),n.setStorageSync("companyInfo",{msg:"公司信息已完善"}),setTimeout((function(){n.navigateBack({})}),800))}))}}};t.default=s}).call(this,o("543d")["default"])},e1ae:function(n,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return e}));var e={benUpload:function(){return o.e("components/ben-upload/ben-upload").then(o.bind(null,"df45"))}},i=function(){var n=this,t=n.$createElement;n._self._c},a=[]},fba1:function(n,t,o){}},[["d2a9","common/runtime","common/vendor"]]]);