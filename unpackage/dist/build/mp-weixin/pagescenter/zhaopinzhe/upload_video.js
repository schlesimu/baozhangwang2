(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagescenter/zhaopinzhe/upload_video"],{"0265":function(e,t,n){},"2b09":function(e,t,n){"use strict";n.r(t);var o=n("568e"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},"568e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("a34a")),i=r(n("5653")),a=r(n("2d7f"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,o,i,a,r){try{var u=e[a](r),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(e){u(a,o,i,r,s,"next",e)}function s(e){u(a,o,i,r,s,"throw",e)}r(void 0)}))}}var c={props:{authId:String,videoUrl:String,deleteFlag:Boolean},data:function(){return{progress:0,IMG_URL:this.IMG_URL,imgData:{visible:!1,actions:this.imgActions},video_url:""}},methods:{DelImg:function(){this.progress=0,this.video_url=""},get_sign:function(e,t,n){var o=this;return new Promise((function(i,a){o.$Request.post(o.$api.common.ossVideo,{filemd5:e,filesize:t,filename:n}).then((function(e){200==e.code&&i(e.data.aliyunData)}))}))},ChooseVideo:function(){var t=this;return s(o.default.mark((function n(){var r,u,s,c,l,f;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.default.getVideo();case 2:return r=n.sent,n.next=5,i.default.get_STS();case 5:return u=n.sent,s=i.default.getFileName(r),c=(0,a.default)(s),n.next=10,t.get_sign(c,u.filesize,s);case 10:l=n.sent,e.showLoading({title:"上传中...",mask:!0}),f=e.uploadFile({url:u.host,filePath:r,fileType:"video",name:"file",formData:{key:l.key,policy:l.policy,OSSAccessKeyId:l.OSSAccessKeyId,success_action_status:"200",signature:l.signature},success:function(n){200==n.statusCode&&(e.showToast({title:"上传成功",icon:"none",duration:1e3}),t.video_url=u.host+"/"+l.key)},fail:function(t){e.showModal({content:t.errMsg,showCancel:!1})},complete:function(){e.hideLoading()}}),f.onProgressUpdate((function(e){t.progress=e.progress}));case 14:case"end":return n.stop()}}),n)})))()},uoload_video:function(){e.$emit("video",{msg:this.video_url}),this.video_url?e.navigateBack({}):this.$Common.toast("请选择视频")}}};t.default=c}).call(this,n("543d")["default"])},"78b4":function(e,t,n){"use strict";(function(e){n("652a");o(n("66fd"));var t=o(n("f262"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},a50e:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},a=[]},d7a6:function(e,t,n){"use strict";var o=n("0265"),i=n.n(o);i.a},f262:function(e,t,n){"use strict";n.r(t);var o=n("a50e"),i=n("2b09");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("d7a6");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=s.exports}},[["78b4","common/runtime","common/vendor"]]]);