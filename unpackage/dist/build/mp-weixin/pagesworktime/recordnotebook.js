(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesworktime/recordnotebook"],{"1c9b":function(t,i,o){"use strict";o.d(i,"b",(function(){return e})),o.d(i,"c",(function(){return a})),o.d(i,"a",(function(){return n}));var n={benUpload:function(){return o.e("components/ben-upload/ben-upload").then(o.bind(null,"df45"))},benVideoUpload:function(){return o.e("components/ben-video-upload/ben-video-upload").then(o.bind(null,"a16f"))},uniPopup:function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"b7f7"))}},e=function(){var t=this,i=t.$createElement;t._self._c},a=[]},"857a":function(t,i,o){"use strict";o.r(i);var n=o("eb1c"),e=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(i,t,(function(){return n[t]}))}(a);i["default"]=e.a},b148:function(t,i,o){"use strict";o.r(i);var n=o("1c9b"),e=o("857a");for(var a in e)"default"!==a&&function(t){o.d(i,t,(function(){return e[t]}))}(a);var u,d=o("f0c5"),s=Object(d["a"])(e["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);i["default"]=s.exports},cf34:function(t,i,o){"use strict";(function(t){o("652a");n(o("66fd"));var i=n(o("b148"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("543d")["createPage"])},eb1c:function(t,i,o){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o("5745"),e={data:function(){return{title:"",description:"",address:"请选择您位置",infoImgs:[],infoVideos:[],defaultpic:!1,defaultVideo:!1,uShow:!1,vShow:!1,paddingBottom:"400upx",city_id:null,lon:null,lat:null,category_id:12}},onLoad:function(i){console.error(i);var o=this;if(t.setNavigationBarTitle({title:"记事本"}),i.id){this.infoId=i.id;var n=this.$api.user.user_inform_get+"?id="+i.id;this.$Request.get(n).then((function(t){console.log(t),o.defaultpic=!0,o.defaultVideo=!0,1==t.code&&(o.category_id=t.data.category_id,o.title=t.data.title,o.description=t.data.body,o.city_id=t.data.city_id,o.address=t.data.address,o.lon=t.data.lon,o.lat=t.data.lat,o.infoImgs=t.data.info_imgs,o.infoVideos=t.data.info_videos,o.infoImgs&&o.infoImgs.length>0&&(o.uShow=!0),o.infoVideos&&o.infoVideos.length>0&&(o.vShow=!0))}))}else this.defaultpic=!0,this.defaultVideo=!0},onShow:function(){this.defaultpic=!0,this.defaultVideo=!0},methods:{formSubmit:function(i){var o=this,e=[{name:"title",rule:["required","minLength:2","maxLength:30"],msg:["请输入标题","标题必须2个或以上字符","标题不能超过30个字符"]},{name:"description",rule:["required"],msg:["请输入内容"]}],a=i.detail.value;this.infoId&&(a.id=this.infoId),a.category_id=this.category_id;var u=n.validation(a,e);if(u)return this.$Common.toast(u),!1;var d=[],s=[];this.infoImgs&&this.infoImgs.map((function(t){d.push(t.aid)})),this.infoVideos&&this.infoVideos.map((function(t){s.push(t.aid)})),console.log(this.infoVideos),a.img_url=d.join(","),a.video_url=s.join(","),a.source=2,a.lon=this.lon,a.lat=this.lat;var l=this.$api.user.user_info_submit;this.$Request.post(l,a).then((function(i){o.$Common.toast(i.msg),1==i.code&&setTimeout((function(){t.navigateBack(),t.$emit("reback","recordnotebook")}),1e3)}))},checktitle:function(t){t.length>30&&this.$Common.toast("标题不能超过30个字符")},titleblur:function(t){t.length<2&&this.$Common.toast("内容不能少于2个字符")},infoImgLive:function(t){this.defaultpic=!0,console.log(t),this.infoImgs=t,""!=t&&(this.uShow=!0)},infoVideoLive:function(t){this.defaultVideo=!0,console.log(t),this.infoVideos=t,""!=t&&(this.vShow=!0)},getCityId:function(t){var i=this,o=[t.longitude,t.latitude];this.$Request.post(this.$api.msg.cityPosition,{user_id:this.user_id||"",cid:"",lat:o}).then((function(t){1==t.code?i.city_id=t.data.id:i.$Common.toast("无法定位，请打开手机定位！！")})).catch((function(t){i.$Common.toast("无法定位，请打开手机定位！！")}))},wechatLocation:function(){var t=this;this.$util.chooseLocation(this,(function(i){t.lon=i.longitude,t.lat=i.latitude,t.address=i.address,t.getCityId({longitude:i.longitude,latitude:i.latitude})}))}}};i.default=e}).call(this,o("543d")["default"])}},[["cf34","common/runtime","common/vendor"]]]);