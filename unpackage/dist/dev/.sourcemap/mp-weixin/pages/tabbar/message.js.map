{"version":3,"sources":["webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pages/tabbar/message.vue?dd44","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pages/tabbar/message.vue?57ef","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pages/tabbar/message.vue?a35f","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pages/tabbar/message.vue?0987","uni-app:///pages/tabbar/message.vue","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pages/tabbar/message.vue?e3d2","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pages/tabbar/message.vue?8d2c"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACc;;;AAGpE;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAmuB,CAAgB,wvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgFvvB,2H;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uB,eACA,EACA,iCADA,EACA;AACA,MAFA,kBAEA,CACA,SACA,yBADA,EAEA,mBAFA,EAGA,UAHA,EAIA,cAJA,EAKA,QALA,EAKA;AACA,kBANA,EAOA,YAPA,EAOA;AACA,qBARA,EASA,SATA,EASA;AACA,uBAVA,EAUA;AACA,2BAXA,EAYA,oBAZA,EAYA;AACA,oBAbA,EAaA;AACA,cAdA,EAcA;AACA,oBACA,SADA,EACA;AACA,mBAFA,CAEA;AAFA,OAfA,EAmBA;AACA,kBACA,eADA,EAEA,SAFA,EAEA;AACA,mBAHA,EAGA;AACA,gBACA,MADA,EACA;AACA,kBAFA,CAEA;AAFA,SAJA,EAQA,aARA,EAQA;AACA,iBACA,OADA,EAEA,QAFA,EATA,EApBA,GAmCA,CAtCA,EAuCA,OAvCA,qBAuCA,kBACA,2CACA,qCACA,mCACA,sBACA,iDACA,CAHA,EAIA,2BACA,qBACA,4BACA,0BACA,+CACA,CALA,MAKA,CACA,eACA,CACA,kCACA,wBACA,iDACA,CACA,CAJA,EAKA,iDACA,yCACA,sDACA,CACA,CAJA,EAKA,qCACA,iDACA,CAFA,EAGA,+BACA,sDACA,CAFA,EAGA;AACA,uDACA,CAFA,EAGA,CAzEA,EA0EA,OA1EA,qBA0EA,mBACA,qCACA,mDACA,CAFA,EAGA,CA9EA,EA+EA,SA/EA,uBA+EA,CACA;AACA,sBACA,mBACA,iCACA,wBACA,CArFA,EAsFA,WACA,OADA,mBACA,GADA,EACA,CACA,aACA,UACA,+BACA,oCACA,CACA,CACA,WACA,CATA,EAtFA;;AAiGA;AACA,SADA,iBACA,IADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA,0DADA;;;AAIA,SAZA,EAYA,GAZA;AAaA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA;AACA;AACA,qBADA;;AAGA;AACA;AACA,gBADA;AAEA,oBAFA;AAGA,uCAHA;AAIA,2BAJA;AAKA,4BALA;AAMA,oBANA;AAOA,sBARA;AASA,8BATA;;AAWA,KAjDA;AAkDA,cAlDA,sBAkDA,QAlDA,EAkDA;AACA;AACA;AACA,8BAHA,CAGA;AACA,oCAJA,CAIA;AACA;AACA;AACA;AACA,YADA,CACA,yBADA,EACA;AACA,iBADA;AAEA,oBAFA;AAGA,uBAHA,EADA;;AAMA,YANA,CAMA;AACA;AACA;AACA;AACA,0CAHA,CAGA;AACA,sDAJA,CAIA;AACA;AACA,WANA,MAMA;AACA;AACA;AACA,SAhBA;AAiBA,aAjBA,CAiBA;AACA;AACA;AACA,SApBA;AAqBA,OAtBA,MAsBA;AACA;AACA;AACA,KAjFA;;AAmFA,iBAnFA,2BAmFA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA;AAOA,KA5FA;AA6FA,cA7FA,sBA6FA,EA7FA,EA6FA;AACA;AACA,6BADA;AAEA;AACA;AACA;AACA;AACA,gBADA,CACA,2BADA,EACA;AACA,qBADA,EADA;;AAIA,gBAJA,CAIA;AACA;AACA;AACA;AACA,eAHA,MAGA;AACA;AACA;AACA,aAXA;AAYA;AACA,SAlBA;;;AAqBA,KAnHA;AAoHA;AACA,kBArHA,0BAqHA,CArHA,EAqHA;AACA;AACA,KAvHA;AAwHA;AACA,iBAzHA,yBAyHA,CAzHA,EAyHA;AACA;AACA,KA3HA;;AA6HA;AACA,gBA9HA,wBA8HA,CA9HA,EA8HA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,SAFA,EAEA,GAFA;AAGA;AACA;AACA,KAvIA;;AAyIA;AACA,SA1IA,mBA0IA;AACA;AACA;AACA;;;;;;;;AAQA;AACA,0DADA;;;AAIA,SAZA,EAYA,GAZA;AAaA;AACA,OAhBA,MAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,IAFA;AAGA;AACA;AACA,uBADA;;AAGA;AACA,uCADA;;AAGA;AACA,KA3KA,EAjGA,E;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAs3C,CAAgB,m1CAAG,EAAC,C;;;;;;;;;;;ACA14C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabbar/message.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./message.vue?vue&type=template&id=daa705e2&\"\nvar renderjs\nimport script from \"./message.vue?vue&type=script&lang=js&\"\nexport * from \"./message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./message.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabbar/message.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=template&id=daa705e2&\"","var components\ntry {\n  components = {\n    mescrollUni: function() {\n      return import(\n        /* webpackChunkName: \"components/mescroll-uni/mescroll-uni\" */ \"@/components/mescroll-uni/mescroll-uni.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- #ifdef MP-WEIXIN -->\r\n\t<!-- <scroll-view scroll-y style=\"padding-bottom: 10rpx;\" :style=\"[{ height: 'calc(100vh-100upx)' }]\"> -->\r\n\t<!-- #endif -->\r\n\t<view class=\"bg-white\" style=\"height: 100%;\">\r\n\t\t<cu-custom bgColor=\"text-black bg-white\">\r\n\t\t\t<block slot=\"content\"><text class=\"text-bold\">消息</text></block>\r\n\t\t</cu-custom>\r\n\r\n\t\t<mescroll-uni ref=\"mescrollRef\" @init=\"mescrollInit\" :top=\"CustomBar * 2\" @down=\"downCallback\" @up=\"upCallback\" :down=\"downOption\"\r\n\t\t :up=\"upOption\">\r\n\t\t\t<view class=\"cu-list menu pb50 bg-white\">\r\n\t\t\t\t<view class=\" plr10 ptb15\">\r\n\t\t\t\t\t<view class=\"cu-item arrow\" @tap=\"gomsg\">\r\n\t\t\t\t\t\t<view class=\" flex\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<view class=\"bg-gray margin-right-sm\" style=\"width: 96upx;height:96upx;border-radius: 50%;position: relative;flex-shrink: 0;\">\r\n\t\t\t\t\t\t\t\t<image :src=\"IMG_URL + 'static/miniwechat/xiaoxi.png'\" style=\"width: 100%;height: 100%;\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"msgnum\" v-if=\"systm!=''&&systm.is_read == 0\"></text>\r\n\t\t\t\t\t\t\t\t<!-- <text class=\"masgnum\" v-else>{{systm.is_read}}</text> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex column justify-between\" style=\"flex:1;\">\r\n\t\t\t\t\t\t\t\t<view class=\"flex justify-between \">\r\n\t\t\t\t\t\t\t\t\t<view class=\"\"><text class=\"text-bold margin-right-xs text-df\">系统通知</text></view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"text-sm\" style=\"color: #666;\">{{ systm.create_time }}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"flex justify-between align-center \" style=\"color: #666;\"> -->\r\n\t\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-sm text-gray text_line2\" style=\"word-wrap:break-word;word-break:break-all;\r\n\">{{ systm.title || '暂无新消息' }}</text>\r\n\t\t\t\t\t\t\t\t\t<!-- </view> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 用户列表 -->\r\n\t\t\t\t<view class=\" cu-item\" v-for=\"(item, index) in list\" :key=\"index\" @tap=\"navTo(item)\" @touchstart=\"ListTouchStart\"\r\n\t\t\t\t @touchmove=\"ListTouchMove\" @touchend=\"ListTouchEnd\" :class=\"modalName == 'move-box-' + index ? 'move-cur' : ''\"\r\n\t\t\t\t :data-target=\"'move-box-' + index\">\r\n\t\t\t\t\t<view class=\" flex content\">\r\n\t\t\t\t\t\t<view class=\"bg-gray margin-right-sm\" style=\"width: 96upx;height:96upx;border-radius: 50%;position: relative;flex-shrink: 0;\">\r\n\t\t\t\t\t\t\t<image :src=\"item.picture ? item.picture :'/static/images/logo.png'\" style=\"width: 100%;height: 100%;border-radius: 50%\"\r\n\t\t\t\t\t\t\t mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t<text class=\"masgnum\" v-if=\"item.count && item.count > 0\">{{ item.count }}</text>\r\n\t\t\t\t\t\t\t<!-- <text class=\"masgnum\" >{{ item.count }}1</text> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"\" style=\"flex:1;\">\r\n\t\t\t\t\t\t\t<view class=\"flex justify-between \">\r\n\t\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-bold margin-right-xs\">{{ item.name || '昵称' }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"text-sm\" style=\"color: #666;\">{{ item.create_time }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex justify-between align-center \" style=\"color: #666;\">\r\n\t\t\t\t\t\t\t\t<view class=\"overflow-two\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"text-sm text-gray\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-df\" v-if=\"item.data.msg_type == 'img'\">[图片]</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-df\" v-if=\"item.data.msg_type == 'voice'\">语音</text>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"text-df\" v-if=\"item.data.msg_type != 'voice'&&item.data.msg_type != 'img'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"item.data.content\"></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-df\" v-show=\"!item.data.content\">暂无新消息</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"move\" style=\"width: 140rpx;\">\r\n\t\t\t\t\t\t<view class=\"bg-red\" @click.stop=\"delete_msg(item.friend_id)\">删除</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</mescroll-uni>\r\n\t</view>\r\n\t<!-- #ifdef MP-WEIXIN -->\r\n\t<!-- </scroll-view> -->\r\n\t<!-- #endif -->\r\n</template>\r\n\r\n<script>\r\n\timport MescrollMixin from '@/components/mescroll-uni/mescroll-mixins.js';\r\n\tvar socketOpen = false;\r\n\texport default {\r\n\t\tmixins: [MescrollMixin], // 使用mixin\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tCustomBar: this.CustomBar,\r\n\t\t\t\tPageCur: 'homepage',\r\n\t\t\t\tcardCur: 0,\r\n\t\t\t\tswiperList: [],\r\n\t\t\t\tuser: [], //用户信息\r\n\t\t\t\tuser_type: 1,\r\n\t\t\t\tisopen: true, //跳转页面\r\n\t\t\t\tmodalName: null,\r\n\t\t\t\tsystm: [], //系统信息\r\n\t\t\t\tconversations: [], //会话列表\r\n\t\t\t\tIMG_URL:this.IMG_URL,\r\n\t\t\t\tsyncConversation: [], //离线消息\r\n\t\t\t\tuser_token: {}, //用户缓存信息\r\n\t\t\t\tlist: [], //用户聊天列表\r\n\t\t\t\tdownOption: {\r\n\t\t\t\t\tuse: true, // 是否启用下拉刷新; 默认true\r\n\t\t\t\t\tauto: false, // 是否在初始化完毕之后自动执行下拉刷新的回调; 默认false\r\n\t\t\t\t},\r\n\t\t\t\t// 上拉加载的常用配置\r\n\t\t\t\tupOption: {\r\n\t\t\t\t\tisBounce: false,\r\n\t\t\t\t\tuse: true, // 是否启用上拉加载; 默认true\r\n\t\t\t\t\tauto: false, // 是否在初始化完毕之后自动执行上拉加载的回调; 默认true\r\n\t\t\t\t\tpage: {\r\n\t\t\t\t\t\tnum: 0, // 当前页码,默认0,回调之前会加1,即callback(page)会从1开始\r\n\t\t\t\t\t\tsize: 10 // 每页数据的数量,默认10\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnoMoreSize: 5, // 配置列表的总数量要大于等于5条才显示'-- END --'的提示\r\n\t\t\t\t\tempty: {\r\n\t\t\t\t\t\ttip: '',\r\n\t\t\t\t\t\ticon: '',\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.user = uni.getStorageSync('USERINFO');\r\n\t\t\tthis.user_type = this.user.user_type;\r\n\t\t\tuni.$on('number', data => {\r\n\t\t\t\tthis.getSystemnews();\r\n\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll();\r\n\t\t\t});\r\n\t\t\tif (this.user.user_token) {\r\n\t\t\t\tthis.getSystemnews();\r\n\t\t\t\tthis.downOption.auto = true\r\n\t\t\t\tthis.upOption.auto = true\r\n\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll();\r\n\t\t\t} else {\r\n\t\t\t\tthis.list = []\r\n\t\t\t}\r\n\t\t\tuni.$on('delet', data => {\r\n\t\t\t\tif (data.msg == 'del') {\r\n\t\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tuni.$on('onSocketMessage_list', data => {\r\n\t\t\t\tif (data.message_type == 'chatMessage') {\r\n\t\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tuni.$on('openPage', data => {\r\n\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll();\r\n\t\t\t})\r\n\t\t\tuni.$on('updata', () => {\r\n\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll(false);\r\n\t\t\t});\r\n\t\t\tuni.$on('wechatLogin', () => { //通知成功\r\n\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll();\r\n\t\t\t})\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tuni.$on('openPage', data => {\r\n\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll();\r\n\t\t\t})\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\t//销毁组件\r\n\t\t\tuni.$off('delet');\r\n\t\t\tuni.$off('number');\r\n\t\t\tuni.$off('onSocketMessage_list');\r\n\t\t\tuni.$off('wechatLogin');\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tmsg_img(msg) {\r\n\t\t\t\tlet str = '';\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (msg.indexOf('img[') >= 0) {\r\n\t\t\t\t\t\tstr = msg.substr(4, msg.length - 5);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tnavTo(item) {\r\n\t\t\t\tif (this.modalName != null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//点击聊天\r\n\t\t\t\tif (item.data != '') {\r\n\t\t\t\t\titem.data.uid = Number(item.data.uid);\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorageSync('setData', item.data);\r\n\t\t\t\tif (this.isopen == false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.user.user_token) {\r\n\t\t\t\t\tthis.$Common.toast('您还没有登录，请先登录');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../../pagessignup/login'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tuni.navigateTo({ //微信授权后直接返回上一级不能使用 redirectTo\r\n\t\t\t\t\t\t\turl: '/pagessignup/wechat/wxlog?page=outLogin'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.isopen = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isopen = true;\r\n\t\t\t\t}, 1500);\r\n\t\t\t\tuni.$emit('jump', {})\r\n\t\t\t\tuni.$emit('number', {\r\n\t\t\t\t\tmsg: 'number'\r\n\t\t\t\t});\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../pagesmessage/userMsg?kfid=' +\r\n\t\t\t\t\t\titem.uid +\r\n\t\t\t\t\t\t'&userName=' +\r\n\t\t\t\t\t\t(item.name || item.user_nickname) +\r\n\t\t\t\t\t\t'&job_position_id=' +\r\n\t\t\t\t\t\titem.job_position_id +\r\n\t\t\t\t\t\t'&friendId=' +\r\n\t\t\t\t\t\titem.friend_id,\r\n\t\t\t\t\tanimationDuration: 300\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tupCallback(mescroll) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t// 此时mescroll会携带page的参数:\r\n\t\t\t\tlet page = mescroll.num; // 页码, 默认从1开始\r\n\t\t\t\tlet list_rows = mescroll.size; // 页长, 默认每页10条\r\n\t\t\t\t// 将获取的经纬度传给后台\r\n\t\t\t\tif (this.user.user_token) {\r\n\t\t\t\t\tthis.$Request\r\n\t\t\t\t\t\t.post(this.$api.msg.doctor_list, {\r\n\t\t\t\t\t\t\ttype: 1,\r\n\t\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\t\tlist_rows: 10\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\tlet curPageData = res.data.data;\r\n\t\t\t\t\t\t\t\tlet total = res.data.total;\r\n\t\t\t\t\t\t\t\tif (page == 1) that.list = []; //如果是第一页需手动置空列表\r\n\t\t\t\t\t\t\t\tthat.list = that.list.concat(curPageData); //追加新数据\r\n\t\t\t\t\t\t\t\tmescroll.endBySize(curPageData.length, total);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.mescroll.endErr();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tthis.$Common.toast('网络错误，请稍后再试')\r\n\t\t\t\t\t\t\tthis.mescroll.endErr();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.mescroll.endErr();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetSystemnews() {\r\n\t\t\t\t//获取系统消息\r\n\t\t\t\tthis.$Request.post(this.$api.operation.get_message_type_list).then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tthis.systm = res.data[0].new_msg;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$Common.toast(res.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdelete_msg(id) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '确定要删除此好友吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t// 删除消息\r\n\t\t\t\t\t\t\tthis.$Request\r\n\t\t\t\t\t\t\t\t.post(this.$api.msg.deletFriend, {\r\n\t\t\t\t\t\t\t\t\tids: id\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.$Common.toast('删除成功')\r\n\t\t\t\t\t\t\t\t\t\tthis.mescroll && this.mescroll.resetUpScroll(false);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.$Common.toast(res.msg);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// ListTouch触摸开始\r\n\t\t\tListTouchStart(e) {\r\n\t\t\t\tthis.listTouchStart = e.touches[0].pageX;\r\n\t\t\t},\r\n\t\t\t// ListTouch计算方向\r\n\t\t\tListTouchMove(e) {\r\n\t\t\t\tthis.listTouchDirection = e.touches[0].pageX - this.listTouchStart > 0 ? 'right' : 'left';\r\n\t\t\t},\r\n\r\n\t\t\t// ListTouch计算滚动\r\n\t\t\tListTouchEnd(e) {\r\n\t\t\t\tif (this.listTouchDirection == 'left') {\r\n\t\t\t\t\tthis.modalName = e.currentTarget.dataset.target;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.modalName = null;\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t\tthis.listTouchDirection = null;\r\n\t\t\t},\r\n\r\n\t\t\t// 点击系统消息进入详情\r\n\t\t\tgomsg() {\r\n\t\t\t\tif (!this.user.user_token) {\r\n\t\t\t\t\tthis.$Common.toast('您还没有登录，请先登录');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../../pagessignup/login'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tuni.navigateTo({ //微信授权后直接返回上一级不能使用 redirectTo\r\n\t\t\t\t\t\t\turl: '/pagessignup/wechat/wxlog?page=outLogin'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.isopen == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isopen = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isopen = true;\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\tthis.$Request.post(this.$api.msg.user_token_msg).then(res => {});\r\n\t\t\t\t\tuni.$emit('number', {\r\n\t\t\t\t\t\tmsg: 'number'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../../pagesmessage/msg'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.cu-list>.cu-item.move-cur {\r\n\t\ttransform: translateX(-140rpx);\r\n\t}\r\n\r\n\t.cu-list>.cu-item {\r\n\t\ttransition: all 0.3s ease-in-out 0s;\r\n\t}\r\n\r\n\tpage {\r\n\t\t// padding-bottom: 100rpx;\r\n\t\tbackground-color: #fff !important;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.nav {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 750upx;\r\n\t\tpadding: 0 26upx;\r\n\t\tz-index: 10;\r\n\t\tmin-height: 110rpx;\r\n\t\t// text-align: center;\r\n\t\tline-height: 110rpx;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.lunbo {\r\n\t\tpadding: 0 32rpx 0;\r\n\r\n\t\tborder-radius: 20rpx;\r\n\r\n\t\timage {\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.box {\r\n\t\timage {\r\n\t\t\twidth: 106rpx;\r\n\t\t\theight: 106rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.cu-list.menu>.cu-item .content uni-image {\r\n\t\twidth: 96rpx;\r\n\t\theight: 96rpx;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.cu-list.menu>.cu-item {\r\n\t\tpadding: 30rpx 0;\r\n\t}\r\n\r\n\t.msgnum {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 8upx;\r\n\t\tz-index: 100;\r\n\t\twidth: 22upx;\r\n\t\theight: 22upx;\r\n\t\tbackground: #ff5656;\r\n\t\tborder-radius: 50%;\r\n\t\tfont-size: 22upx;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tline-height: 28upx;\r\n\t}\r\n\r\n\t.masgnum {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 100;\r\n\t\twidth: 32upx;\r\n\t\theight: 32upx;\r\n\t\tbackground: #ff5656;\r\n\t\tborder-radius: 50%;\r\n\t\tfont-size: 22upx;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tline-height: 28upx;\r\n\t}\r\n\r\n\t.sm-border {\r\n\t\tmargin-bottom: 80upx;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./message.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1668579580859\n      var cssReload = require(\"D:/HBuilderX.3.6.4.20220922/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}