{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagessignup/wechat/wxlog.vue?df97","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagessignup/wechat/wxlog.vue?3263","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagessignup/wechat/wxlog.vue?8f4f","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagessignup/wechat/wxlog.vue?5eaf","uni-app:///pagessignup/wechat/wxlog.vue","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagessignup/wechat/wxlog.vue?26fd","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagessignup/wechat/wxlog.vue?214e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,oG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAiuB,CAAgB,svBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0BrvB;AACA,MADA,kBACA;AACA;AACA,cADA;AAEA,uBAFA;AAGA,YAHA;AAIA,2BAJA;AAKA,mBALA;AAMA,iBANA;AAOA,gBAPA;AAQA,kBARA;AASA,kBATA,EASA;AACA,gBAVA;AAWA,kBAXA;AAYA,eAZA;;AAcA,GAhBA;AAiBA,QAjBA,kBAiBA,CAjBA,EAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAzBA;AA0BA;AACA;AACA,WAFA,qBAEA;AACA;AACA;AACA;AACA,SAHA;;AAKA,KARA;AASA;AACA,iBAVA,yBAUA,CAVA,EAUA;AACA;AACA;AACA,yBADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAHA;;AAKA;AACA,8BADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EADA;AAEA,oDAFA;AAGA,4BAHA;AAIA,8CAJA;AAKA,0CALA;AAMA,oDANA;AAOA,qDAPA;;AASA,oBATA,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBANA,MAMA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA,gCADA;AAEA;AACA;AACA,mDAVA,CAUA;AACA;AACA;AACA;AACA;AACA,0DADA;;AAGA,yBAJA,MAIA;AACA,iCADA,IACA,CADA,EACA;AACA;AACA,6CADA,IACA,CADA,EACA;AACA;AACA,qEADA;;AAGA,2BALA,MAKA;AACA;AACA,4DADA;;AAGA;AACA;AACA,uBAnBA,MAmBA;AACA;AACA;AACA,yBAFA,EAEA,GAFA;AAGA;AACA;AACA,mBA/CA,MA+CA;AACA;AACA;AACA;AACA;AACA,mBALA,MAKA;AACA;AACA;AACA;AACA,iBAnEA;AAoEA,qBApEA,CAoEA;AACA;AACA;AACA;AACA;AACA,iBAzEA;AA0EA,eApFA;AAqFA;AACA;AACA;AACA;AACA,eAzFA;;AA2FA,WAlGA,MAkGA;AACA;AACA,2BADA;AAEA,0BAFA;;AAIA;AACA;AACA,SA5GA;;;AA+GA,KA3HA;AA4HA;AACA,kBA7HA,0BA6HA,CA7HA,EA6HA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,6CAFA;AAGA,uBAHA;AAIA,4CAJA;;AAMA;AACA;AACA,KArJA;AAsJA,WAtJA,mBAsJA,GAtJA,EAsJA;AACA;AACA;AACA;AACA;AACA;AACA,2CAHA,CAGA;AACA;AACA;AACA;AACA;AACA,uCARA,CAQA;AACA;AACA;AACA;AACA;AACA,8CADA;;AAGA,aAJA,MAIA;AACA;AACA;AACA,yDADA;;AAGA,eAJA,MAIA;AACA;AACA,gDADA;;AAGA;AACA;AACA,WAjBA,MAiBA;AACA;AACA;AACA;AACA,aAFA,EAEA,GAFA;AAGA;AACA;AACA,OAnCA;AAoCA,KA3LA,EA1BA,E;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAo3C,CAAgB,i1CAAG,EAAC,C;;;;;;;;;;;ACAx4C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagessignup/wechat/wxlog.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagessignup/wechat/wxlog.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./wxlog.vue?vue&type=template&id=0966a4fb&\"\nvar renderjs\nimport script from \"./wxlog.vue?vue&type=script&lang=js&\"\nexport * from \"./wxlog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wxlog.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagessignup/wechat/wxlog.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxlog.vue?vue&type=template&id=0966a4fb&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxlog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxlog.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"plr16\">\r\n\t\t<view>\r\n\t\t\t<view class=\"pt50 topBg\">\r\n\t\t\t\t<image :src=\"IMG_URL + 'static/miniwechat/wechatbg.png'\" mode=\"aspectFill\" class=\"loginBg\"></image>\r\n\t\t\t\t<view class=\"logoBox text-white flex align-center justify-center\">\r\n\t\t\t\t\t<!-- 保障网 -->\r\n\t\t\t\t\t<image src=\"../../static/images/logo.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\r\n\t\t\t<view class=\"footer\">\r\n\t\t\t\t<button v-if=\"isUser\" open-type=\"getUserInfo\" withCredentials=\"true\" lang=\"zh_CN\"\r\n\t\t\t\t\t@getuserinfo=\"wxGetUserInfo\" style=\"background:#39b54a;\"\r\n\t\t\t\t\tclass='btn_normal text-white'>微信一键授权</button>\r\n\t\t\t\t<button v-else class=\"btn_normal text-white\" type=\"primary\" open-type=\"getPhoneNumber\"\r\n\t\t\t\t\twithCredentials=\"true\" lang=\"zh_CN\" @getphonenumber=\"getPhoneNumber\"\r\n\t\t\t\t\tstyle=\"background:#39b54a;\">绑定手机号</button>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcode: '',\r\n\t\t\t\tencryptedData: '',\r\n\t\t\t\tiv: '',\r\n\t\t\t\tIMG_URL:this.IMG_URL,\r\n\t\t\t\tsignature: '',\r\n\t\t\t\trawData: '',\r\n\t\t\t\tavatar: '',\r\n\t\t\t\tnickname: '',\r\n\t\t\t\tisUser: true, // 是否获取过用户信息授权\r\n\t\t\t\topenId: \"\",\r\n\t\t\t\tuserinfo: {},\r\n\t\t\t\tgoPage: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tvar that = this;\r\n\t\t\tthis.getCode();\r\n\t\t\tconsole.log(wx.getUserProfile, 'wx.getUserProfile');\r\n\t\t\tuni.removeStorageSync('PageCur');\r\n\t\t\tif (e.page == 'outLogin') {\r\n\t\t\t\tthis.goPage = 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取code\r\n\t\t\tgetCode() {\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.code = res.code;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 授权用户信息\r\n\t\t\twxGetUserInfo(e) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '是否授权微信',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tlet code = '';\r\n\t\t\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tcode = res.code;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\t\t\t\tdesc: '用于完善会员资料',\r\n\t\t\t\t\t\t\t\tsuccess: infoRes => {\r\n\t\t\t\t\t\t\t\t\t// console.log(code,infoRes,'tttttttttttttttttt');\r\n\t\t\t\t\t\t\t\t\t// return\r\n\t\t\t\t\t\t\t\t\t// console.log(code, ' ffffff', encodeURIComponent(infoRes\r\n\t\t\t\t\t\t\t\t\t// \t\t.encryptedData), 'ddddd',\r\n\t\t\t\t\t\t\t\t\t// \tencodeURIComponent(infoRes.iv), 'code1');\r\n\t\t\t\t\t\t\t\t\t// 允许授权用户登录\r\n\t\t\t\t\t\t\t\t\t// 请求登录接口\r\n\t\t\t\t\t\t\t\t\tthat.$Request.post(that.$api.wechat.wx_login, {\r\n\t\t\t\t\t\t\t\t\t\t\tencryptedData: encodeURIComponent(infoRes.encryptedData),\r\n\t\t\t\t\t\t\t\t\t\t\tiv: encodeURIComponent(infoRes.iv),\r\n\t\t\t\t\t\t\t\t\t\t\tcode: code,\r\n\t\t\t\t\t\t\t\t\t\t\tsignature: infoRes.signature,\r\n\t\t\t\t\t\t\t\t\t\t\trawData:infoRes.rawData,\r\n\t\t\t\t\t\t\t\t\t\t\tavatar:infoRes.userInfo.avatarUrl,\r\n\t\t\t\t\t\t\t\t\t\t\tnickname:infoRes.userInfo.nickName\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.then(result => {\r\n\t\t\t\t\t\t\t\t\t\t\t// console.log('后台返回登录信息', result.code);\r\n\t\t\t\t\t\t\t\t\t\t\tif (result.code == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(result.data,result.data.result,'result.result');\r\n\t\t\t\t\t\t\t\t\t\t\t\t// 如果后台返回来的是 result 字段,表示此账号还没有绑定过手机号 跳转到绑定手机号页面\r\n\t\t\t\t\t\t\t\t\t\t\t\t// 如果后台返回的是 userinfo 字段,表示已经登录成功,把用户信息存到 store 中,并返回跳转来的页面\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (result.data.result) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('后台返回的result',result.data.result);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.rawData = result.data.result;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$Common.toast('授权成功，请点击按钮进行手机号授权');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.isUser = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (result.data.userinfo) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(result.data.userinfo,'已绑定手机号');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet info = that.userinfo = result.data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.userinfo;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.$emit('appLoginSuccess', {});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('USERINFO', info);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('userToken', info\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.user_token);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('PageCur');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('chooseCity');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.$emit('wechatLogin', {}); //监听微信登录\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (that.goPage == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(result.data,'授权返回的信息');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (result.data.userinfo.user_type == 2) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../../pages/index/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (result.data.userinfo\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.user_type == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (result.data.userinfo\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.is_personal_profile == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../../pagesauthen/choose_shenfen'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../../pages/index/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t} else if (result.code == -999) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// 服务器解析参数错误\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.$Common.toast(result.msg);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.$Common.toast('授权失败，请使用其他方式登录');\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('ERROR_catch', err);\r\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\tthat.$Common.toast(err.msg);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('ERROR_fail', err);\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '授权失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// 授权手机号\r\n\t\t\tgetPhoneNumber(e) {\r\n\t\t\t\tthis.getCode();\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '绑定中'\r\n\t\t\t\t});\r\n\t\t\t\tif (!this.code) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.$Common.toast('授权失败，请稍后重试');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.detail.errMsg == \"getPhoneNumber:fail:user deny\") {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.$Common.toast('您已经取消授权');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tiv: e.detail.iv,\r\n\t\t\t\t\tencryptedData: e.detail.encryptedData,\r\n\t\t\t\t\tcode: this.code,\r\n\t\t\t\t\twxinfo: JSON.stringify(this.rawData),\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(obj,'========obj======');\r\n\t\t\t\tthis.phoneFn(obj);\r\n\t\t\t},\r\n\t\t\tphoneFn(obj) {\r\n\t\t\t\tthis.$Request.post(this.$api.wechat.wx_info, obj).then(res => {\r\n\t\t\t\t\tthis.$Common.toast(res.msg);\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tlet info = res.data.userinfo;\r\n\t\t\t\t\t\tuni.$emit('appLoginSuccess', {}); //监听websocket连接\r\n\t\t\t\t\t\tuni.setStorageSync('USERINFO', info);\r\n\t\t\t\t\t\tuni.setStorageSync('userToken', info.user_token);\r\n\t\t\t\t\t\tuni.removeStorageSync('PageCur');\r\n\t\t\t\t\t\tuni.removeStorageSync('chooseCity');\r\n\t\t\t\t\t\tuni.$emit('wechatLogin', {}); //监听微信登录\r\n\t\t\t\t\t\tif (this.goPage == 1) {\r\n\t\t\t\t\t\t\tconsole.log(res.data,'绑定手机号返回的信息');\r\n\t\t\t\t\t\t\tif (res.data.userinfo.user_type == 2) {\r\n\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\turl: '../../pages/index/index'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else if (res.data.userinfo.user_type == 1) {\r\n\t\t\t\t\t\t\t\tif (res.data.userinfo.is_personal_profile == 0) {\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '../../pagesauthen/choose_shenfen'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\turl: '../../pages/index/index'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.getCode();\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.navigateBack({})\r\n\t\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.loginBg {\r\n\t\twidth: 100%;\r\n\t\theight: 400rpx;\r\n\t}\r\n\r\n\t.topBg {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.logoBox {\r\n\t\twidth: 180rpx;\r\n\t\theight: 180rpx;\r\n\t\toverflow: hidden;\r\n\t\tbackground: linear-gradient(360deg, rgba(249, 159, 71, 1) 0%, rgba(241, 102, 34, 1) 100%);\r\n\t\tborder-radius: 50%;\r\n\t\topacity: 1;\r\n\t\tposition: absolute;\r\n\t\tleft: 35%;\r\n\t\ttop: 20%;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\tpage {\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.noLogin {\r\n\t\tbackground: #708090 !important;\r\n\t}\r\n\r\n\t.header {\r\n\t\tmargin: 90rpx 0 90rpx 50rpx;\r\n\t\tborder-bottom: 1px solid #f7f7f7;\r\n\t\ttext-align: center;\r\n\t\twidth: 650rpx;\r\n\t\theight: 300rpx;\r\n\t\tline-height: 450rpx;\r\n\t}\r\n\r\n\t.header image {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tborder: 1px #eee solid;\r\n\t}\r\n\r\n\t.footer {\r\n\t\tposition: fixed;\r\n\t\tbottom: 100rpx;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t}\r\n\r\n\t.content {\r\n\t\tmargin-left: 50rpx;\r\n\t\tmargin-bottom: 90rpx;\r\n\t}\r\n\r\n\t.content text {\r\n\t\tdisplay: block;\r\n\t\tcolor: #9d9d9d;\r\n\t\tmargin-top: 40rpx;\r\n\t}\r\n\r\n\t.bottom {\r\n\t\tborder-radius: 80rpx;\r\n\t\tmargin: 70rpx 50rpx;\r\n\t\tfont-size: 35rpx;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxlog.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxlog.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1668579586489\n      var cssReload = require(\"D:/HBuilderX.3.6.4.20220922/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}