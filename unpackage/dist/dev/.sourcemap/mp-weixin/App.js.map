{"version":3,"sources":["webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/App.vue?fb41","uni-app:///main.js","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/App.vue?7e2f",null,"webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/App.vue?0838","uni-app:///App.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAk3C,CAAgB,+0CAAG,EAAC,C;;;;;;;;;;;;kDCAt4C;;;AAGA;AACA,2E,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,YAAD,CAAV,C;;;;;;;;;;;;ACLA;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACuD;AACL;AACc;;;AAGhE;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAA+tB,CAAgB,ovBAAG,EAAC,C;;;;;;;;;;;;;ACCnvB;;AAEA;;;AAGA,0E,8FAJA;;;AAOA;AACA,qB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;AACA;;;;;;;;;;;AAWA;AACA;AACA;AACA;;;;;;;AAOA,OAtBA;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA;AACA;AACA;AACA;AACA,KAHA;AAIA;AACA;AACA;AACA;AACA,KAHA;;AAKA;AACA;AACA;AACA,KAHA;AAIA,GA/PA;AAgQA;AACA;;;;AAIA,8BALA,CAKA;AACA;AACA;AACA;AACA,KAFA,EAEA,GAFA;AAGA;AACA,GA3QA;AA4QA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,KAFA;AAGA;;AAEA,KAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAFA;AAGA,GA9RA;AA+RA;AACA,oBADA,8BACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sFAFA;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,+CAFA;;AAIA,WALA,EAKA,KALA;AAMA,SArBA;AAsBA;AACA;;AAEA,SAHA;AAIA;AACA;AACA;AACA,uCAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA,EAEA,GAFA;AAGA;AACA,6CANA,CAMA;AACA;AACA,+DADA,CACA;AACA;AACA;AACA,0CAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAlDA;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA;AAOA;AACA,KAxGA;AAyGA,qBAzGA,6BAyGA,GAzGA,EAyGA;AACA;AACA;AACA,iBADA;AAEA,yCAFA;;AAIA,KA/GA;AAgHA;AACA;AACA;AACA,iBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,sBAFA;;AAIA;AACA;AACA,uCADA;;AAGA;AACA;AACA,OAhBA;AAiBA,KAnIA,EA/RA,E","file":"App.js","sourcesContent":["import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './App.vue'\ncreatePage(Page)","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1668579586807\n      var cssReload = require(\"D:/HBuilderX.3.6.4.20220922/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\n\timport Vue from 'vue'\r\n\t// 引入检查更新模块\r\n\timport {\r\n\t\tcheckUpdater\r\n\t} from '@/common/checkUpdater';\r\n\timport {\r\n\t\tpermissions\r\n\t} from '@/common/Permissions.js'\r\n\tvar that;\r\n\tvar pushMessage = []\r\n\texport default {\r\n\t\tonLaunch: function() {\r\n\t\t\tthat = this;\r\n\t\t\tuni.removeStorageSync('PageCur');\r\n\t\t\tuni.removeStorageSync('chooseCity');\r\n\t\t\t// 清除缓存的本地定位\r\n\t\t\tuni.removeStorageSync('position_const');\r\n\t\t\t// 微信登录获取的unionid\r\n\t\t\t// uni.removeStorageSync('unionid');\r\n\r\n\t\t\tuni.setStorageSync('istoken', true)\r\n\t\t\tuni.setStorageSync('openHomePop', 1)\r\n\t\t\t// app打开时先检查是否有更新记录（更新记录会被保存在storage中）\r\n\t\t\t// 更新记录的内容为 { 更新标记, 安装包位置 }\r\n\r\n\t\t\t// 如果存在更新记录，且更新标记（complete=true）则删除上次使用过的安装包，达到存储释放空间的目的\r\n\r\n\t\t\t// 如果存在更新记录，且更新标记（complete=false）则进行安装更新 - 2019年3月27日 新增强制更新内容\r\n\t\t\tconst _self = this;\r\n\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tplus.screen.lockOrientation('portrait-primary'); //竖屏正方向锁定\r\n\t\t\tvar platform = uni.getSystemInfoSync().platform;\r\n\t\t\tif (platform == 'ios') {\r\n\t\t\t\t//监听系统通知栏消息事件\r\n\t\t\t\tplus.push.addEventListener('receive', function(message) {\r\n\t\t\t\t\tconsole.log(message, '---receive');\r\n\t\t\t\t})\r\n\t\t\t\t//监听系统通知栏消息点击事件  \r\n\t\t\t\tplus.push.addEventListener('click', function(message) {\r\n\t\t\t\t\t//处理点击消息的业务逻辑代码\r\n\t\t\t\t\tconsole.log(message, '---push');\r\n\t\t\t\t\t// 获取透传消息的 对应动作的action 来判断要跳到那个详情页面\r\n\t\t\t\t\tif (message.payload.action == 6) { //报名状态 报名列表\r\n\t\t\t\t\t\tlet aid = message.payload.extra.position_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/userypz/singUpStatus?id=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 7) { //网约工详情  我的接单列表 我是接单者\r\n\t\t\t\t\t\tlet aid = message.payload.extra.partjob_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/userypz/my_order'\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t} else if (message.payload.action == 10) { //网约工详情  查看接单人  我是发布者 \r\n\t\t\t\t\t\tlet aid = message.payload.extra.paryjob_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/userypz/pick_up_person?pushMsg=1&aid=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 8) { //报名详情  查看简历\r\n\t\t\t\t\t\tlet aid = message.payload.extra.delivery_id\r\n\t\t\t\t\t\tlet user_id = message.payload.extra.user_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesHome/look_resume?uid=' + user_id + '&aid=' + aid +\r\n\t\t\t\t\t\t\t\t'&set_up_status=0'\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 9) { //进最新通知详情\r\n\t\t\t\t\t\tlet aid = message.payload.extra.notice_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/zhaopinzhe/noticeDetail?aid=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 11) { //聊天消息页面\r\n\t\t\t\t\t\tlet kfid = message.payload.extra.my_id\r\n\t\t\t\t\t\tlet userName = message.payload.extra.friend_nickname\r\n\t\t\t\t\t\tlet position_id = message.payload.extra.friend_job_position_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesmessage/userMsg?kfid=' + kfid + '&friendId=' + kfid +\r\n\t\t\t\t\t\t\t\t'&userName=' + userName +\r\n\t\t\t\t\t\t\t\t'&job_position_id=' + position_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 13) { //便民信息页面  后台推送咨讯\r\n\t\t\t\t\t\tlet aid = message.payload.extra.aid\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesHome/index/convenience_detail?id=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 14) { //职位详情页面  后台推送职位\r\n\t\t\t\t\t\tlet aid = message.payload.extra.position_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesHome/index/plant_detail?id=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 1) { //系统消息页面\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesmessage/msg'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\t\t// plus.push.addEventListener('receive', function(message) {\r\n\t\t\t\t// \tconsole.log(message, '=============receive-------ios');\r\n\r\n\t\t\t\t// }, false);\r\n\t\t\t} else if (platform == 'android') { //执行跳转判断 \r\n\t\t\t\t//监听系统通知栏消息点击事件\r\n\t\t\t\tplus.push.addEventListener('click', function(message) {\r\n\t\t\t\t\t//处理点击消息的业务逻辑代码\r\n\t\t\t\t\tconsole.log(message, '---push');\r\n\t\t\t\t\t_self._handlePush(message);\r\n\t\t\t\t\t// 获取透传消息的 对应动作的action 来判断要跳到那个详情页面\r\n\t\t\t\t}, false);\r\n\t\t\t\t//监听接收透传消息事件  \r\n\t\t\t\tplus.push.addEventListener('receive', function(message) {\r\n\t\t\t\t\tconsole.log(message, '=============receive-------00');\r\n\t\t\t\t\tif (message.payload.action == 6) { //报名状态 报名列表\r\n\t\t\t\t\t\tlet aid = message.payload.extra.position_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/userypz/singUpStatus?id=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 7) { //网约工详情  我的接单列表 我是接单者\r\n\t\t\t\t\t\tlet aid = message.payload.extra.partjob_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/userypz/my_order'\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t} else if (message.payload.action == 10) { //网约工详情  查看接单人  我是发布者 \r\n\t\t\t\t\t\tlet aid = message.payload.extra.paryjob_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/userypz/pick_up_person?pushMsg=1&aid=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 8) { //报名详情  查看简历\r\n\t\t\t\t\t\tlet aid = message.payload.extra.delivery_id\r\n\t\t\t\t\t\tlet user_id = message.payload.extra.user_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesHome/look_resume?uid=' + user_id + '&aid=' + aid +\r\n\t\t\t\t\t\t\t\t'&set_up_status=0'\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 9) { //进最新通知详情\r\n\t\t\t\t\t\tlet aid = message.payload.extra.notice_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagescenter/zhaopinzhe/noticeDetail?aid=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 11) { //聊天消息页面\r\n\t\t\t\t\t\tlet kfid = message.payload.extra.my_id\r\n\t\t\t\t\t\tlet userName = message.payload.extra.friend_nickname\r\n\t\t\t\t\t\tlet position_id = message.payload.extra.friend_job_position_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesmessage/userMsg?kfid=' + kfid + '&friendId=' + kfid +\r\n\t\t\t\t\t\t\t\t'&userName=' + userName +\r\n\t\t\t\t\t\t\t\t'&job_position_id=' + position_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 13) { //便民信息页面  后台推送咨讯\r\n\t\t\t\t\t\tlet aid = message.payload.extra.aid\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesHome/index/convenience_detail?id=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 14) { //职位详情页面  后台推送职位\r\n\t\t\t\t\t\tlet aid = message.payload.extra.position_id\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesHome/index/plant_detail?id=' + aid\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (message.payload.action == 1) { //系统消息页面\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pagesmessage/msg'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_self._handlePush(message);\r\n\t\t\t\t}, false);\r\n\t\t\t}\r\n\t\t\tconst updated = uni.getStorageSync('updated'); // 尝试读取storage\r\n\t\t\tif (updated.completed === true) {\r\n\t\t\t\t// 如果上次刚更新过\r\n\t\t\t\t// 删除安装包及安装记录\r\n\t\t\t\t// console.log('安装记录被删除，更新成功');\r\n\t\t\t\tuni.removeSavedFile({\r\n\t\t\t\t\tfilePath: updated.packgePath,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.removeStorageSync('updated');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (updated.completed === false) {\r\n\t\t\t\tuni.removeStorageSync('updated');\r\n\t\t\t\tplus.runtime.install(updated.packgePath, {\r\n\t\t\t\t\tforce: true\r\n\t\t\t\t});\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'updated',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcompleted: true,\r\n\t\t\t\t\t\tpackgePath: updated.packgePath\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log('成功安装上次的更新，应用需要重启才能继续完成');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '应用将重启以完成更新',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tplus.runtime.restart();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// 检查更新，参数：{ 当前版本号，跳转到更新页面的url }\r\n\t\t\t\tplus.runtime.getProperty(plus.runtime.appid, function(widgetInfo) {\r\n\t\t\t\t\t//\"versionCode\": \"100\",\r\n\t\t\t\t\t//\"version\": \"1.0.0\",\r\n\t\t\t\t\tcheckUpdater(widgetInfo.versionCode, '/pagescommon/update');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\t// 读取系统信息，设置全局导航高度\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: function(e) {\r\n\t\t\t\t\t// #ifndef MP\r\n\t\t\t\t\tVue.prototype.StatusBar = e.statusBarHeight;\r\n\t\t\t\t\tif (e.platform == 'android') {\r\n\t\t\t\t\t\tVue.prototype.CustomBar = e.statusBarHeight + 50;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tVue.prototype.CustomBar = e.statusBarHeight + 45;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tVue.prototype.StatusBar = e.statusBarHeight;\r\n\t\t\t\t\tlet custom = wx.getMenuButtonBoundingClientRect();\r\n\t\t\t\t\tVue.prototype.Custom = custom;\r\n\t\t\t\t\tVue.prototype.CustomBar = custom.bottom + custom.top - e.statusBarHeight;\r\n\t\t\t\t\t// #endif\t\t\r\n\r\n\t\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\t\tVue.prototype.StatusBar = e.statusBarHeight;\r\n\t\t\t\t\tVue.prototype.CustomBar = e.statusBarHeight + e.titleBarHeight;\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// 监听登录，更新websocket链接\r\n\t\t\t// this.initializeSocket();\r\n\t\t\t// uni.$on('appLoginSuccess', () => {\r\n\t\t\t// \tconsole.log('appLoginSuccess，接收链接通知');\r\n\t\t\t//   // uni.closeSocket()\r\n\t\t\t//   // this.initializeSocket()\r\n\t\t\t// })\r\n\t\t\tthis.initializeSocket();\r\n\t\t\t// 监听登录\r\n\t\t\tuni.$on('appLoginSuccess', () => {\r\n\t\t\t\tconsole.log('微信登录，通知开启websocket');\r\n\t\t\t\tuni.closeSocket();\r\n\t\t\t\tthis.initializeSocket()\r\n\t\t\t});\r\n\t\t\t// 监听进入聊天页面\r\n\t\t\tuni.$on('jump', res => {\r\n\t\t\t\tuni.closeSocket();\r\n\t\t\t\tconsole.log('关闭');\r\n\t\t\t});\r\n\t\t\t// 监听退出聊天页面\r\n\t\t\tuni.$on('openAll', () => {\r\n\t\t\t\tuni.closeSocket();\r\n\t\t\t\tthis.initializeSocket()\r\n\t\t\t});\n\t\t\t\n\t\t\tthis.$Request.get(this.$api.common.fetchAppSetting).then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tuni.setStorageSync('is_contact', res.data.is_contact*1)\n\t\t\t});\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show');\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tconsole.log('cid', plus.push.getClientInfo().clientid);\r\n\t\t\t// #endif\r\n\t\t\tuni.$emit('openPage', {}) //开启页面  打开定位返回页面刷新数据\r\n\t\t\tthis.initializeSocket()\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tpermissions()\r\n\t\t\t}, 200)\r\n\t\t\tuni.hideLoading()\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide');\r\n\t\t\tuni.removeStorageSync('chooseCity');\r\n\t\t\t// 下面的方法都要写上\r\n\r\n\r\n\t\t\tuni.closeSocket();\r\n\t\t\tuni.onSocketOpen(function() {\r\n\t\t\t\tuni.closeSocket();\r\n\t\t\t});\r\n\t\t\tif(uni.getStorageSync('wechet')){\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tuni.removeStorageSync('launchFlag')\r\n\t\t\t}\r\n\t\t\tuni.onSocketClose(function(res) {\r\n\t\t\t\tconsole.log('WebSocket 已关闭全局！');\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinitializeSocket() {\r\n\t\t\t\tlet userToKen = uni.getStorageSync('USERINFO');\r\n\t\t\t\tif (userToKen.user_token) {\r\n\t\t\t\t\t// 链接socket\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tuni.connectSocket({\r\n\t\t\t\t\t\t// url: this.$Request.config('WS_HOST')\r\n\t\t\t\t\t\turl: 'wss://websocket.chongdarenli.com?from_id=' + userToKen.id + '&to_id=0'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\tuni.connectSocket({\r\n\t\t\t\t\t\turl: 'ws://123.56.143.238:9502?from_id=' + userToKen.id + '&to_id=0'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// 链接成功\r\n\t\t\t\t\tuni.onSocketOpen((res) => {\r\n\t\t\t\t\t\t// 登录\r\n\t\t\t\t\t\t// var login_data =\r\n\t\t\t\t\t\t// \t'{\"type\":\"userInit\", \"uid\": ' +\r\n\t\t\t\t\t\t// \tuserToKen.id +\r\n\t\t\t\t\t\t// \t', \"from_name\" : \"' +\r\n\t\t\t\t\t\t// \tuserToKen.user_name +\r\n\t\t\t\t\t\t// \t'\", \"from_avatar\" : \"' +\r\n\t\t\t\t\t\t// \tuserToKen.head_img +\r\n\t\t\t\t\t\t// \t'\", \"group\" : ' +\r\n\t\t\t\t\t\t// \t1 +\r\n\t\t\t\t\t\t// \t', \"user_type\" : ' +\r\n\t\t\t\t\t\t// \t1 +\r\n\t\t\t\t\t\t// \t'}';\r\n\t\t\t\t\t\t// that.sendSocketMessage(login_data);\r\n\t\t\t\t\t\tsetInterval(function() {\r\n\t\t\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\t\t\tdata: 'pong',\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 10000);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuni.onSocketError(function(res) {\r\n\t\t\t\t\t\tconsole.log('WebSocket连接打开失败，请检查！');\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 监听收到消息\r\n\t\t\t\t\tuni.onSocketMessage(function(res) {\r\n\t\t\t\t\t\t// 非心跳\r\n\t\t\t\t\t\tconsole.log(res, '========'); //心跳\r\n\t\t\t\t\t\tif (res.data != 'success') {\r\n\t\t\t\t\t\t\tvar arr = JSON.parse(res.data)\r\n\t\t\t\t\t\t\tif (!arr) {\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t// 接收消息\r\n\t\t\t\t\t\t\tif (arr.event == 'saveMessage') {\r\n\t\t\t\t\t\t\t\tconsole.log('在全局接收到信息');\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.$emit('receiveMsg', '接收消息')\r\n\t\t\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('sevice', true)\r\n\t\t\t\t\t\t\t\tlet routes = getCurrentPages(); // 获取当前打开过的页面路由数组\r\n\t\t\t\t\t\t\t\tif (routes != '') {\r\n\t\t\t\t\t\t\t\t\tlet curRoute = routes[routes.length - 1].route //获取当前页面路由\r\n\t\t\t\t\t\t\t\t\tif (curRoute != 'pagesmessage/userMsg') {\r\n\t\t\t\t\t\t\t\t\t\tuni.vibrateLong();\r\n\t\t\t\t\t\t\t\t\t\tuni.$emit('updata', {}) //刷新聊天列表\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t// var data;\r\n\t\t\t\t\t\t// try{\r\n\t\t\t\t\t\t// \tdata = JSON.parse(res.data);\r\n\t\t\t\t\t\t// }catch(e){//TODO handle the exception\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// if( data && data.message_type ){\r\n\t\t\t\t\t\t// \tlet routes = getCurrentPages(); // 获取当前打开过的页面路由数组\r\n\t\t\t\t\t\t// \tconsole.log( routes , '路由' );\r\n\t\t\t\t\t\t// \tif(routes!=''){\r\n\t\t\t\t\t\t// \t\tlet curRoute = routes[routes.length - 1].route //获取当前页面路由\r\n\t\t\t\t\t\t// \t\tif(data.message_type=='chatMessage' && curRoute!='pagesmessage/userMsg'){\r\n\t\t\t\t\t\t// \t\t\tuni.vibrateLong();\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \tswitch (data.message_type) {\r\n\t\t\t\t\t\t// \t\t// 服务端ping客户端\r\n\t\t\t\t\t\t// \t\tcase 'ping':\r\n\t\t\t\t\t\t// \t\t\tthat.sendSocketMessage('{\"type\":\"ping\"}');\r\n\t\t\t\t\t\t// \t\t\tbreak;\r\n\t\t\t\t\t\t// \t\tdefault:\r\n\t\t\t\t\t\t// \t\t\tuni.$emit('onSocketMessage_detail',data);\r\n\t\t\t\t\t\t// \t\t\tuni.$emit('onSocketMessage_list',data);\r\n\t\t\t\t\t\t// \t\t\tbreak;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// socket 断开链接后尝试重新链接\r\n\t\t\t\t\tuni.onSocketError(res => {\r\n\t\t\t\t\t\tuni.closeSocket();\r\n\t\t\t\t\t\tconsole.log('WebSocket 已关闭！');\r\n\t\t\t\t\t\t// setTimeout(()=>{\r\n\t\t\t\t\t\t// this.initializeSocket();\r\n\t\t\t\t\t\t// },1000)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendSocketMessage(msg) { //发送消息\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: msg,\r\n\t\t\t\t\tsuccess: (res) => {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 判断是否有引导图\r\n\t\t\tgetGuide: function() {\r\n\t\t\t\tthis.$Request.post(this.$api.operation.get_ads, {\r\n\t\t\t\t\ttypeid: 2\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tif (res.data.video == '') {\r\n\t\t\t\t\t\t\tif (!uni.getStorageSync('USERINFO').user_token) {\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('USERINFO', {\r\n\t\t\t\t\t\t\t\t\tuser_type: 1,\r\n\t\t\t\t\t\t\t\t\tid: ''\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/guide/guide'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"uview-ui/index.scss\";\r\n\t/*UI自带CSS,请勿修改*/\r\n\t@import 'colorui/main.css';\r\n\t@import 'colorui/icon.css';\r\n\t/*自定义CSS*/\r\n\t@import './static/css/common.css';\r\n\t@import './static/iconfont/iconfont.css';\r\n\t@import './common/css/common.css';\r\n\r\n\t/*如 : 去除导航背景 点击时透明度 0.8*/\r\n\t.navigator {\r\n\t\topacity: 1;\r\n\t\tbackground: none;\r\n\t}\r\n\r\n\t.navigator-hover {\r\n\t\tbackground: none;\r\n\t\topacity: 0.8;\r\n\t}\r\n\r\n\t.APP_pays {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: #FFFFFF;\r\n\t}\r\n\r\n\tpage {\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.uni-popup {\r\n\t\tz-index: 99999;\r\n\t}\r\n\r\n\t.uni-textarea-compute {\r\n\t\theight: 100%;\r\n\t\toverflow: auto;\r\n\t}\r\n</style>\r\n"],"sourceRoot":""}