{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagesmessage/userMsg.vue?a195","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagesmessage/userMsg.vue?4034","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagesmessage/userMsg.vue?45c1","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagesmessage/userMsg.vue?b1b9","uni-app:///pagesmessage/userMsg.vue","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagesmessage/userMsg.vue?3635","webpack:///C:/Users/schlesimu/Desktop/baozhangwang-master/pagesmessage/userMsg.vue?125d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,kG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACc;;;AAGpE;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrEA;AAAA;AAAA;AAAA;AAAmuB,CAAgB,wvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmKvvB,gG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AATA,SACA,sBACA,wBACA,cACA,iB,CACA;AACA,aACA,iB,0XAGA,+CACA,sB,CACA;eACA,EACA,cACA,oBADA,EADA,EAIA,IAJA,kBAIA,CACA,uCACA,SACA,SADA,EAEA,kBAFA,EAGA,eAHA,EAGA;AACA,kBAJA,EAIA;AACA,eALA,EAKA;AACA,uBANA,EAMA;AACA,0BAPA,EAOA;AACA,cARA,EAQA;AACA,sBATA,EASA;AACA,gBAVA,EAUA;AACA,sBAXA,EAWA;AACA;AACA,iBAbA,EAaA;AACA,2BAdA,EAeA;AACA,4BAhBA,EAiBA,YAjBA,EAkBA,gBAlBA,EAmBA,YAnBA,EAmBA;AACA,yBApBA,EAoBA;AACA,iBArBA,EAqBA;AACA,oBAtBA,EAsBA;AACA,kCAvBA,EAwBA,YAxBA,EAyBA,aACA;AACA,aAFA,EAGA,OAHA,EAIA,gBAJA,EAKA,mDALA,EAMA,QANA,EAOA,cAPA,EAQA,oBARA,GAzBA,EAmCA,QAnCA,EAmCA;AACA;AAEA;AACA,wCAvCA,EAyCA,cAzCA,EA0CA,iBA1CA,EA2CA,sBA3CA,EA4CA,gBA5CA,EA6CA,eA7CA,EA8CA,WA9CA,EA8CA;AACA,mBACA,aADA,EAEA,IAFA,EA/CA,EAmDA,iBAnDA,EAoDA,eApDA,EAqDA;AACA,0CAtDA,EAuDA,eAvDA,EAwDA,gBAxDA,EAyDA;AACA,kBA1DA,EA2DA,WA3DA,EA4DA,OA5DA,EA4DA;AACA,sBA7DA,GA+DA,CArEA,EAsEA,MAtEA,kBAsEA,MAtEA,EAsEA,kBACA,YACA,yBACA,gCACA,oBACA,8CACA,sBACA,6BACA,CARA,CASA;AACA,uCACA,uBACA,CAFA,EAVA,CAcA;AACA,wCACA,qBACA,CAFA,EAGA,uCACA,eACA,8BADA,EAEA,gCACA,sCACA,8BACA,CALA,IADA,CAQA;AACA,KATA,EAlBA,CA6BA;AACA,oDA9BA,CA+BA;AACA,yBACA,+BACA,iCACA,8CACA,2CACA,oBACA,CANA,MAMA,CAQA;AACA,wCADA,IAIA,CACA,0CACA,oBApDA,CAoDA;AACA,qBACA,kBAtDA,CAsDA;AACA;AACA,4BACA,CAFA,EAEA,GAFA,EAGA,CAhIA,EAiIA,WACA,OADA,mBACA,GADA,EACA,CACA,aACA,UACA,+BACA,oCACA,CACA,CACA,WACA,CATA,EAjIA,EA4IA,QA5IA,sBA4IA,CACA,oBADA,CAEA;AACA,4BACA,wBACA,yBACA,CACA,yBACA,CApJA,EAsJA,WACA;AACA,YAFA,sBAEA,CACA,iBACA,iEADA,IAGA,CANA,EAOA,YAPA,wBAOA,CAPA,EAOA,CACA;AACA,yBACA,wBACA,CAXA,EAYA,UAZA,sBAYA,CAZA,EAYA,CACA;AACA,mCACA,wBACA,CACA,CAjBA,EAkBA,SAlBA,qBAkBA,EAlBA,EAkBA;AACA,oBACA,8CACA,mBADA,EAEA,qCAFA,IAGA,IAHA,CAGA,gBACA,qBACA,CALA,EAMA,CACA,CA3BA,EA4BA,aA5BA,2BA4BA;AACA,sBAEA,oBACA;AACA,gGAFA,IAHA,CAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA,GACA,cADA;AAEA,yBAFA,GAEA,gBAFA;AAGA,uBAHA,GAGA,eAHA;AAIA,0BAJA,GAIA,cAJA,GAIA,GALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,6CAFA;;AAIA,SALA,EAKA,KALA;AAMA,OApBA;AAqBA;AACA;;AAEA,OAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iBADA,EACA,GADA;AAEA,eAJA;AAKA;AACA,sCARA,CAQA;AACA,aATA;AAUA,WAhBA,MAgBA;AACA;AACA;AACA;AACA,OAhCA;AAiCA;AACA;AACA,OAFA;AAGA,KA3GA;AA4GA,cA5GA,wBA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UADA,CACA,sBADA,EACA;AACA,oBADA;AAEA,uBAFA;AAGA,qBAHA,EADA;;AAMA,UANA,CAMA;AACA;AACA;AACA;AACA;AACA,iBADA;AAEA;AACA;AACA,aAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA,EAEA,IAFA;AAGA,eALA;AAMA,aATA;AAUA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;;AAEA,WAjCA,MAiCA;AACA;AACA;AACA;;AAEA;AACA,OAhDA;AAiDA,KArKA;AAsKA,qBAtKA,6BAsKA,GAtKA,EAsKA;AACA;AACA;AACA;AACA,mBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAXA;AAYA;AACA;AACA,WAdA;;AAgBA,OAjBA,MAiBA;AACA;AACA;AACA,KA5LA;;AA8LA;AACA,WA/LA,mBA+LA,OA/LA,EA+LA,IA/LA,EA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,qBAFA;AAGA,gCAHA;AAIA,8BAJA;AAKA,6DALA;AAMA,sBANA;AAOA,8BAPA;AAQA,oBARA;AASA,iCATA;AAUA,qCAVA;AAWA,oEAXA;;AAaA;AACA;AACA;AACA,kBADA;AAEA,qBAFA;AAGA,4BAHA;AAIA,8BAJA;AAKA,wBALA;AAMA,wBANA;AAOA,sBAPA;AAQA,iCARA;AASA,6BATA;AAUA,qCAVA;AAWA;AACA,2EAZA;;AAcA;AACA;AACA;AACA;AACA,KAtOA;;AAwOA;AACA,cAzOA,sBAyOA,GAzOA,EAyOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA,KAhQA;AAiQA,gBAjQA,0BAiQA;AACA;AACA;AACA,2BADA;AAEA,UAFA,CAEA,iBAFA;AAGA,KAtQA;AAuQA;AACA,aAxQA,qBAwQA,GAxQA,EAwQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA,OANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"pagesmessage/userMsg.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesmessage/userMsg.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./userMsg.vue?vue&type=template&id=6a4d0e10&\"\nvar renderjs\nimport script from \"./userMsg.vue?vue&type=script&lang=js&\"\nexport * from \"./userMsg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./userMsg.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesmessage/userMsg.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./userMsg.vue?vue&type=template&id=6a4d0e10&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.msgList, function(row, index) {\n    var $orig = _vm.__get_orig(row)\n\n    var g0 =\n      row.from_id &&\n      row.from_id &&\n      row.from_id == _vm.myuid &&\n      row.msg_type != \"msg\" &&\n      row.msg_type == \"voice\"\n        ? JSON.parse(row.content)\n        : null\n    var f0 =\n      row.from_id &&\n      row.from_id &&\n      row.from_id == _vm.myuid &&\n      row.msg_type != \"msg\" &&\n      row.msg_type == \"img\"\n        ? _vm._f(\"msg_img\")(row.content)\n        : null\n    var g1 =\n      row.from_id &&\n      row.from_id &&\n      row.from_id != _vm.myuid &&\n      _vm.kf_id == row.from_id &&\n      row.msg_type != \"msg\" &&\n      row.msg_type == \"voice\" &&\n      row.content != \"\"\n        ? JSON.parse(row.content)\n        : null\n    var f1 =\n      row.from_id &&\n      row.from_id &&\n      row.from_id != _vm.myuid &&\n      _vm.kf_id == row.from_id &&\n      row.msg_type != \"msg\" &&\n      row.msg_type == \"img\"\n        ? _vm._f(\"msg_img\")(row.content)\n        : null\n    return {\n      $orig: $orig,\n      g0: g0,\n      f0: f0,\n      g1: g1,\n      f1: f1\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.onKeyboard = true\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./userMsg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./userMsg.vue?vue&type=script&lang=js&\"","<!-- 与招聘者/应聘者沟通 -->\r\n<template>\r\n\t<view class=\"\">\r\n\t\t<view class=\"fixed\">\r\n\t\t\t<cu-custom bgColor=\"bg-white text-black\" :isBack=\"true\">\r\n\t\t\t\t<block slot=\"backText\">\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t<text class=\"text_line1\">{{ title || '昵称' }}</text>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t</block>\r\n\t\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t\t<block slot=\"content\">{{ title || '昵称' }}</block>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<block slot=\"right\">\r\n\t\t\t\t\t<text @tap='toReport' class=\"padding-right\">举报</text>\r\n\t\t\t\t</block>\r\n\t\t\t</cu-custom>\r\n\t\t</view>\r\n\t\t<view class=\"cu-chat \">\r\n\t\t\t<view class=\"content\" @touchstart=\"hideEmoji\">\r\n\t\t\t\t<scroll-view class=\"msg-list\" scroll-y=\"true\" style=\"top: 180upx;\"\r\n\t\t\t\t\t:scroll-with-animation=\"scrollAnimation\" :scroll-top=\"scrollTop\" :scroll-into-view=\"scrollToView\"\r\n\t\t\t\t\t@scrolltoupper=\"getMsgList()\">\r\n\t\t\t\t\t<view class=\"row\" v-for=\"(row, index) in msgList\" :key=\"index\" v-if=\"row.from_id\"\r\n\t\t\t\t\t\t:id=\"'msg' + row.aid\">\r\n\t\t\t\t\t\t<block v-if=\"row.from_id\">\r\n\t\t\t\t\t\t\t<!-- <view class=\" text-center margin-bottom text-sm\" v-if=\"index%10==0\">{{row.updateTime||row.time||''}}</view> -->\r\n\t\t\t\t\t\t\t<!-- 自己发出的消息 -->\r\n\t\t\t\t\t\t\t<view class=\"my flex-direction text-right\" v-if=\"row.from_id == myuid\">\r\n\t\t\t\t\t\t\t\t<view class=\"text-sm flex  padding-bottom align-center justify-end\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"\"> {{row.updateTime||row.time}}</view>\r\n\t\t\t\t\t\t\t\t\t<!-- <view class=\" padding-left\"> {{row.from_name}}</view> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex   justify-end\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"left\" v-if=\"row.msg_type != 'msg'\">\r\n\t\t\t\t\t\t\t\t\t\t<!-- :class=\"playMsgid == row.id ? 'play' : ''\" -->\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"background-color: #338fff;color: #FFFFFF;\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"row.msg_type == 'voice'\" class=\"bubble voice\" @tap=\"playVoice(row)\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"length\">{{ JSON.parse(row.content)['length'] }}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"icon my-voice\"></view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"row.msg_type == 'img'\" class=\"bubble img\" @tap=\"showPic(row)\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"row.content | msg_img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"background-color: #338fff;color: #FFFFFF;\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"row.msg_type == 'text'\" class=\"bubble\">\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t\t\t\t\t\t\t\t\t<text :selectable='true' v-html=\"row.content\"></text>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.content\" :selectable='true'></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"right\" v-if=\"row.msg_type != 'msg'\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"row.from_avatar || '/static/images/logo.png'\" class=\"bg-gray\">\r\n\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 别人发出的消息 -->\r\n\t\t\t\t\t\t\t<view class=\"other flex-direction\" v-if=\"row.from_id != myuid && kf_id==row.from_id\">\r\n\t\t\t\t\t\t\t\t<view class=\"text-sm flex  padding-bottom align-center \">\r\n\t\t\t\t\t\t\t\t\t<!-- <view class=\" \"> {{title}}</view> -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"\"> {{row.updateTime||row.time}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex  \">\r\n\t\t\t\t\t\t\t\t\t<view class=\"left\" v-if=\"row.msg_type != 'msg'\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"row.from_avatar || '/static/images/logo.png'\" class=\"bg-gray\">\r\n\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"right\" v-if=\"row.msg_type != 'msg'\">\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"row.msg_type == 'voice'&&row.content!=''\" class=\"bubble voice\"\r\n\t\t\t\t\t\t\t\t\t\t\t@tap=\"playVoice(row)\" :class=\"playMsgid == row.id ? 'play' : ''\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"icon other-voice\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"length\">{{ JSON.parse(row.content)['length'] }}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"row.msg_type == 'img'\" class=\"bubble img\" @tap=\"showPic(row)\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"row.content | msg_img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"bubble\" v-if=\"row.msg_type == 'text'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t\t\t\t\t\t\t\t\t<text :selectable='true' v-html=\"row.content\"></text>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.content\" :selectable='true'></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 表情栏 -->\r\n\t\t\t<view class=\"emoji-box\" :class=\"showEmji\" @touchmove.stop.prevent=\"discard\">\r\n\t\t\t\t<swiper class=\"swiper\" indicator-dots=\"true\" duration=\"150\">\r\n\t\t\t\t\t<swiper-item v-for=\"(page, pid) in emojiList\" :key=\"pid\">\r\n\t\t\t\t\t\t<view v-for=\"(em, eid) in page\" :key=\"eid\" @tap=\"addEmoji(em)\">\r\n\t\t\t\t\t\t\t<image mode=\"widthFix\" :src=\"IMG_URL + 'static/images/emoji/' + em.url\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t</view>\r\n\t\t\t<!-- 底部输入栏 -->\r\n\t\t\t<view class=\"input-box flex  align-end\" :class=\"showEmji\" @touchmove.stop.prevent=\"discard\">\r\n\t\t\t\t<view class=\"more\" @tap=\"chooseImage\">\r\n\t\t\t\t\t<view class=\"icon tupian\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more\" @tap=\"switchVoice\">\r\n\t\t\t\t\t<view class=\"icon yuyin\"></view>\r\n\t\t\t\t\t<!-- <image :src=\"IMG_URL + 'static/miniwechat/voice.png'\" mode=\"\"></image> -->\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"textbox\">\r\n\t\t\t\t\t<view class=\"voice-mode\" :class=\"[isVoice ? '' : 'hidden', recording ? 'recording' : '']\"\r\n\t\t\t\t\t\t@touchstart.stop.prevent=\"voiceBegin\" @touchmove.stop.prevent=\"voiceIng\"\r\n\t\t\t\t\t\t@touchend.stop.prevent=\"voiceEnd\" @touchcancel.stop.prevent=\"voiceCancel\">\r\n\t\t\t\t\t\t{{ voiceTis }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-mode\" :class=\"isVoice ? 'hidden' : ''\">\r\n\t\t\t\t\t\t<view class=\"box\">\r\n\t\t\t\t\t\t\t<textarea @focus=\"onKeyboard = true\" auto-height=\"autoHeight\" cursor-spacing=\"20\"\r\n\t\t\t\t\t\t\t\tmaxlength=\"-1\" @linechange=\"lineChange\" v-model=\"textMsg\" id=\"textMsg\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"em\" @tap=\"chooseEmoji\">\r\n\t\t\t\t\t\t\t<view class=\"icon biaoqing\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label for=\"textMsg\" v-if=\"textMsg!=''\">\r\n\t\t\t\t\t<view class=\"send\" :class=\"isVoice ? 'hidden' : ''\" @tap=\"sendText\">\r\n\t\t\t\t\t\t<view class=\"btn\">发送</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t\t<!-- 录音效果(上滑取消) -->\r\n\t\t\t<view class=\"record\" :class=\"recording ? '' : 'hidden'\">\r\n\t\t\t\t<view class=\"ing\" :class=\"willStop ? 'hidden' : ''\">\r\n\t\t\t\t\t<view class=\"icon luyin2\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cancel\" :class=\"willStop ? '' : 'hidden'\">\r\n\t\t\t\t\t<view class=\"icon chehui\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tis\" :class=\"willStop ? 'change' : ''\">{{ recordTis }}</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 全屏遮罩层，解决ios无法关闭软键盘 -->\r\n\t\t\t<view v-if=\"onKeyboard\" class=\"prop_ios\" @tap=\"hideKeyboard\"></view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar that;\r\n\tvar socketOpen = true;\r\n\tvar socketMsgQueue = [];\r\n\tvar kf_id = 0;\r\n\tvar kf_name = '';\r\n\t// 是否点击显示表情的标志\r\n\tvar flag = 1;\r\n\tvar commChat = 1;\r\n\timport jyfParser from '@/components/jyf-parser/jyf-parser';\r\n\timport emojiList from '@/common/js/emojList.js';\r\n\tconst recorderManager = uni.getRecorderManager();\r\n\tvar innerAudioContext;\r\n\t// innerAudioContext.autoplay = true;\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tjyfParser\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tlet BASE_URL = this.$Config(\"APIHOST\");\r\n\t\t\treturn {\r\n\t\t\t\tkf_id: '',\r\n\t\t\t\tBASE_URL,\r\n\t\t\t\tmassage_type: 1, // 用户聊天1 还是 与后台聊天 0\r\n\t\t\t\tuser_type: 1, //用户身份 1应聘端 2招聘端\r\n\t\t\t\ttitle: '', //导航标题\r\n\t\t\t\tonKeyboard: false, //是否打开了软键盘\r\n\t\t\t\timgUrl: this.$apiurl, //远程图片地址\r\n\t\t\t\tuser: {}, //会员信息\r\n\t\t\t\tautoHeight: true, //输入框自动高度\r\n\t\t\t\tkfdata: [], //\r\n\t\t\t\tlimitHour: false, //面试时间选择\r\n\t\t\t\t//文字消息\r\n\t\t\t\ttextMsg: '', //文字加表情包\r\n\t\t\t\tIMG_URL:this.IMG_URL,\r\n\t\t\t\t//消息列表\r\n\t\t\t\tscrollAnimation: false,\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tscrollToView: '',\r\n\t\t\t\tfriendId: '', //朋友id\r\n\t\t\t\tjob_position_id: '', //职位id\r\n\t\t\t\tmsgList: [], //聊天列表\r\n\t\t\t\tmsgImgList: [], //聊天图片列表\r\n\t\t\t\temojiList: emojiList,\r\n\t\t\t\tisstop: true,\r\n\t\t\t\tmsg_code: [{\r\n\t\t\t\t\t//聊天列表里的字段定义\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tuid: -1,\r\n\t\t\t\t\tusername: '系统助手',\r\n\t\t\t\t\tface: this.imgUrl + 'static/miniwechat/none4x3.jpg',\r\n\t\t\t\t\ttime: '',\r\n\t\t\t\t\ttype: 'system',\r\n\t\t\t\t\tcontent: '您好，有问题请留言'\r\n\t\t\t\t}],\r\n\t\t\t\tmyuid: 0, //我的uid\r\n\t\t\t\t//录音相关参数\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\t//H5不能录音\r\n\t\t\t\tRECORDER: uni.getRecorderManager(),\r\n\t\t\t\t// #endif\r\n\t\t\t\tisVoice: false,\r\n\t\t\t\tvoiceTis: '按住 说话',\r\n\t\t\t\trecordTis: '手指上滑 取消发送',\r\n\t\t\t\trecording: false,\r\n\t\t\t\twillStop: false,\r\n\t\t\t\tjobData: [], //职位展示信息\r\n\t\t\t\tinitPoint: {\r\n\t\t\t\t\tidentifier: 0,\r\n\t\t\t\t\tY: 0\r\n\t\t\t\t},\r\n\t\t\t\trecordTimer: null,\r\n\t\t\t\trecordLength: 0,\r\n\t\t\t\t//播放语音相关参数\r\n\t\t\t\tAUDIO: uni.createInnerAudioContext(),\r\n\t\t\t\tplayMsgid: null,\r\n\t\t\t\tVoiceTimer: null,\r\n\t\t\t\t//表情定义\r\n\t\t\t\tshowEmji: '',\r\n\t\t\t\tsetList: [],\r\n\t\t\t\tpage: 1, //页码\r\n\t\t\t\tisLoading: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthat = this;\r\n\t\t\tthis.kf_id = option.kfid;\r\n\t\t\tthis.friendId = option.friendId;\r\n\t\t\tkf_id = option.kfid;\r\n\t\t\tthis.job_position_id = option.job_position_id;\r\n\t\t\tif (option.userName) {\r\n\t\t\t\tthis.title = option.userName;\r\n\t\t\t}\r\n\t\t\t//语音自然播放结束\r\n\t\t\tthis.AUDIO.onEnded(res => {\r\n\t\t\t\tthis.playMsgid = null;\r\n\t\t\t});\r\n\t\t\t// #ifndef H5\r\n\t\t\t//录音开始事件\r\n\t\t\tthis.RECORDER.onStart(e => {\r\n\t\t\t\tthis.recordBegin(e);\r\n\t\t\t});\r\n\t\t\trecorderManager.onStop(function(res) {\r\n\t\t\t\tuni.saveFile({\r\n\t\t\t\t\ttempFilePath: res.tempFilePath,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tvar savedFilePath = res.savedFilePath;\r\n\t\t\t\t\t\tthat.recordEnd(savedFilePath);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// self.voicePath = res.tempFilePath;\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\t\t\t// 获取用户自己的信息\r\n\t\t\tthis.user_data = uni.getStorageSync('USERINFO');\r\n\t\t\t// console.log(this.user_data, '用户缓存信息');\r\n\t\t\tif (this.user_data) {\r\n\t\t\t\tthis.myuid = this.user_data.id;\r\n\t\t\t\tthis.user.id = this.user_data.id;\r\n\t\t\t\tthis.user.name = this.user_data.user_nickname;\r\n\t\t\t\tthis.user.avatar = this.user_data.head_img;\r\n\t\t\t\tthis.user.group = 1;\r\n\t\t\t} else {\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../pagessignup/login'\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tuni.navigateTo({ //微信授权后直接返回上一级不能使用 redirectTo\r\n\t\t\t\t\turl: '/pagessignup/wechat/wxlog'\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t\tthis.user_type = this.user_data.user_type;\r\n\t\t\tthis.changeStatus(); //修改已读未读消息\r\n\t\t\tthis.addFriend()\r\n\t\t\tthis.getMsgList(); //获取聊天记录\r\n\t\t\tsetTimeout(() => { // 创建连接只能同时创建一次\r\n\t\t\t\tthis.connectSocket();\r\n\t\t\t}, 500)\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tmsg_img(msg) {\r\n\t\t\t\tlet str = '';\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (msg.indexOf('img[') >= 0) {\r\n\t\t\t\t\t\tstr = msg.substr(4, msg.length - 5);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tthis.changeStatus();\r\n\t\t\t// 刷新消息角标\r\n\t\t\tuni.$emit('updata', {});\r\n\t\t\tif (innerAudioContext) {\r\n\t\t\t\tinnerAudioContext.stop();\r\n\t\t\t}\r\n\t\t\tuni.$emit('openAll', {})\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 举报\r\n\t\t\ttoReport(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pagesHome/complaint?job_id='+this.kf_id+'&&job_type=1'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thideKeyboard(e) {\r\n\t\t\t\t//隐藏软键盘\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tthis.onKeyboard = false;\r\n\t\t\t},\r\n\t\t\tlineChange(e) {\r\n\t\t\t\t//监听高度\r\n\t\t\t\tif (e.detail.lineCount > 3) {\r\n\t\t\t\t\tthis.autoHeight = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddFriend(id) { //进页面添加好友\r\n\t\t\t\tif (id != 1) {\r\n\t\t\t\t\tthis.$Request.post(this.$api.msg.addFriend, {\r\n\t\t\t\t\t\tuser_id: this.kf_id,\r\n\t\t\t\t\t\tjob_position_id: this.job_position_id\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (res.code == 1) {}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tconnectSocket() { //接收消息  创建连接\r\n\t\t\t\tlet that = this\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tuni.connectSocket({\r\n\t\t\t\t\t// url: this.$Request.config('WS_HOST')\r\n\t\t\t\t\turl: 'wss://websocket.chongdarenli.com?from_id=' + this.user.id + '&to_id=' + this.kf_id\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\tuni.connectSocket({\r\n\t\t\t\t\turl: 'ws://123.56.143.238:9502?from_id=' + this.user.id + '&to_id=' + this.kf_id\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// uni.connectSocket({\r\n\t\t\t\t//     //创建连接\r\n\t\t\t\t//     url: 'ws://123.56.143.238:9502?from_id='+this.user.id+'&to_id='+this.kf_id\r\n\t\t\t\t// });\r\n\t\t\t\tconsole.log('websocket已打开')\r\n\t\t\t\tuni.onSocketOpen(function(res) {\r\n\t\t\t\t\t// 登录\r\n\t\t\t\t\tvar login_data =\r\n\t\t\t\t\t\t'{\"type\":\"userInit\", \"uid\": ' + that.user_data.id +\r\n\t\t\t\t\t\t', \"name\" : \"' + that.user.name +\r\n\t\t\t\t\t\t'\", \"avatar\" : \"' + that.user.avatar +\r\n\t\t\t\t\t\t'\", \"group\" : ' + that.user.group +\r\n\t\t\t\t\t\t', \"user_type\" : ' + that.user_type + '}';\r\n\t\t\t\t\tsocketOpen = true;\r\n\t\t\t\t\tfor (var i = 0; i < socketMsgQueue.length; i++) {\r\n\t\t\t\t\t\tthat.sendSocketMessage(socketMsgQueue[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsocketMsgQueue = [];\r\n\t\t\t\t\t// 刷新 tiken 10 秒一次保持心跳\r\n\t\t\t\t\tsetInterval(function() {\r\n\t\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\t\tdata: 'pong',\r\n\t\t\t\t\t\t\tsuccess: function(res) {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 10000);\r\n\t\t\t\t});\r\n\t\t\t\tuni.onSocketError(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket连接打开失败，请检查！');\r\n\r\n\t\t\t\t});\r\n\t\t\t\tuni.onSocketMessage(function(res) {\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t// 非心跳\r\n\t\t\t\t\tif (res.data != 'success') {\r\n\t\t\t\t\t\tthat.changeStatus();\r\n\t\t\t\t\t\tvar arr = JSON.parse(res.data)\r\n\t\t\t\t\t\tif (!arr) {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tuni.$emit('updata', {}) //通知消息列表刷新数据\n\t\t\t\t\t\tconsole.log(arr);\r\n\t\t\t\t\t\t// 接收消息\r\n\t\t\t\t\t\tif (arr.event == 'saveMessage' || arr.event == 'message') {\r\n\t\t\t\t\t\t\tthat.msgList.push(arr);\r\n\t\t\t\t\t\t\tthat.msgList.map((item, index) => {\n\t\t\t\t\t\t\t\titem.updateTime = this.$Common.formatTime(item.update_time, 'Y-M-D h:m:s')\t\t\t\r\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(that.msgList);\r\n\t\t\t\t\t\t\tthat.$nextTick(function() {\r\n\t\t\t\t\t\t\t\tthat.scrollToView = 'msg2';\r\n\t\t\t\t\t\t\t\tthat.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t\tthat.scrollAnimation = true;\r\n\t\t\t\t\t\t\t\t\tthat.scrollToView = 'msg' + that.msgList[that.msgList.length -\r\n\t\t\t\t\t\t\t\t\t\t1].aid;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// console.log(that.scrollToView,'============')\r\n\t\t\t\t\t\t\t\tuni.$emit('updata', {}) //通知消息列表刷新数据\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (arr.event == 'getOfflineMessage') { // 读取消息列表\r\n\t\t\t\t\t\t\t// that.msgList = arr.msgs;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tuni.onSocketClose(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket 已关闭！', res);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetMsgList() {\r\n\t\t\t\t// 读取本地聊天记录\r\n\t\t\t\tlet that = this\r\n\t\t\t\tif (this.isLoading) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet kf_id = that.kf_id;\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\tthis.$Request\r\n\t\t\t\t\t.post(this.$api.msg.msg_List, {\r\n\t\t\t\t\t\tto_id: kf_id,\r\n\t\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\t\tlist_rows: 30\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthat.addFriend(kf_id);\r\n\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\tif (res.data.data.length > 0) {\r\n\t\t\t\t\t\t\t\tlet arr = res.data.data,\r\n\t\t\t\t\t\t\t\t\toldId;\r\n\t\t\t\t\t\t\t\tarr.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\titem['id'] = index + 1;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t// if(that.msgList==''){\r\n\t\t\t\t\t\t\t\toldId = arr[arr.length - 1].aid\r\n\t\t\t\t\t\t\t\t// }else{\r\n\t\t\t\t\t\t\t\t// \toldId=that.msgList[that.msgList.length-1].id\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\tthat.msgList = [...arr, ...that.msgList]\r\n\t\t\t\t\t\t\t\tthat.msgList.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\titem.updateTime = this.$Common.formatTime(item.create_time, 'Y-M-D h:m:s')\r\n\t\t\t\t\t\t\t\t\titem['id'] = index + 1;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthat.$nextTick(function() {\r\n\t\t\t\t\t\t\t\t\tthat.scrollAnimation = false;\r\n\t\t\t\t\t\t\t\t\tthat.scrollToView = 'msg2';\r\n\t\t\t\t\t\t\t\t\tthat.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t\t\tthat.scrollToView = 'msg' + oldId;\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.scrollAnimation = true;\r\n\t\t\t\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t// this.msgList = arr;\r\n\t\t\t\t\t\t\t\tif (res.data.last_page <= that.page) {\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.page++\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.msgList = this.msg_code;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendSocketMessage(msg) { //发送消息\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (socketOpen) {\r\n\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: msg,\r\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tlet arr = JSON.parse(msg);\r\n\t\t\t\t\t\t\tif (!arr) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.msgList.push(arr);\r\n\t\t\t\t\t\t\t// console.log(that.msgList,'===')\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tthat.$Common.toast('连接失败，请退出重试')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsocketMsgQueue.push(msg);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 发送消息\r\n\t\t\tsendMsg(content, type) {\r\n\t\t\t\tvar nowDate = new Date();\r\n\t\t\t\tlet lastid = this.msgList.length;\r\n\t\t\t\tlastid++;\r\n\t\t\t\tlet dataTime = ''\r\n\t\t\t\tdataTime = new Date().getTime()\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\tid: lastid,\r\n\t\t\t\t\taid: dataTime,\r\n\t\t\t\t\tusername: this.user.name,\r\n\t\t\t\t\tface: this.user.avatar,\r\n\t\t\t\t\ttime: nowDate.getHours() + ':' + nowDate.getMinutes(),\r\n\t\t\t\t\tmsg_type: type,\r\n\t\t\t\t\tto_id: parseInt(kf_id),\r\n\t\t\t\t\tmsg: content,\r\n\t\t\t\t\tfrom_name: this.user.name,\r\n\t\t\t\t\tfrom_avatar: this.user.avatar,\r\n\t\t\t\t\tupdateTime: this.$Common.formatTime(dataTime, 'Y-M-D h:m:s')\r\n\t\t\t\t};\r\n\t\t\t\t// 接收  自己发送的\r\n\t\t\t\tthis.screenMsg(msg);\r\n\t\t\t\tlet send_data = JSON.stringify({\r\n\t\t\t\t\tid: lastid,\r\n\t\t\t\t\taid: dataTime,\r\n\t\t\t\t\tevent: 'saveMessage',\r\n\t\t\t\t\tto_id: parseInt(kf_id),\r\n\t\t\t\t\tto_name: kf_name,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tmsg_type: type,\r\n\t\t\t\t\tfrom_name: this.user.name,\r\n\t\t\t\t\tfrom_id: this.user.id,\r\n\t\t\t\t\tfrom_avatar: this.user.avatar,\r\n\t\t\t\t\t// user_type: this.massage_type\r\n\t\t\t\t\tupdateTime: this.$Common.formatTime(dataTime / 1000, 'Y-M-D h:m:s')\r\n\t\t\t\t});\r\n\t\t\t\t// console.log(this.msgList)\n\t\t\t\tconsole.log(send_data);\r\n\t\t\t\t// 发送\r\n\t\t\t\tthis.sendSocketMessage(send_data);\r\n\t\t\t},\r\n\r\n\t\t\t//处理图片尺寸，如果不处理宽高，新进入页面加载图片时候会闪\r\n\t\t\tsetPicSize(row) {\r\n\t\t\t\tif (typeof row.msg == 'object') {\r\n\t\t\t\t\treturn row;\r\n\t\t\t\t}\r\n\t\t\t\tlet url = row.msg;\r\n\t\t\t\tlet pa = /.*\\[(.*)\\]/;\r\n\t\t\t\tlet path = url.match(pa) ? url.match(pa)[1] : '';\r\n\t\t\t\trow.msg = path || row.msg;\r\n\t\t\t\treturn row;\r\n\t\t\t\t/* 下方为原始逻辑，已废弃 */\r\n\t\t\t\tlet maxW = uni.upx2px(350);\r\n\t\t\t\tlet maxH = uni.upx2px(350);\r\n\t\t\t\tif (row.msg.w > maxW || row.msg.h > maxH) {\r\n\t\t\t\t\tlet scale = row.msg.w / row.msg.h;\r\n\t\t\t\t\tif (row.msg.w > row.msg.h) {\r\n\t\t\t\t\t\trow.msg.w = maxW;\r\n\t\t\t\t\t\trow.msg.h = row.msg.w / scale;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trow.msg.h = maxH;\r\n\t\t\t\t\t\trow.msg.w = row.msg.h * scale;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn row;\r\n\t\t\t},\r\n\t\t\tchangeStatus() {\r\n\t\t\t\t//修改已读未读\r\n\t\t\t\tthis.$Request.post(this.$api.msg.user_token_msg, {\r\n\t\t\t\t\tfrom_id: this.kf_id\r\n\t\t\t\t}).then(res => {});\r\n\t\t\t},\r\n\t\t\t// 接受消息(筛选处理)\r\n\t\t\tscreenMsg(msg) {\r\n\t\t\t\tthis.changeStatus();\r\n\t\t\t\tuni.$emit('updata', {});\r\n\t\t\t\t//从长连接处转发给这个方法，进行筛选处理\r\n\t\t\t\tif (msg.uid != this.myuid) {}\r\n\t\t\t\t// let oldId=msg.id+1\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthat.scrollToView = 'msg2';\r\n\t\t\t\t\tthat.$nextTick(() => {\r\n\t\t\t\t\t\tthat.scrollAnimation = true;\r\n\t\t\t\t\t\tthat.scrollToView = 'msg' + msg.aid;\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tswitch (msg.type) {\r\n\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\tthis.addTextMsg(msg);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'voice':\r\n\t\t\t\t\t\tthis.addVoiceMsg(msg);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'img':\r\n\t\t\t\t\t\tthis.addImgMsg(msg);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// case 'msg':\r\n\t\t\t\t\t\t// \tthis.addResume(msg);\r\n\t\t\t\t\t\t// \tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// plus.audio.createPlayer(\"/static/wangwang.mp3\").play();  铃声提示\r\n\t\t\t},\r\n\t\t\t// 选择表情\r\n\t\t\tchooseEmoji() {\r\n\t\t\t\tthis.hideKeyboard(); //隐藏软键盘\r\n\t\t\t\tthis.showEmji = this.showEmji == 'showEmoji' ? 'hideEmoji' : 'showEmoji';\r\n\t\t\t},\r\n\t\t\t// 隐藏表情\r\n\t\t\thideEmoji() {\r\n\t\t\t\tthis.showEmji = this.showEmji == 'showEmoji' ? 'hideEmoji' : '';\r\n\t\t\t\tthis.hideKeyboard(); //隐藏软键盘\r\n\t\t\t},\r\n\t\t\t//添加表情\r\n\t\t\taddEmoji(em) {\r\n\t\t\t\tthis.textMsg += em.alt;\r\n\t\t\t},\r\n\t\t\tsendText() {\r\n\t\t\t\t// 发送文字消息\r\n\t\t\t\tthis.hideEmoji();\r\n\t\t\t\tif (!this.textMsg) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet content = this.replaceEmoji(this.textMsg);\r\n\t\t\t\tthis.sendMsg(content, 'text');\r\n\t\t\t\tthis.textMsg = '';\r\n\t\t\t},\r\n\t\t\t//替换表情符号为图片\r\n\t\t\treplaceEmoji(str) {\r\n\t\t\t\tif (this.massage_type != 1) {\r\n\t\t\t\t\tstr = str.replace(/emoji/g, ' '); // 去除 emoji 这个字符串\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstr = this.sysReplaceEmoji(str);\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(str, '1');\r\n\t\t\t\tlet replacedStr = str.replace(/\\[([^(\\]|\\[)]*)\\]/g, (item, index) => {\r\n\t\t\t\t\tfor (let i = 0; i < this.emojiList.length; i++) {\r\n\t\t\t\t\t\tlet row = this.emojiList[i];\r\n\t\t\t\t\t\tfor (let j = 0; j < row.length; j++) {\r\n\t\t\t\t\t\t\tlet EM = row[j];\r\n\t\t\t\t\t\t\tif (EM.alt == item) {\r\n\t\t\t\t\t\t\t\t//在线表情路径，图文混排必须使用网络路径\r\n\t\t\t\t\t\t\t\tlet onlinePath = this.IMG_URL + 'static/images//emoji/';\r\n\t\t\t\t\t\t\t\tlet imgstr = '<img src=\"' + onlinePath + EM.url + '\">';\r\n\t\t\t\t\t\t\t\treturn imgstr;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn replacedStr;\r\n\t\t\t},\r\n\t\t\tsysReplaceEmoji(content) {\r\n\t\t\t\tcontent = (content || '')\r\n\t\t\t\t\t.replace(/&(?!#?[a-zA-Z0-9]+;)/g, '&amp;')\r\n\t\t\t\t\t// .replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/'/g, '&#39;').replace(/\"/g, '&quot;') // XSS\r\n\t\t\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t\t\t.replace(/&gt;/g, '>')\r\n\t\t\t\t\t.replace(/&#39;/g, \"'\")\r\n\t\t\t\t\t.replace(/&quot;/g, '\"') // XSS\r\n\t\t\t\t\t.replace(/@(\\S+)(\\s+?|$)/g, '@<a href=\"javascript:;\">$1</a>$2') // 转义@\r\n\t\t\t\t\t.replace(/emoji\\[([^\\s\\[\\]]+?)\\]/g, function(face) {\r\n\t\t\t\t\t\t// 转义表情\r\n\t\t\t\t\t\tvar alt = face.replace(/^emoji/g, '');\r\n\t\t\t\t\t\treturn '<img alt=\"' + alt + '\" title=\"' + alt + '\" src=\"' + faces[alt] + '\">';\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.replace(/img\\[([^\\s]+?)\\]/g, function(img) {\r\n\t\t\t\t\t\t// 转义图片\r\n\t\t\t\t\t\treturn '<img class=\"layui-whisper-photos\" src=\"' + img.replace(/(^img\\[)|(\\]$)/g, '') +\r\n\t\t\t\t\t\t\t'\" width=\"100px\" height=\"100px\">';\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.replace(/file\\([\\s\\S]+?\\)\\[[\\s\\S]*?\\]/g, function(str) {\r\n\t\t\t\t\t\t// 转义文件\r\n\t\t\t\t\t\tvar href = (str.match(/file\\(([\\s\\S]+?)\\)\\[/) || [])[1];\r\n\t\t\t\t\t\tvar text = (str.match(/\\)\\[([\\s\\S]*?)\\]/) || [])[1];\r\n\t\t\t\t\t\tif (!href) return str;\r\n\t\t\t\t\t\treturn '<a class=\"layui-whisper-file\" href=\"' + href +\r\n\t\t\t\t\t\t\t'\" download target=\"_blank\"><i class=\"layui-icon\">&#xe61e;</i><cite>' + (text || href) +\r\n\t\t\t\t\t\t\t'</cite></a>';\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.replace(/\\n/g, '<br>'); // 转义换行\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\t// 选择图片发送\r\n\t\t\tchooseImage() {\r\n\t\t\t\tthis.hideEmoji();\r\n\t\t\t\tthis.$Request.uploadImg(res => {\r\n\t\t\t\t\tlet msg = 'img[' + res.data[0].path + ']';\r\n\t\t\t\t\tthis.sendMsg(msg, 'img');\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t// 添加系统文字消息到列表\r\n\t\t\taddSystemTextMsg(msg) {\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t// 处理文字消息\r\n\t\t\taddTextMsg(msg) {\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\r\n\t\t\t// 处理语音消息\r\n\t\t\taddVoiceMsg(msg) {\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t// 处理图片消息\r\n\t\t\taddImgMsg(msg) {\r\n\t\t\t\tlet setMsg = this.setPicSize(msg);\r\n\t\t\t\tthis.msgImgList.push(setMsg.msg);\r\n\t\t\t\tthis.msgList.push(setMsg);\r\n\t\t\t},\r\n\t\t\t// 预览图片\r\n\t\t\tshowPic(row, ) {\r\n\t\t\t\tlet str = [];\r\n\t\t\t\tlet imgurl = row.content;\r\n\t\t\t\tif (imgurl.indexOf('img[') >= 0) {\r\n\t\t\t\t\tstr.push(imgurl.substr(4, imgurl.length - 5));\r\n\t\t\t\t}\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tindicator: 'none',\r\n\t\t\t\t\tcurrent: imgurl,\r\n\t\t\t\t\turls: str\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 播放语音\r\n\t\t\tplayVoice(msg) {\r\n\t\t\t\t//暂停功能暂时不可用\r\n\t\t\t\t// if(this.isstop==false){  \r\n\t\t\t\t// \t innerAudioContext.stop();\r\n\t\t\t\t// \t return\r\n\t\t\t\t// }\r\n\t\t\t\tinnerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = JSON.parse(msg.content).url;\r\n\t\t\t\tinnerAudioContext.onPlay(() => {});\r\n\t\t\t},\r\n\t\t\t// 录音开始\r\n\t\t\tvoiceBegin(e) {\r\n\t\t\t\tlet _self = this;\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\trecorderManager.start();\r\n\t\t\t\tthis.initPoint.Y = e.touches[0].clientY;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tuni.uploadFile({ //上传后台\r\n\t\t\t\t\turl: this.BASE_URL + _self.$api.common.upload,\r\n\t\t\t\t\tfilePath: '_doc/uniapp_save/1602033561081.mp3',\r\n\t\t\t\t\tname: 'file[]',\r\n\t\t\t\t\tformData: {},\r\n\t\t\t\t\tsuccess: function(upRes) { //上传成功\r\n\t\t\t\t\t\t//uni.hideLoading();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '语音上传失败，请稍后再试.' + err.errMsg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t// if (e.touches.length > 1) {\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\t\t\t\t// this.initPoint.identifier = e.touches[0].identifier;\r\n\t\t\t\t// this.RECORDER.start({ format: 'aac' }); //录音开始,\r\n\t\t\t},\r\n\t\t\t//录音开始UI效果\r\n\t\t\trecordBegin(e) {\r\n\t\t\t\tthis.recording = true;\r\n\t\t\t\tthis.voiceTis = '松开 结束';\r\n\t\t\t\tthis.recordLength = 0;\r\n\t\t\t\tthis.recordTimer = setInterval(() => {\r\n\t\t\t\t\tthis.recordLength++;\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t// 录音被打断\r\n\t\t\tvoiceCancel() {\r\n\t\t\t\t// \tthis.recording = false;\r\n\t\t\t\t// \tthis.voiceTis = '按住 说话';\r\n\t\t\t\t// \tthis.recordTis = '手指上滑 取消发送';\r\n\t\t\t\t// \tthis.willStop = true; //不发送录音\r\n\t\t\t\t// \trecorderManager.stop();\r\n\t\t\t},\r\n\t\t\t// 录音中(判断是否触发上滑取消发送)\r\n\t\t\tvoiceIng(e) {\r\n\t\t\t\tif (!this.recording) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet touche = e.touches[0];\r\n\t\t\t\t//上滑一个导航栏的高度触发上滑取消发送\r\n\t\t\t\tif (this.initPoint.Y - touche.clientY >= uni.upx2px(100)) {\r\n\t\t\t\t\tthis.willStop = true;\r\n\t\t\t\t\tthis.recordTis = '松开手指 取消发送';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.willStop = false;\r\n\t\t\t\t\tthis.recordTis = '手指上滑 取消发送';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 结束录音\r\n\t\t\tvoiceEnd(e) {\r\n\t\t\t\tif (!this.recording) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.voiceTis = '按住 说话';\r\n\t\t\t\tthis.recordTis = '手指上滑 取消发送';\r\n\t\t\t\t// this.RECORDER.stop(); //录音结束\r\n\t\t\t\trecorderManager.stop();\r\n\t\t\t},\r\n\t\t\t//录音结束(回调文件)\r\n\t\t\tasync recordEnd(res) {\r\n\t\t\t\tclearInterval(this.recordTimer);\r\n\t\t\t\tlet _self = this\r\n\t\t\t\tif (!_self.willStop) {\r\n\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\tlength: 0,\r\n\t\t\t\t\t\turl: res,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet data = {}\r\n\t\t\t\t\tlet min = parseInt(this.recordLength / 60);\r\n\t\t\t\t\tlet sec = _self.recordLength % 60;\r\n\t\t\t\t\tmin = min < 10 ? '0' + min : min;\r\n\t\t\t\t\tsec = sec < 10 ? '0' + sec : sec;\r\n\t\t\t\t\tmsg.length = min + ':' + sec;\r\n\t\t\t\t\tif (min <= 0 && sec <= 0) {\r\n\t\t\t\t\t\tthis.$Common.toast('录音时间过短')\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet fileList = {}\r\n\t\t\t\t\t// let url = plus.io.convertLocalFileSystemURL(res.tempFilePath);\t\t\t\t\r\n\t\t\t\t\tlet url = res;\r\n\t\t\t\t\tfileList['uploadTask'] = uni.uploadFile({ //上传后台\r\n\t\t\t\t\t\turl: this.BASE_URL + _self.$api.common.singupAudio,\r\n\t\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\t\tname: 'file[]',\r\n\t\t\t\t\t\tformData: data,\r\n\t\t\t\t\t\tsuccess: function(upRes) { //上传成功\r\n\t\t\t\t\t\t\t//uni.hideLoading();\r\n\t\t\t\t\t\t\tif (upRes.statusCode == 200) {\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(upRes.data);\r\n\t\t\t\t\t\t\t\tmsg.url = data.data[0].path\r\n\t\t\t\t\t\t\t\tlet sendMsg = JSON.stringify(msg)\r\n\t\t\t\t\t\t\t\tconsole.log(sendMsg, '----语音信息======')\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t_self.sendMsg(sendMsg, 'voice');\r\n\t\t\t\t\t\t\t\t}, 100)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: upRes.errMsg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '音频上传失败，请稍后再试.' + err.errMsg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else {}\r\n\t\t\t\tthis.willStop = false;\r\n\t\t\t},\r\n\t\t\t// 切换语音/文字输入\r\n\t\t\tswitchVoice() {\r\n\t\t\t\tthis.hideEmoji();\r\n\t\t\t\tthis.isVoice = this.isVoice ? false : true;\r\n\t\t\t},\r\n\t\t\tdiscard() {\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tgetCacheChat(key) {\r\n\t\t\t\treturn uni.getStorageSync(key);\r\n\t\t\t},\r\n\t\t\tsetCacheChat(obj) {\r\n\t\t\t\tuni.setStorageSync(obj.key, obj.data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground-color: #f7f7f7;\r\n\t}\r\n\r\n\t.fixed {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\ttop: 0;\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tpadding: 2rpx 8rpx;\r\n\t\tborder: 1rpx solid #74b0ff;\r\n\t\tfont-size: 24rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t\tcolor: #74b0ff;\r\n\t}\r\n\r\n\t.prop_ios {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 999;\r\n\t\twidth: 100%;\r\n\t\theight: calc(100% - 100upx);\r\n\t\tbackground: rgba(0, 0, 0, 0);\r\n\t}\r\n\r\n\t@font-face {\r\n\t\tfont-family: 'HMfont-home';\r\n\t\tsrc: url('data:application/x-font-woff2;charset=utf-8;base64,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') format('woff2');\r\n\t}\r\n\r\n\t.icon {\r\n\t\tfont-family: 'HMfont-home' !important;\r\n\t\tfont-size: 56upx;\r\n\t\tfont-style: normal;\r\n\t\tcolor: #333;\r\n\r\n\t\t&.biaoqing:before {\r\n\t\t\tcontent: '\\e797';\r\n\t\t}\r\n\r\n\t\t&.jianpan:before {\r\n\t\t\tcontent: '\\e7b2';\r\n\t\t}\r\n\r\n\t\t&.yuyin:before {\r\n\t\t\tcontent: '\\e805';\r\n\t\t}\r\n\r\n\t\t&.tupian:before {\r\n\t\t\tcontent: '\\e639';\r\n\t\t}\r\n\r\n\t\t&.chehui:before {\r\n\t\t\tcontent: '\\e904';\r\n\t\t}\r\n\r\n\t\t&.luyin:before {\r\n\t\t\tcontent: '\\e905';\r\n\t\t}\r\n\r\n\t\t&.luyin2:before {\r\n\t\t\tcontent: '\\e677';\r\n\t\t}\r\n\r\n\t\t&.other-voice:before {\r\n\t\t\tcontent: '\\e667';\r\n\t\t}\r\n\r\n\t\t&.my-voice:before {\r\n\t\t\tcontent: '\\e906';\r\n\t\t}\r\n\t}\r\n\r\n\t.hidden {\r\n\t\tdisplay: none !important;\r\n\t}\r\n\r\n\t@keyframes showEM {\r\n\t\t0% {\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translateY(-42vw);\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes hideEM {\r\n\t\t0% {\r\n\t\t\ttransform: translateY(-42vw);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\r\n\t.emoji-box {\r\n\t\t&.hideEmoji {\r\n\t\t\tanimation: hideEM 0.15s linear both;\r\n\t\t}\r\n\r\n\t\t&.showEmoji {\r\n\t\t\tanimation: showEM 0.15s linear both;\r\n\t\t}\r\n\r\n\t\twidth: 100%;\r\n\t\theight: 42vw;\r\n\t\tpadding: 20upx 2%;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top: solid 1upx #ddd;\r\n\t\tposition: fixed;\r\n\t\tz-index: 20;\r\n\t\ttop: 100%;\r\n\r\n\t\t.swiper {\r\n\t\t\tswiper-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t\tview {\r\n\t\t\t\t\twidth: 12vw;\r\n\t\t\t\t\theight: 12vw;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 60%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.hidden {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.input-box {\r\n\t\t&.hideEmoji {\r\n\t\t\tanimation: hideEM 0.15s linear both;\r\n\t\t}\r\n\r\n\t\t&.showEmoji {\r\n\t\t\tanimation: showEM 0.15s linear both;\r\n\t\t}\r\n\r\n\t\timage {\r\n\t\t\twidth: 48upx;\r\n\t\t\theight: 48upx;\r\n\t\t}\r\n\r\n\t\twidth: 100%;\r\n\t\tmin-height: 100upx;\r\n\t\t// max-height: 300upx;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 20upx 1%;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tposition: fixed;\r\n\t\tz-index: 20;\r\n\t\tbottom: 0;\r\n\r\n\t\t.voice,\r\n\t\t.more {\r\n\t\t\tflex-shrink: 0;\r\n\t\t\twidth: 72upx;\r\n\t\t\theight: 70upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 60upx;\r\n\t\t\t\theight: 60upx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.send {\r\n\t\t\t//H5发送按钮左边距\r\n\t\t\t/* #ifdef H5 */\r\n\t\t\tmargin-left: 20upx;\r\n\t\t\t/* #endif */\r\n\t\t\tflex-shrink: 0;\r\n\t\t\twidth: 100upx;\r\n\t\t\theight: 70upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.btn {\r\n\t\t\t\twidth: 90upx;\r\n\t\t\t\theight: 56upx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tbackground: #338fff;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tborder-radius: 6upx;\r\n\t\t\t\tfont-size: 24upx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.textbox {\r\n\t\t\twidth: 82%;\r\n\t\t\tmin-height: 70upx;\r\n\r\n\t\t\t.voice-mode {\r\n\t\t\t\twidth: calc(100% - 2upx);\r\n\t\t\t\theight: 68upx;\r\n\t\t\t\tborder-radius: 70upx;\r\n\t\t\t\tborder: solid 1upx #cdcdcd;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-size: 28upx;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tcolor: #555;\r\n\r\n\t\t\t\t&.recording {\r\n\t\t\t\t\tbackground-color: #e5e5e5;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.text-mode {\r\n\t\t\t\twidth: 96%;\r\n\t\t\t\tmin-height: 70upx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: flex-end;\r\n\t\t\t\tbackground-color: #f7f7f7;\r\n\t\t\t\tborder-radius: 40upx;\r\n\r\n\t\t\t\t.box {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tpadding-left: 30upx;\r\n\t\t\t\t\tmin-height: 70upx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\ttextarea {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tmin-height: 56upx !important;\r\n\t\t\t\t\t\tmax-height: 210upx;\r\n\t\t\t\t\t\theight: 35upx;\r\n\t\t\t\t\t\tline-height: 1.7;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.em {\r\n\t\t\t\t\tflex-shrink: 0;\r\n\t\t\t\t\twidth: 80upx;\r\n\t\t\t\t\theight: 70upx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.record {\r\n\t\twidth: 40vw;\r\n\t\theight: 40vw;\r\n\t\tposition: fixed;\r\n\t\ttop: 55%;\r\n\t\tleft: 30%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\t\tborder-radius: 20upx;\r\n\r\n\t\t.ing {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 30vw;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t@keyframes volatility {\r\n\t\t\t\t0% {\r\n\t\t\t\t\tbackground-position: 0% 130%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t20% {\r\n\t\t\t\t\tbackground-position: 0% 150%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t30% {\r\n\t\t\t\t\tbackground-position: 0% 155%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t40% {\r\n\t\t\t\t\tbackground-position: 0% 150%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t50% {\r\n\t\t\t\t\tbackground-position: 0% 145%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t70% {\r\n\t\t\t\t\tbackground-position: 0% 150%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t80% {\r\n\t\t\t\t\tbackground-position: 0% 155%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t90% {\r\n\t\t\t\t\tbackground-position: 0% 140%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t100% {\r\n\t\t\t\t\tbackground-position: 0% 135%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.icon {\r\n\t\t\t\tbackground-image: linear-gradient(to bottom, #f09b37, #fff 50%);\r\n\t\t\t\tbackground-size: 100% 200%;\r\n\t\t\t\tanimation: volatility 1.5s ease-in-out -1.5s infinite alternate;\r\n\t\t\t\t-webkit-background-clip: text;\r\n\t\t\t\t-webkit-text-fill-color: transparent;\r\n\t\t\t\tfont-size: 150upx;\r\n\t\t\t\tcolor: #f09b37;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.cancel {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 30vw;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.icon {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 150upx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.tis {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 10vw;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tcolor: #fff;\r\n\r\n\t\t\t&.change {\r\n\t\t\t\tcolor: #f09b37;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.content {\r\n\t\twidth: 100%;\r\n\r\n\t\t.msg-list {\r\n\t\t\twidth: 96%;\r\n\t\t\tpadding: 0 2%;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 100upx;\r\n\t\t\tbottom: 100upx;\r\n\r\n\t\t\t.row {\r\n\t\t\t\t.system {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\r\n\t\t\t\t\tview {\r\n\t\t\t\t\t\tpadding: 0 30upx;\r\n\t\t\t\t\t\theight: 50upx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tbackground-color: #c9c9c9;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\t\tborder-radius: 40upx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.red-envelope {\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\tmargin-right: 5upx;\r\n\t\t\t\t\t\t\twidth: 30upx;\r\n\t\t\t\t\t\t\theight: 30upx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&:first-child {\r\n\t\t\t\t\tmargin-top: 20upx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpadding: 20upx 0;\r\n\r\n\t\t\t\t.my .left,\r\n\t\t\t\t.other .right {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t\t.bubble {\r\n\t\t\t\t\t\tmax-width: 85%;\r\n\t\t\t\t\t\tmin-height: 50upx;\r\n\t\t\t\t\t\tborder-radius: 10upx;\r\n\t\t\t\t\t\tpadding: 15upx 20upx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tfont-size: 32upx;\r\n\t\t\t\t\t\tword-break: break-word;\r\n\r\n\t\t\t\t\t\t&.img {\r\n\t\t\t\t\t\t\tbackground-color: transparent;\r\n\t\t\t\t\t\t\tpadding: 0;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\t\tmax-width: 350upx;\r\n\t\t\t\t\t\t\t\tmax-height: 350upx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&.interview {\r\n\t\t\t\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\t\t\t\tpadding: 20upx 30upx;\r\n\t\t\t\t\t\t\tmin-width: 400upx;\r\n\t\t\t\t\t\t\tborder-radius: 20upx 20upx 0px 20upx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&.voice {\r\n\t\t\t\t\t\t\t.icon {\r\n\t\t\t\t\t\t\t\tfont-size: 40upx;\r\n\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.icon:after {\r\n\t\t\t\t\t\t\t\tcontent: ' ';\r\n\t\t\t\t\t\t\t\twidth: 53upx;\r\n\t\t\t\t\t\t\t\theight: 53upx;\r\n\t\t\t\t\t\t\t\tborder-radius: 100%;\r\n\t\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.length {\r\n\t\t\t\t\t\t\t\tfont-size: 28upx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.my .right,\r\n\t\t\t\t.other .left {\r\n\t\t\t\t\tflex-shrink: 0;\r\n\t\t\t\t\twidth: 80upx;\r\n\t\t\t\t\theight: 80upx;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 80upx;\r\n\t\t\t\t\t\theight: 80upx;\r\n\t\t\t\t\t\tborder-radius: 10upx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.my {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: flex-end;\r\n\r\n\t\t\t\t\t.left {\r\n\t\t\t\t\t\tmin-height: 80upx;\r\n\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: flex-end;\r\n\r\n\t\t\t\t\t\t.bubble {\r\n\t\t\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\t\t\tcolor: #333;\r\n\r\n\t\t\t\t\t\t\t&.voice {\r\n\t\t\t\t\t\t\t\t.icon {\r\n\t\t\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t.length {\r\n\t\t\t\t\t\t\t\t\tmargin-right: 20upx;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&.play {\r\n\t\t\t\t\t\t\t\t@keyframes my-play {\r\n\t\t\t\t\t\t\t\t\t0% {\r\n\t\t\t\t\t\t\t\t\t\ttransform: translateX(80%);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\ttransform: translateX(0%);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t.icon:after {\r\n\t\t\t\t\t\t\t\t\tborder-left: solid 10upx #333;\r\n\t\t\t\t\t\t\t\t\tanimation: my-play 1s linear infinite;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.right {\r\n\t\t\t\t\t\tmargin-left: 15upx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.center {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tfont-size: 12px;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.other {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t\t.left {\r\n\t\t\t\t\t\tmargin-right: 15upx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.right {\r\n\t\t\t\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t\t\t\t.username {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 45upx;\r\n\t\t\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t\t\t\t.name {\r\n\t\t\t\t\t\t\t\tmargin-right: 50upx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.bubble {\r\n\t\t\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\t\t\tcolor: #333;\r\n\r\n\t\t\t\t\t\t\t&.voice {\r\n\t\t\t\t\t\t\t\t.icon {\r\n\t\t\t\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t.length {\r\n\t\t\t\t\t\t\t\t\tmargin-left: 20upx;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&.play {\r\n\t\t\t\t\t\t\t\t@keyframes other-play {\r\n\t\t\t\t\t\t\t\t\t0% {\r\n\t\t\t\t\t\t\t\t\t\ttransform: translateX(-80%);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\ttransform: translateX(0%);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t.icon:after {\r\n\t\t\t\t\t\t\t\t\tborder-right: solid 10upx rgba(255, 255, 255, 0.8);\r\n\r\n\t\t\t\t\t\t\t\t\tanimation: other-play 1s linear infinite;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./userMsg.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.6.4.20220922\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./userMsg.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1668579586044\n      var cssReload = require(\"D:/HBuilderX.3.6.4.20220922/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}