<view class="padding brt_e" style="height:auto;"><block wx:if="{{showLoading}}"><view style="height:100vh;line-height:100vh;font-weight:300;font-size:24rpx;text-align:center;">数据加载中...</view></block><block wx:if="{{!showLoading}}"><view style="display:flex;justify-content:space-around;align-items:center;width:100%;color:#5f5f5f;font-weight:300;"><block wx:if="{{salaryType==2}}"><view data-event-opts="{{[['tap',[['addHourSetting',['$event']]]]]}}" style="flex:1 1 22%;display:flex;flex-direction:row;justify-content:center;align-items:center;padding:8rpx 0;background-color:#007AFF;border-radius:8rpx;" bindtap="__e"><view style="width:42rpx;height:42rpx;border:1px solid #ccc;border-radius:50%;display:flex;justify-content:center;align-items:center;"><view class="text-df cuIcon-add bold _i" style="color:#fff;font-size:24rpx;"></view></view><text style="margin-left:10rpx;color:#fff;font-size:24rpx;">添加</text></view></block><view style="{{'padding-left:2%;display:flex;align-items:center;'+(salaryType==2?'flex: 1 1 76%;':'flex: 1 1 100%')}}"><text style="margin-right:15rpx;">考勤周期设置</text><picker style="{{(salaryType==2?'width: 60%;':'width: 69%;')}}" mode="selector" range="{{range}}" value="{{periodIndex}}" data-event-opts="{{[['change',[['selectDateRange',['$event']]]]]}}" bindchange="__e"><view style="display:flex;justify-content:space-around;align-items:center;"><view class="uni-input" style="flex:1 1 90%;">{{range[periodIndex]}}</view><uni-icons vue-id="19457004-1" type="forward" size="24" bind:__l="__l"></uni-icons></view></picker></view></view></block><view style="margin-top:30rpx;"><block wx:if="{{salaryType==0}}"><view><form data-event-opts="{{[['submit',[['formSubmit',['$event']]]]]}}" class="grace-form grace-margin-top " bindsubmit="__e"><view class=" cu-list menu sm-border"><view style="border:1px dotted #ccc;padding:30rpx;border-radius:16rpx;"><view class=" flex align-center ptb10" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:36%;text-align:right;"><text class="text-red text-xl">*</text><text>小时工资</text></view><input class="input" style="width:52%;" type="digit" name="hourWorkPrice" placeholder="请输入小时工资" placeholder-style="{{hourWorkPrice?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','hourWorkPrice','$event',[]]]]]]}}" value="{{hourWorkPrice}}" bindinput="__e"/><text>元/时</text></view><view class="pt10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:36%;text-align:right;"><text>全勤奖励设置</text></view><view data-event-opts="{{[['tap',[['addRule',['$event']]]]]}}" style="width:48rpx;height:48rpx;line-height:48rpx;text-align:center;border:1px solid #ccc;border-radius:50%;" bindtap="__e"><uni-icons vue-id="19457004-2" type="plusempty" size="24upx" color="#ccc" bind:__l="__l"></uni-icons></view></view><view style="font-size:24rpx;background-color:#e43d33;color:#fff;font-weight:500;padding:20rpx 30rpx;border-radius:8rpx;margin:20rpx 0 0;">根据您的需要点击上面+号设置全勤奖，可设置多级，也可不设置。</view><block wx:for="{{workRuleList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="display:flex;justify-content:space-around;align-items:center;margin-top:30rpx;"><view style="flex:1 1 40%;display:flex;justify-content:space-around;align-items:center;"><text>全勤</text><input class="input" style="width:50%;" type="number" name="fullDay" placeholder="请输入全勤天数" placeholder-style="{{item.fullDay?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['$0','fullDay','$event',[]],[[['workRuleList','',index]]]]]]]}}" value="{{item.fullDay}}" bindinput="__e"/><text>天</text></view><view style="flex:1 1 40%;display:flex;justify-content:space-around;align-items:center;"><text>奖励</text><input class="input" style="width:50%;" type="number" name="fullMoney" placeholder="请输入全勤奖励" placeholder-style="{{item.fullMoney?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['$0','fullMoney','$event',[]],[[['workRuleList','',index]]]]]]]}}" value="{{item.fullMoney}}" bindinput="__e"/><text>元</text></view><view style="flex:1 1 20%;display:flex;justify-content:flex-end;align-items:center;"><view data-event-opts="{{[['tap',[['delRule',['$0',index],[[['workRuleList','',index,'id']]]]]]]}}" style="font-size:24rpx;padding:4rpx 10rpx;border-radius:8rpx;background-color:#e43d33;color:#fff;" bindtap="__e">取消</view></view></view></block></view></view><view style="margin-top:30rpx;background-color:#e43d33;padding:30rpx 20rpx;border-radius:16rpx;color:#fff;line-height:1.2em;"><view style="font-size:24rpx;font-weight:500;">如实际情况不是按默认倍数计算，可在记工时时手动输入工资</view></view></view><view style="padding:10rpx 0;"><button class="btn_next round " style="width:100%;margin:0 auto;margin-top:20rpx;" form-type="submit">确认提交</button></view></form></view></block><block wx:if="{{salaryType==1}}"><view><form data-event-opts="{{[['submit',[['formSubmit',['$event']]]]]}}" class="grace-form grace-margin-top " bindsubmit="__e"><view class="cu-list menu sm-border"><view style="border:1px dotted #ccc;padding:10rpx;border-radius:16rpx;"><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>月基本工资</text></view><input class="input" style="width:48%;" type="digit" name="fulltimeWorkSalary" placeholder="请输入月基本工资" placeholder-style="{{fulltimeWorkSalary?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','fulltimeWorkSalary','$event',[]]],['e0',['$event']]]]]}}" value="{{fulltimeWorkSalary}}" bindinput="__e"/><text>元/月</text></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>每月上班天数</text></view><input class="input" style="width:62%;" type="digit" name="monthDay" placeholder="请输入每月上班天数" placeholder-style="{{monthDay?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','monthDay','$event',[]]],['e1',['$event']]]]]}}" value="{{monthDay}}" bindinput="__e"/><text>天</text></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>每日工作时长</text></view><input class="input" style="width:63%;" type="digit" name="dayWorkLong" placeholder="请输入日工作时长" placeholder-style="{{dayWorkLong?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','dayWorkLong','$event',[]]],['e2',['$event']]]]]}}" value="{{dayWorkLong}}" bindinput="__e"/><text>时</text></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>每小时工资</text></view><input class="input" style="width:48%;" type="digit" name="hourWorkPrice" placeholder="请输入小时工资" placeholder-style="{{hourWorkPrice?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','hourWorkPrice','$event',[]]]]]]}}" value="{{hourWorkPrice}}" bindinput="__e"/><text>元/时</text></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>平时加班倍数</text></view><input class="input" style="width:50%;" type="digit" name="commonWorkRatio" placeholder="请输入平时加班倍数" placeholder-style="{{commonWorkRatio?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','commonWorkRatio','$event',[]]]]]]}}" value="{{commonWorkRatio}}" bindinput="__e"/><text>倍</text><view style="flex:1 1 100%;text-align:right;">{{commonWorkPrice+"元/时"}}</view></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>周六日加班倍数</text></view><input class="input" style="width:50%;" type="digit" name="hourWorkWeekendRatio" placeholder="请输入周末加班倍数" placeholder-style="{{hourWorkWeekendRatio?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','hourWorkWeekendRatio','$event',[]]]]]]}}" value="{{hourWorkWeekendRatio}}" bindinput="__e"/><text>倍</text><view style="flex:1 1 100%;text-align:right;">{{hourWorkWeekendPrice+"元/时"}}</view></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text class="text-red text-xl">*</text><text>节假日加班倍数</text></view><input class="input" style="width:50%;" type="digit" name="hourWorkHolidayRatio" placeholder="请输入节假日加班倍数" placeholder-style="{{hourWorkHolidayRatio?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','hourWorkHolidayRatio','$event',[]]]]]]}}" value="{{hourWorkHolidayRatio}}" bindinput="__e"/><text>倍</text><view style="flex:1 1 100%;text-align:right;">{{hourWorkHolidayPrice+"元/时"}}</view></view></view><view class="ptb10"><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm" style="width:40%;text-align:right;"><text>全勤奖励设置</text></view><view data-event-opts="{{[['tap',[['addRule',['$event']]]]]}}" style="width:48rpx;height:48rpx;line-height:48rpx;text-align:center;border:1px solid #ccc;border-radius:50%;" bindtap="__e"><uni-icons vue-id="19457004-3" type="plusempty" size="24upx" color="#ccc" bind:__l="__l"></uni-icons></view></view><view style="font-size:24rpx;background-color:#e43d33;color:#fff;font-weight:300;padding:20rpx 30rpx;border-radius:8rpx;margin:20rpx 0 0;"><view style="font-size:24rpx;font-weight:300;">1.根据您的需要点击上面+号设置全勤奖，可设置多级，也可不设置。</view><view style="font-size:24rpx;font-weight:300;">2.若需删除所有满勤设置，请先取消所有满勤设置，然后点击确认提交。</view></view><block wx:for="{{workRuleList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="display:flex;justify-content:space-around;align-items:center;margin-top:30rpx;"><view style="flex:1 1 40%;display:flex;justify-content:space-around;align-items:center;"><text>全勤</text><input class="input" style="width:50%;" type="number" name="fullDay" placeholder="请输入全勤天数" placeholder-style="{{item.fullDay?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['$0','fullDay','$event',[]],[[['workRuleList','',index]]]]]]]}}" value="{{item.fullDay}}" bindinput="__e"/><text>天</text></view><view style="flex:1 1 40%;display:flex;justify-content:space-around;align-items:center;"><text>奖励</text><input class="input" style="width:50%;" type="number" name="fullMoney" placeholder="请输入全勤奖励" placeholder-style="{{item.fullMoney?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['$0','fullMoney','$event',[]],[[['workRuleList','',index]]]]]]]}}" value="{{item.fullMoney}}" bindinput="__e"/><text>元</text></view><view style="flex:1 1 20%;display:flex;justify-content:flex-end;align-items:center;"><view data-event-opts="{{[['tap',[['delRule',['$0',index],[[['workRuleList','',index,'id']]]]]]]}}" style="font-size:24rpx;padding:4rpx 10rpx;border-radius:8rpx;background-color:#e43d33;color:#fff;" bindtap="__e">取消</view></view></view></block></view></view><view style="margin-top:30rpx;background-color:#e43d33;padding:30rpx 20rpx;border-radius:16rpx;color:#fff;line-height:1.2em;"><view style="font-size:24rpx;font-weight:700;">小时工资(默认)=基本工资÷21.75天÷8小时(可手动修改)</view><view style="font-size:24rpx;font-weight:500;">如实际情况不是按默认倍数计算，可在记工时时手动输入工资</view></view></view><view style="padding:10rpx 0;"><button class="btn_next round " style="width:100%;margin:0 auto;margin-top:20rpx;" form-type="submit">确认提交</button></view></form></view></block><block wx:if="{{salaryType==2}}"><view><view style="background-color:rgba(41,121,255,.05);border-radius:16rpx;padding:10rpx;margin-bottom:30rpx;"><view style="display:flex;justify-content:space-around;align-items:center;padding:20rpx 0;border-bottom:1px solid #efefef;"><view style="flex:1 1 25%;text-align:left;font-weight:500;">名称</view><view style="flex:1 1 15%;text-align:center;font-weight:500;">单位</view><view style="flex:1 1 15%;text-align:right;font-weight:500;">价格</view><view style="flex:1 1 45%;text-align:right;font-weight:500;">操作</view></view><block wx:for="{{hourworkList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view style="display:flex;justify-content:space-around;align-items:center;padding:20rpx 0;border-bottom:1px solid #efefef;"><view class="ellipsis" style="flex:1 1 25%;text-align:left;font-weight:300;">{{item.name}}</view><view class="ellipsis" style="flex:1 1 15%;text-align:center;font-weight:300;">{{item.unit}}</view><view class="ellipsis" style="flex:1 1 20%;text-align:right;font-weight:300;">{{item.price+"元"}}</view><view style="flex:1 1 40%;text-align:right;display:flex;justify-content:flex-end;align-items:center;"><view data-event-opts="{{[['tap',[['edit',['$0',index],[[['hourworkList','id',item.id,'id']]]]]]]}}" style="color:#fff;background-color:#e43d33;border-radius:8rpx;padding:2rpx 6rpx;display:flex;justify-content:flex-end;align-items:center;" bindtap="__e"><uni-icons vue-id="{{'19457004-4-'+index}}" type="compose" color="#fff;" size="12" bind:__l="__l"></uni-icons><text style="margin-left:8rpx;font-size:24rpx;">修改</text></view><view data-event-opts="{{[['tap',[['del',['$0',index],[[['hourworkList','id',item.id,'id']]]]]]]}}" style="color:#fff;margin-left:10rpx;background-color:#e43d33;border-radius:8rpx;padding:2rpx 6rpx;display:flex;justify-content:flex-end;align-items:center;" bindtap="__e"><uni-icons vue-id="{{'19457004-5-'+index}}" type="trash" color="#fff;" size="12" bind:__l="__l"></uni-icons><text style="margin-left:8rpx;font-size:24rpx;">删除</text></view></view></view></block></view><form data-event-opts="{{[['submit',[['submitWorkRule',['$event']]]]]}}" bindsubmit="__e"><view style="background-color:rgba(41,121,255,.05);border-radius:16rpx;padding:20rpx 10rpx;"><view><view class=" flex align-center" style="width:100%;"><view class="text-lg flex_shrink padding-right-sm"><text>全勤奖励设置</text></view><view data-event-opts="{{[['tap',[['addRule',['$event']]]]]}}" style="width:48rpx;height:48rpx;line-height:48rpx;text-align:center;border:1px solid #ccc;border-radius:50%;" bindtap="__e"><uni-icons vue-id="19457004-6" type="plusempty" size="24upx" color="#ccc" bind:__l="__l"></uni-icons></view></view><view style="background-color:#e43d33;color:#fff;padding:20rpx 30rpx;border-radius:8rpx;margin:20rpx 0 0;"><view style="font-size:24rpx;font-weight:300;">1.必须添加至少一条计件工配置才能进行满勤设置。</view><view style="font-size:24rpx;font-weight:300;">2.根据您的需要点击上面+号设置全勤奖，可设置多级，也可不设置。</view><view style="font-size:24rpx;font-weight:300;">3.若需删除所有满勤设置，请先取消所有满勤设置，然后点击确认提交。</view></view><block wx:for="{{workRuleList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="display:flex;justify-content:space-around;align-items:center;margin-top:30rpx;"><view style="flex:1 1 40%;display:flex;justify-content:space-around;align-items:center;"><text>全勤</text><input class="input" style="width:50%;" type="number" name="fullDay" placeholder="请输入全勤天数" placeholder-style="{{item.fullDay?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['$0','fullDay','$event',[]],[[['workRuleList','',index]]]]]]]}}" value="{{item.fullDay}}" bindinput="__e"/><text>天</text></view><view style="flex:1 1 40%;display:flex;justify-content:space-around;align-items:center;"><text>奖励</text><input class="input" style="width:50%;" type="number" name="fullMoney" placeholder="请输入全勤奖励" placeholder-style="{{item.fullMoney?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['$0','fullMoney','$event',[]],[[['workRuleList','',index]]]]]]]}}" value="{{item.fullMoney}}" bindinput="__e"/><text>元</text></view><view style="flex:1 1 20%;display:flex;justify-content:flex-end;align-items:center;"><view data-event-opts="{{[['tap',[['delRule',['$0',index],[[['workRuleList','',index,'id']]]]]]]}}" style="font-size:24rpx;padding:4rpx 10rpx;border-radius:8rpx;background-color:#e43d33;color:#fff;" bindtap="__e">取消</view></view></view></block></view><view style="padding:10rpx 0;"><button class="btn_next round " style="width:100%;margin:0 auto;margin-top:20rpx;" form-type="submit">确认提交</button></view></view></form></view></block></view><uni-popup class="vue-ref" vue-id="19457004-7" type="center" data-ref="tips2" bind:__l="__l" vue-slots="{{['default']}}"><form data-event-opts="{{[['submit',[['addNewConfig',['$event']]]]]}}" class="grace-form grace-margin-top" style="width:80vw;" bindsubmit="__e"><view class="cu-list menu sm-border"><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><text class="text-lg flex_shrink padding-right-sm"><text class="text-red text-xl">*</text><text>名称</text></text><input class="input" style="width:100%;" type="text" name="pieceWorkTitle" placeholder="请输入名称" placeholder-style="{{pieceWorkTitle?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','pieceWorkTitle','$event',[]]],['checktitle',['$0'],['pieceWorkTitle']]]],['blur',[['titleblur',['$0'],['pieceWorkTitle']]]]]}}" value="{{pieceWorkTitle}}" bindinput="__e" bindblur="__e"/></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><text class="text-lg flex_shrink padding-right-sm"><text class="text-red text-xl">*</text><text>单位</text></text><input class="input" style="width:100%;" type="text" name="pieceWorkUnit" placeholder="请输入单位" placeholder-style="{{pieceWorkUnit?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','pieceWorkUnit','$event',[]]],['checktitle',['$0'],['pieceWorkUnit']]]],['blur',[['titleblur',['$0'],['pieceWorkUnit']]]]]}}" value="{{pieceWorkUnit}}" bindinput="__e" bindblur="__e"/></view></view><view class="flex align-center justify-between ptb10"><view class=" flex align-center" style="width:100%;"><text class="text-lg flex_shrink padding-right-sm"><text class="text-red text-xl">*</text><text>单价</text></text><input class="input" style="width:100%;" type="digit" name="pieceWorkPrice" placeholder="请输入单价" placeholder-style="{{pieceWorkPrice?'color:#666':'color:#BFBFBF'}}" data-event-opts="{{[['input',[['__set_model',['','pieceWorkPrice','$event',[]]]]]]}}" value="{{pieceWorkPrice}}" bindinput="__e"/><text>元</text></view></view></view><view style="padding:10rpx 0;"><button class="btn_next round " style="width:100%;margin:0 auto;margin-top:20rpx;" form-type="submit">确认提交</button></view></form></uni-popup></view>