<view><view class="fixed"><cu-custom vue-id="df53b1e4-1" bgColor="bg-white text-black" isBack="{{true}}" bind:__l="__l" vue-slots="{{['backText','right']}}"><view slot="backText"><text class="text_line1">{{title||'昵称'}}</text></view><view slot="right"><text data-event-opts="{{[['tap',[['toReport',['$event']]]]]}}" class="padding-right" bindtap="__e">举报</text></view></cu-custom></view><view class="cu-chat "><view data-event-opts="{{[['touchstart',[['hideEmoji',['$event']]]]]}}" class="content" bindtouchstart="__e"><scroll-view class="msg-list" style="top:180rpx;" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" data-event-opts="{{[['scrolltoupper',[['getMsgList']]]]}}" bindscrolltoupper="__e"><block wx:for="{{$root.l0}}" wx:for-item="row" wx:for-index="index" wx:key="index"><block wx:if="{{row.$orig.from_id}}"><view class="row" id="{{'msg'+row.$orig.aid}}"><block wx:if="{{row.$orig.from_id}}"><block><block wx:if="{{row.$orig.from_id==myuid}}"><view class="my flex-direction text-right"><view class="text-sm flex  padding-bottom align-center justify-end"><view>{{''+(row.$orig.updateTime||row.$orig.time)}}</view></view><view class="flex   justify-end"><block wx:if="{{row.$orig.msg_type!='msg'}}"><view class="left"><block wx:if="{{row.$orig.msg_type=='voice'}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index]]]]]]]}}" class="bubble voice" style="background-color:#338fff;color:#FFFFFF;" bindtap="__e"><view class="length">{{row.g0['length']}}</view><view class="icon my-voice"></view></view></block><block wx:if="{{row.$orig.msg_type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index]]]]]]]}}" class="bubble img" bindtap="__e"><image src="{{row.f0}}" mode="aspectFill"></image></view></block><block wx:if="{{row.$orig.msg_type=='text'}}"><view class="bubble" style="background-color:#338fff;color:#FFFFFF;"><rich-text nodes="{{row.$orig.content}}" selectable="{{true}}"></rich-text></view></block></view></block><block wx:if="{{row.$orig.msg_type!='msg'}}"><view class="right"><image class="bg-gray" src="{{row.$orig.from_avatar||'/static/images/logo.png'}}"></image></view></block></view></view></block><block wx:if="{{row.$orig.from_id!=myuid&&kf_id==row.$orig.from_id}}"><view class="other flex-direction"><view class="text-sm flex  padding-bottom align-center "><view>{{''+(row.$orig.updateTime||row.$orig.time)}}</view></view><view class="flex  "><block wx:if="{{row.$orig.msg_type!='msg'}}"><view class="left"><image class="bg-gray" src="{{row.$orig.from_avatar||'/static/images/logo.png'}}"></image></view></block><block wx:if="{{row.$orig.msg_type!='msg'}}"><view class="right"><block wx:if="{{row.$orig.msg_type=='voice'&&row.$orig.content!=''}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index]]]]]]]}}" class="{{['bubble','voice',playMsgid==row.$orig.id?'play':'']}}" bindtap="__e"><view class="icon other-voice"></view><view class="length">{{row.g1['length']}}</view></view></block><block wx:if="{{row.$orig.msg_type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index]]]]]]]}}" class="bubble img" bindtap="__e"><image src="{{row.f1}}" mode="aspectFill"></image></view></block><block wx:if="{{row.$orig.msg_type=='text'}}"><view class="bubble"><rich-text nodes="{{row.$orig.content}}" selectable="{{true}}"></rich-text></view></block></view></block></view></view></block></block></block></view></block></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['emoji-box',showEmji]}}" catchtouchmove="__e"><swiper class="swiper" indicator-dots="true" duration="150"><block wx:for="{{emojiList}}" wx:for-item="page" wx:for-index="pid" wx:key="pid"><swiper-item><block wx:for="{{page}}" wx:for-item="em" wx:for-index="eid" wx:key="eid"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList','',pid],['','',eid]]]]]]]}}" bindtap="__e"><image mode="widthFix" src="{{IMG_URL+'static/images/emoji/'+em.url}}"></image></view></block></swiper-item></block></swiper></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box','flex','','align-end',showEmji]}}" catchtouchmove="__e"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon tupian"></view></view><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon yuyin"></view></view><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" catchtouchstart="__e" catchtouchmove="__e" catchtouchend="__e" catchtouchcancel="__e">{{''+voiceTis+''}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><textarea auto-height="autoHeight" cursor-spacing="20" maxlength="-1" id="textMsg" data-event-opts="{{[['focus',[['e0',['$event']]]],['linechange',[['lineChange',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindlinechange="__e" bindinput="__e"></textarea></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" bindtap="__e"><view class="icon biaoqing"></view></view></view></view><block wx:if="{{textMsg!=''}}"><label for="textMsg"><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><view class="btn">发送</view></view></label></block></view><view class="{{['record',recording?'':'hidden']}}"><view class="{{['ing',willStop?'hidden':'']}}"><view class="icon luyin2"></view></view><view class="{{['cancel',willStop?'':'hidden']}}"><view class="icon chehui"></view></view><view class="{{['tis',willStop?'change':'']}}">{{recordTis}}</view></view><block wx:if="{{onKeyboard}}"><view data-event-opts="{{[['tap',[['hideKeyboard',['$event']]]]]}}" class="prop_ios" bindtap="__e"></view></block></view></view>